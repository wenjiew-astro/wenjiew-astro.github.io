<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>解决 CDS FTP 下载数据时提示登录的问题</title>
      <link href="/2025/09/05/%E8%A7%A3%E5%86%B3%20CDS%20FTP%20%E4%B8%8B%E8%BD%BD%E6%95%B0%E6%8D%AE%E6%97%B6%E6%8F%90%E7%A4%BA%E7%99%BB%E5%BD%95%E7%9A%84%E9%97%AE%E9%A2%98/"/>
      <url>/2025/09/05/%E8%A7%A3%E5%86%B3%20CDS%20FTP%20%E4%B8%8B%E8%BD%BD%E6%95%B0%E6%8D%AE%E6%97%B6%E6%8F%90%E7%A4%BA%E7%99%BB%E5%BD%95%E7%9A%84%E9%97%AE%E9%A2%98/</url>
      
        <content type="html"><![CDATA[<h1 id="解决-CDS-FTP-下载数据时提示登录的问题"><a href="#解决-CDS-FTP-下载数据时提示登录的问题" class="headerlink" title="解决 CDS FTP 下载数据时提示登录的问题"></a>解决 CDS FTP 下载数据时提示登录的问题</h1><p>在使用 <strong>CDS（Centre de Données astronomiques de Strasbourg）</strong> 下载天文数据时，有时会遇到这样一个情况：</p><p>当你点击类似的链接时：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://cdsarc.cds.unistra.fr/viz-bin/nph-Cat/txt?J/ApJ/928/172/fig6.dat</span><br></pre></td></tr></table></figure><img src="/2025/09/05/%E8%A7%A3%E5%86%B3%20CDS%20FTP%20%E4%B8%8B%E8%BD%BD%E6%95%B0%E6%8D%AE%E6%97%B6%E6%8F%90%E7%A4%BA%E7%99%BB%E5%BD%95%E7%9A%84%E9%97%AE%E9%A2%98/image-20250905110610852.png" class="" title="image-20250905110610852"><p>浏览器会弹出一个窗口，要求输入用户名和密码，看起来像是需要认证：</p><img src="/2025/09/05/%E8%A7%A3%E5%86%B3%20CDS%20FTP%20%E4%B8%8B%E8%BD%BD%E6%95%B0%E6%8D%AE%E6%97%B6%E6%8F%90%E7%A4%BA%E7%99%BB%E5%BD%95%E7%9A%84%E9%97%AE%E9%A2%98/image-20250905110818089.png" class="" title="image-20250905110818089"><p>这让人以为数据被加了权限，但其实  <strong>CDS 数据是公开的，不需要专门账号</strong> 。</p><hr><h2 id="一、问题原因"><a href="#一、问题原因" class="headerlink" title="一、问题原因"></a>一、问题原因</h2><ol><li><strong>现代浏览器已逐步废弃 FTP 协议支持</strong><ul><li>Chrome、Firefox、Edge 等新版浏览器默认关闭或限制了 FTP 支持。</li><li>浏览器会把 FTP 链接当成需要登录的资源，从而弹出用户名&#x2F;密码窗口。</li></ul></li><li><strong>FTP 的匿名访问机制</strong><ul><li>传统的 FTP 服务器允许“匿名登录”（Anonymous FTP）。</li><li>用户名必须填 <code>anonymous</code>，密码可以随便写（通常填邮箱地址），也可以直接留空。</li></ul></li></ol><p>因此，提示登录并不是因为 CDS 限制了数据，而是浏览器对 FTP 的处理方式导致的。</p><hr><h2 id="二、解决方法"><a href="#二、解决方法" class="headerlink" title="二、解决方法"></a>二、解决方法</h2><h3 id="方法一：使用匿名登录（推荐）"><a href="#方法一：使用匿名登录（推荐）" class="headerlink" title="方法一：使用匿名登录（推荐）"></a>方法一：使用匿名登录（推荐）</h3><p>在浏览器弹出的登录框中输入：</p><ul><li>用户名：<code>anonymous</code></li><li>密码：任意（推荐填常用邮箱地址，也可以留空）</li></ul><p>即可顺利进入并下载文件。</p><hr><h3 id="方法二：使用命令行工具"><a href="#方法二：使用命令行工具" class="headerlink" title="方法二：使用命令行工具"></a>方法二：使用命令行工具</h3><p>浏览器对 FTP 协议支持不佳，建议使用命令行工具来下载。</p><h4 id="Linux-macOS"><a href="#Linux-macOS" class="headerlink" title="Linux &#x2F; macOS"></a>Linux &#x2F; macOS</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget ftp://cdsarc.u-strasbg.fr/pub/cats/J/ApJ/928/172/fig6.dat</span><br></pre></td></tr></table></figure><p>或</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">curl -O ftp://cdsarc.u-strasbg.fr/pub/cats/J/ApJ/928/172/fig6.dat</span><br></pre></td></tr></table></figure><h4 id="Windows-PowerShell"><a href="#Windows-PowerShell" class="headerlink" title="Windows PowerShell"></a>Windows PowerShell</h4><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Invoke-WebRequest</span> <span class="literal">-Uri</span> <span class="string">&quot;ftp://cdsarc.u-strasbg.fr/pub/cats/J/ApJ/928/172/fig6.dat&quot;</span> <span class="literal">-OutFile</span> <span class="string">&quot;fig6.dat&quot;</span></span><br></pre></td></tr></table></figure><p>这些工具会自动以匿名方式连接 FTP，无需额外输入。</p><hr><h3 id="方法三：通过-VizieR-ADS-入口（推荐）"><a href="#方法三：通过-VizieR-ADS-入口（推荐）" class="headerlink" title="方法三：通过 VizieR &#x2F; ADS 入口（推荐）"></a>方法三：通过 VizieR &#x2F; ADS 入口（推荐）</h3><p>如果仍无法访问 FTP，可以通过 VizieR 或 NASA ADS 的数据入口，找到对应期刊的数据集，点击网页提供的 <code>fig6.dat</code> 链接下载。</p><hr><h2 id="三、总结"><a href="#三、总结" class="headerlink" title="三、总结"></a>三、总结</h2><ul><li><strong>现象</strong> ：打开 CDS 的 FTP 链接时浏览器提示需要输入用户名和密码。</li><li><strong>原因</strong> ：FTP 协议默认支持匿名访问，但现代浏览器已不再直接支持，因而触发登录框。</li><li><strong>解决方案</strong> ：</li><li>在浏览器中使用 <code>anonymous</code> 作为用户名，密码随便填。</li><li>更推荐使用 <code>wget</code>、<code>curl</code> 等命令行工具下载。</li><li>或通过 VizieR&#x2F;ADS 页面获取数据。</li></ul><p>这样就能顺利获取 CDS 的公开数据文件，比如 <code>fig6.dat</code>，无需真正的登录账号。</p>]]></content>
      
      
      <categories>
          
          <category> 科研 </category>
          
          <category> 工具 </category>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 科研 </tag>
            
            <tag> 笔记 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo博文图片及与Typora一致</title>
      <link href="/2025/09/04/hexo%E5%8D%9A%E6%96%87%E5%9B%BE%E7%89%87%E5%8F%8A%E4%B8%8ETypora%E4%B8%80%E8%87%B4/"/>
      <url>/2025/09/04/hexo%E5%8D%9A%E6%96%87%E5%9B%BE%E7%89%87%E5%8F%8A%E4%B8%8ETypora%E4%B8%80%E8%87%B4/</url>
      
        <content type="html"><![CDATA[<h1 id="hexo博文图片及与Typora一致"><a href="#hexo博文图片及与Typora一致" class="headerlink" title="hexo博文图片及与Typora一致"></a>hexo博文图片及与Typora一致</h1><p>这篇记录如何让 <strong>Hexo 与 Typora 插入&#x2F;预览图片保持一致</strong>，并从旧的 <code>hexo-asset-image</code> 迁移到 <code>hexo-image-link</code>。目标是：<strong>Typora 本地能看，部署上线也能看</strong>，而且不用写 <code>&#123;% asset_img %&#125;</code> 这样的标签。</p><h2 id="1-卸载-hexo-asset-image"><a href="#1-卸载-hexo-asset-image" class="headerlink" title="1. 卸载 hexo-asset-image"></a>1. 卸载 <code>hexo-asset-image</code></h2><p>这个老插件在新版 Hexo 下容易与资源文件夹机制冲突，建议移除：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm uninstall hexo-asset-image --save</span><br></pre></td></tr></table></figure><p>卸载后，检查 <code>package.json</code>，若还有残留条目，手工删掉并执行：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><h2 id="2-安装-hexo-image-link"><a href="#2-安装-hexo-image-link" class="headerlink" title="2. 安装 hexo-image-link"></a>2. 安装 <code>hexo-image-link</code></h2><p>用来自动把 Markdown 里的图片链接解析成正确路径：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-image-link --save</span><br></pre></td></tr></table></figure><p>无需在文章里写 <code>&#123;% asset_img %&#125;</code>，保持纯 Markdown 即可。</p><h2 id="3-启用文章资源文件夹（配合-Typora-最稳）"><a href="#3-启用文章资源文件夹（配合-Typora-最稳）" class="headerlink" title="3. 启用文章资源文件夹（配合 Typora 最稳）"></a>3. 启用文章资源文件夹（配合 Typora 最稳）</h2><p>编辑站点根目录的 <code>_config.yml</code>（不是主题配置）：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">post_asset_folder:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><p>建议同时保持 Hexo 的默认渲染器（如 <code>hexo-renderer-marked</code>），避免与路径改写类插件冲突。</p><h2 id="4-推荐的文件与引用方式"><a href="#4-推荐的文件与引用方式" class="headerlink" title="4. 推荐的文件与引用方式"></a>4. 推荐的文件与引用方式</h2><p>假设你的文章是 <strong><code>hexo博文图片及与Typora一致.md</code></strong>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source/_posts/</span><br><span class="line">  hexo博文图片及与Typora一致.md</span><br><span class="line">  hexo博文图片及与Typora一致/</span><br><span class="line">    image-1.png</span><br><span class="line">    keyboard-shortcuts-win.png</span><br><span class="line">    keyboard-shortcuts-macos.png</span><br><span class="line">    keyboard-shortcuts-linux.png</span><br></pre></td></tr></table></figure><p>在 Markdown 中使用<strong>纯相对路径</strong>（Typora 与 Hexo 都能识别）：</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">![](<span class="link">./image-1.png</span>)</span><br><span class="line">![](<span class="link">./keyboard-shortcuts-win.png</span>)</span><br><span class="line">![](<span class="link">./keyboard-shortcuts-macos.png</span>)</span><br><span class="line">![](<span class="link">./keyboard-shortcuts-linux.png</span>)</span><br></pre></td></tr></table></figure><blockquote><p>只要图片放在<strong>文章同名文件夹</strong>里，并用 <code>./文件名</code> 这种写法，就能在 Typora 本地预览 + Hexo 生成后正常访问。</p></blockquote><h2 id="5-Typora-设置建议"><a href="#5-Typora-设置建议" class="headerlink" title="5. Typora 设置建议"></a>5. Typora 设置建议</h2><ul><li><p>偏好设置 → <strong>图像</strong>：</p><ul><li>「插入图片时复制到」：<code>./$&#123;filename&#125;/</code></li><li>勾选「<strong>使用相对路径</strong>」</li></ul></li><li><p>这样粘贴图片时会自动进入文章同名文件夹，并写成 <code>./xxx.png</code>。</p><img src="/2025/09/04/hexo%E5%8D%9A%E6%96%87%E5%9B%BE%E7%89%87%E5%8F%8A%E4%B8%8ETypora%E4%B8%80%E8%87%B4/image-20250904101717612.png" class="" title="image-20250904101717612"></li></ul><h2 id="6-生成与验证"><a href="#6-生成与验证" class="headerlink" title="6. 生成与验证"></a>6. 生成与验证</h2><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure><p>浏览器打开 <code>http://localhost:4000</code> 检查图片显示是否正常。</p><h2 id="7-常见问题排查"><a href="#7-常见问题排查" class="headerlink" title="7. 常见问题排查"></a>7. 常见问题排查</h2><ol><li><strong>首页&#x2F;归档页不显示但文章页能显示</strong></li></ol><ul><li>多半是装了会改写 <code>&lt;img src&gt;</code> 的插件（懒加载、路径清洗等）。请逐个禁用后再测试。</li><li>与本方案冲突较多的老插件：<code>hexo-asset-image</code>（已卸）、某些 lazyload&#x2F;shortcode 过滤器等。</li></ul><ol><li><strong>部署后 404 &#x2F; 路径错位</strong></li></ol><ul><li>检查站点 <code>_config.yml</code> 的 <code>url</code>&#x2F;<code>root</code> 与部署的路径一致：<ul><li>用户主页：<code>root: /</code></li><li>项目页：<code>root: /你的仓库名/</code></li></ul></li><li>确认图片确实位于 <code>source/_posts/文章同名文件夹/</code> 内。</li></ul><ol><li><strong>Typora 里路径被写成 <code>文章名/图片.png</code></strong></li></ol><ul><li>把链接改成 <code>./图片.png</code>（相对路径）；</li><li>确保 Typora 的「路径前缀模板」留空，开启「使用相对路径」。</li></ul><h2 id="8-小结"><a href="#8-小结" class="headerlink" title="8. 小结"></a>8. 小结</h2><ul><li><strong>卸载</strong> <code>hexo-asset-image</code>，<strong>安装</strong> <code>hexo-image-link</code>。</li><li>开启 <code>post_asset_folder: true</code>，图片放入<strong>文章同名文件夹</strong>。</li><li>文章里用<strong>纯 Markdown 相对路径</strong>（<code>./xxx.png</code>）。</li><li>避免再用 <code>&#123;% asset_img %&#125;</code>，保证 Typora 与 Hexo 一致预览。</li></ul><p>完成以上配置后，写作体验就能「所见即所得」，部署也不再踩坑。祝写博愉快～ 🎉</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">::contentReference[oaicite:0]&#123;index=0&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Hexo </category>
          
          <category> Typora </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
            <tag> Typora </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VSCode 快捷键大全</title>
      <link href="/2025/09/03/VSCode%20%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%A4%A7%E5%85%A8/"/>
      <url>/2025/09/03/VSCode%20%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%A4%A7%E5%85%A8/</url>
      
        <content type="html"><![CDATA[<h1 id="VSCode-快捷键大全"><a href="#VSCode-快捷键大全" class="headerlink" title="VSCode 快捷键大全"></a>VSCode 快捷键大全</h1><blockquote><p>转载一篇来自菜鸟教程的文章，方便自查：<a href="https://www.runoob.com/vscode/vscode-shortcut-keys.html">VSCode 快捷键大全 | 菜鸟教程</a></p></blockquote><p>本章节是 <strong>Visual Studio Code (VS Code)</strong> 的常用快捷键大全，涵盖代码编辑、文件管理、调试等操作，便于提高开发效率。</p><p>快捷键的设置可以通过菜单栏的 <strong>Code &gt; 首选项 &gt; 键盘快捷方式</strong> 查看：</p><p><img src="/2025/09/03/VSCode%20%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%A4%A7%E5%85%A8/5d1419da-2f35-45b1-ab65-9a036b044b61.png" alt="img"></p><p>通过快捷键编辑器，您可以根据自己的需求定制键盘快捷键，提升开发效率。</p><p>说明：</p><ol><li><strong>macOS</strong> 的 <code>Cmd</code> 键对应 Windows&#x2F;Linux 的 <code>Ctrl</code> 键。</li><li><strong>macOS</strong> 的 <code>Option</code> 键对应 Windows&#x2F;Linux 的 <code>Alt</code> 键。</li><li>部分快捷键可能因系统或配置不同而有所差异。</li></ol><hr><h3 id="1-通用操作快捷键"><a href="#1-通用操作快捷键" class="headerlink" title="1. 通用操作快捷键"></a>1. <strong>通用操作快捷键</strong></h3><table><thead><tr><th align="left">功能</th><th align="left">Windows&#x2F;Linux</th><th align="left">macOS</th></tr></thead><tbody><tr><td align="left">打开命令面板</td><td align="left"><code>Ctrl + Shift + P</code></td><td align="left"><code>Cmd + Shift + P</code></td></tr><tr><td align="left">打开设置</td><td align="left"><code>Ctrl + ,</code></td><td align="left"><code>Cmd + ,</code></td></tr><tr><td align="left">打开终端</td><td align="left"><code> Ctrl + &#39;</code></td><td align="left"><code> Ctrl + &#39;</code></td></tr><tr><td align="left">新建窗口</td><td align="left"><code>Ctrl + Shift + N</code></td><td align="left"><code>Cmd + Shift + N</code></td></tr><tr><td align="left">关闭窗口</td><td align="left"><code>Ctrl + Shift + W</code></td><td align="left"><code>Cmd + Shift + W</code></td></tr><tr><td align="left">保存文件</td><td align="left"><code>Ctrl + S</code></td><td align="left"><code>Cmd + S</code></td></tr><tr><td align="left">全部保存</td><td align="left"><code>Ctrl + K S</code></td><td align="left"><code>Cmd + Option + S</code></td></tr><tr><td align="left">自动保存切换</td><td align="left"><code>Ctrl + Shift + P</code> 后搜索 <strong>Auto Save</strong></td><td align="left">同左</td></tr><tr><td align="left">快速打开，转到文件</td><td align="left"><code>Ctrl + P</code></td><td align="left"><code>Cmd + P</code></td></tr><tr><td align="left">键盘快捷键设置</td><td align="left"><code>Ctrl + K, Ctrl + S</code></td><td align="left"><code>Cmd + K, Cmd + S</code></td></tr></tbody></table><hr><h3 id="2-文件与编辑器操作"><a href="#2-文件与编辑器操作" class="headerlink" title="2. 文件与编辑器操作"></a>2. <strong>文件与编辑器操作</strong></h3><table><thead><tr><th align="left">功能</th><th align="left">Windows&#x2F;Linux</th><th align="left">macOS</th></tr></thead><tbody><tr><td align="left">新建文件</td><td align="left"><code>Ctrl + N</code></td><td align="left"><code>Cmd + N</code></td></tr><tr><td align="left">打开文件</td><td align="left"><code>Ctrl + O</code></td><td align="left"><code>Cmd + O</code></td></tr><tr><td align="left">保存文件</td><td align="left"><code>Ctrl + S</code></td><td align="left"><code>Cmd + S</code></td></tr><tr><td align="left">另存为</td><td align="left"><code>Ctrl + Shift + S</code></td><td align="left"><code>Cmd + Shift + S</code></td></tr><tr><td align="left">关闭文件</td><td align="left"><code>Ctrl + W</code></td><td align="left"><code>Cmd + W</code></td></tr><tr><td align="left">关闭所有文件</td><td align="left"><code>Ctrl + K, Ctrl + W</code></td><td align="left"><code>Cmd + K, Cmd + W</code></td></tr><tr><td align="left">重新打开关闭的文件</td><td align="left"><code>Ctrl + Shift + T</code></td><td align="left"><code>Cmd + Shift + T</code></td></tr><tr><td align="left">打开文件夹</td><td align="left"><code>Ctrl+K O</code></td><td align="left"><code>Cmd+K O</code></td></tr><tr><td align="left">上一个文件</td><td align="left"><code>Ctrl+Tab</code></td><td align="left"><code>Cmd+Tab</code></td></tr><tr><td align="left">下一个文件</td><td align="left"><code>Ctrl+Shift+Tab</code></td><td align="left"><code>Cmd+Shift+Tab</code></td></tr><tr><td align="left">切换编辑器布局</td><td align="left"><code>Alt+Shift+数字</code></td><td align="left"><code>Cmd+Option+数字</code></td></tr><tr><td align="left">全屏切换</td><td align="left"><code>F11</code></td><td align="left"><code>Ctrl+Cmd+F</code></td></tr></tbody></table><hr><h3 id="3-代码编辑快捷键"><a href="#3-代码编辑快捷键" class="headerlink" title="3. 代码编辑快捷键"></a>3. <strong>代码编辑快捷键</strong></h3><table><thead><tr><th align="left">功能</th><th align="left">Windows&#x2F;Linux</th><th align="left">macOS</th></tr></thead><tbody><tr><td align="left">撤销</td><td align="left"><code>Ctrl + Z</code></td><td align="left"><code>Cmd + Z</code></td></tr><tr><td align="left">重做</td><td align="left"><code>Ctrl + Y</code></td><td align="left"><code>Cmd + Y</code></td></tr><tr><td align="left">复制</td><td align="left"><code>Ctrl + C</code></td><td align="left"><code>Cmd + C</code></td></tr><tr><td align="left">剪切</td><td align="left"><code>Ctrl + X</code></td><td align="left"><code>Cmd + X</code></td></tr><tr><td align="left">粘贴</td><td align="left"><code>Ctrl + V</code></td><td align="left"><code>Cmd + V</code></td></tr><tr><td align="left">查找</td><td align="left"><code>Ctrl + F</code></td><td align="left"><code>Cmd + F</code></td></tr><tr><td align="left">替换</td><td align="left"><code>Ctrl + H</code></td><td align="left"><code>Cmd + H</code></td></tr><tr><td align="left">全选</td><td align="left"><code>Ctrl + A</code></td><td align="left"><code>Cmd + A</code></td></tr><tr><td align="left">格式化代码</td><td align="left"><code>Shift + Alt + F</code></td><td align="left"><code>Shift + Option + F</code></td></tr><tr><td align="left">注释行</td><td align="left"><code>Ctrl + /</code></td><td align="left"><code>Cmd + /</code></td></tr><tr><td align="left">多行注释</td><td align="left"><code>Shift + Alt + A</code></td><td align="left"><code>Shift + Option + A</code></td></tr><tr><td align="left">复制当前行</td><td align="left"><code>Alt + Shift + Down</code></td><td align="left"><code>Option + Shift + Down</code></td></tr><tr><td align="left">删除当前行</td><td align="left"><code>Ctrl + Shift + K</code></td><td align="left"><code>Cmd + Shift + K</code></td></tr><tr><td align="left">移动当前行</td><td align="left"><code>Alt + Up/Down</code></td><td align="left"><code>Option + Up/Down</code></td></tr><tr><td align="left">选中当前行</td><td align="left"><code>Ctrl + L</code></td><td align="left"><code>Cmd + L</code></td></tr><tr><td align="left">查找替换</td><td align="left"><code>Ctrl + H</code></td><td align="left"><code>Cmd + Option + F</code></td></tr><tr><td align="left">转到行号</td><td align="left"><code>Ctrl + G</code></td><td align="left"><code>Cmd + G</code></td></tr><tr><td align="left">在下方插入行</td><td align="left"><code>Ctrl + Enter</code></td><td align="left"><code>Cmd + Enter</code></td></tr><tr><td align="left">在上方插入行</td><td align="left"><code>Ctrl + Shift + Enter</code></td><td align="left"><code>Cmd + Shift + Enter</code></td></tr><tr><td align="left">跳转到匹配的括号</td><td align="left"><code>Ctrl + Shift + \</code></td><td align="left"><code>Cmd + Shift + \</code></td></tr><tr><td align="left">缩进&#x2F;取消缩进</td><td align="left"><code>Ctrl + ] / [</code></td><td align="left"><code>Cmd + ] / [</code></td></tr><tr><td align="left">转到行首&#x2F;行尾</td><td align="left"><code>Home / End</code></td><td align="left"><code>Cmd + ← / →</code></td></tr><tr><td align="left">转到文件开头&#x2F;结尾</td><td align="left"><code>Ctrl + Home / End</code></td><td align="left"><code>Cmd + ↑ / ↓</code></td></tr><tr><td align="left">折叠&#x2F;展开区域</td><td align="left"><code>Ctrl + Shift + [ / ]</code></td><td align="left"><code>Option + Cmd + [ / ]</code></td></tr><tr><td align="left">切换块注释</td><td align="left"><code>Shift + Alt + A</code></td><td align="left"><code>Option + Shift + A</code></td></tr><tr><td align="left">切换自动换行</td><td align="left"><code>Alt + Z</code></td><td align="left"><code>Option + Z</code></td></tr></tbody></table><hr><h3 id="4-多光标操作"><a href="#4-多光标操作" class="headerlink" title="4. 多光标操作"></a>4. <strong>多光标操作</strong></h3><table><thead><tr><th align="left">功能</th><th align="left">Windows&#x2F;Linux</th><th align="left">macOS</th></tr></thead><tbody><tr><td align="left">插入光标</td><td align="left"><code>Alt + 点击</code></td><td align="left"><code>Option + 点击</code></td></tr><tr><td align="left">在上方&#x2F;下方插入光标</td><td align="left"><code>Ctrl + Alt + ↑ / ↓</code></td><td align="left"><code>Option + Cmd + ↑ / ↓</code></td></tr><tr><td align="left">撤销上一个光标操作</td><td align="left"><code>Ctrl + U</code></td><td align="left"><code>Cmd + U</code></td></tr><tr><td align="left">选择当前行</td><td align="left"><code>Ctrl + L</code></td><td align="left"><code>Cmd + L</code></td></tr><tr><td align="left">选择所有匹配项</td><td align="left"><code>Ctrl + F2</code></td><td align="left"><code>Cmd + F2</code></td></tr><tr><td align="left">列选择</td><td align="left"><code>Shift + Alt + 拖动</code></td><td align="left"><code>Shift + Option + 拖动</code></td></tr><tr><td align="left">选中所有匹配内容</td><td align="left"><code>Ctrl + Shift + L</code></td><td align="left"><code>Cmd + Shift + L</code></td></tr><tr><td align="left">选中下一个匹配</td><td align="left"><code>Ctrl + D</code></td><td align="left"><code>Cmd + D</code></td></tr></tbody></table><hr><h3 id="5-调试快捷键"><a href="#5-调试快捷键" class="headerlink" title="5. 调试快捷键"></a>5. <strong>调试快捷键</strong></h3><table><thead><tr><th align="left">功能</th><th align="left">Windows&#x2F;Linux</th><th align="left">macOS</th></tr></thead><tbody><tr><td align="left">开始调试</td><td align="left"><code>F5</code></td><td align="left"><code>F5</code></td></tr><tr><td align="left">停止调试</td><td align="left"><code>Shift+F5</code></td><td align="left"><code>Shift+F5</code></td></tr><tr><td align="left">步过</td><td align="left"><code>F10</code></td><td align="left"><code>F10</code></td></tr><tr><td align="left">步入</td><td align="left"><code>F11</code></td><td align="left"><code>F11</code></td></tr><tr><td align="left">步出</td><td align="left"><code>Shift+F11</code></td><td align="left"><code>Shift+F11</code></td></tr><tr><td align="left">切换断点</td><td align="left"><code>F9</code></td><td align="left"><code>F9</code></td></tr></tbody></table><hr><h3 id="6-搜索和导航"><a href="#6-搜索和导航" class="headerlink" title="6. 搜索和导航"></a>6. <strong>搜索和导航</strong></h3><table><thead><tr><th align="left">功能</th><th align="left">Windows&#x2F;Linux</th><th align="left">macOS</th></tr></thead><tbody><tr><td align="left">全局搜索</td><td align="left"><code>Ctrl+Shift+F</code></td><td align="left"><code>Cmd+Shift+F</code></td></tr><tr><td align="left">转到定义</td><td align="left"><code>F12</code></td><td align="left"><code>F12</code></td></tr><tr><td align="left">转到声明</td><td align="left"><code>Ctrl+F12</code></td><td align="left"><code>Cmd+F12</code></td></tr><tr><td align="left">查找引用</td><td align="left"><code>Shift+F12</code></td><td align="left"><code>Shift+F12</code></td></tr><tr><td align="left">显示大纲</td><td align="left"><code>Ctrl+Shift+O</code></td><td align="left"><code>Cmd+Shift+O</code></td></tr><tr><td align="left">跳转到上一个位置</td><td align="left"><code>Ctrl+Alt+Left</code></td><td align="left"><code>Cmd+Option+Left</code></td></tr><tr><td align="left">跳转到下一个位置</td><td align="left"><code>Ctrl+Alt+Right</code></td><td align="left"><code>Cmd+Option+Right</code></td></tr></tbody></table><hr><h3 id="7-版本控制"><a href="#7-版本控制" class="headerlink" title="7. 版本控制"></a>7. <strong>版本控制</strong></h3><table><thead><tr><th align="left">功能</th><th align="left">Windows&#x2F;Linux</th><th align="left">macOS</th></tr></thead><tbody><tr><td align="left">打开版本控制视图</td><td align="left"><code>Ctrl+Shift+G</code></td><td align="left"><code>Cmd+Shift+G</code></td></tr><tr><td align="left">提交代码</td><td align="left"><code>Ctrl+Enter</code></td><td align="left"><code>Cmd+Enter</code></td></tr><tr><td align="left">查看变更</td><td align="left"><code>Ctrl+Shift+D</code></td><td align="left"><code>Cmd+Shift+D</code></td></tr></tbody></table><hr><h3 id="8-终端操作"><a href="#8-终端操作" class="headerlink" title="8. 终端操作"></a>8. <strong>终端操作</strong></h3><table><thead><tr><th align="left">功能</th><th align="left">Windows&#x2F;Linux</th><th align="left">macOS</th></tr></thead><tbody><tr><td align="left">显示集成终端</td><td align="left">Ctrl + &#96;</td><td align="left">Ctrl + &#96;</td></tr><tr><td align="left">新建终端</td><td align="left">&#96;Ctrl+Shift+&#96;&#96;&#96;</td><td align="left">&#96;Cmd+Shift+&#96;&#96;&#96;</td></tr><tr><td align="left">切换终端</td><td align="left"><code>Ctrl+PageUp/PageDown</code></td><td align="left"><code>Cmd+PageUp/PageDown</code></td></tr><tr><td align="left">关闭终端</td><td align="left"><code>Ctrl+Shift+W</code></td><td align="left"><code>Cmd+Shift+W</code></td></tr></tbody></table><h3 id="9-命令面板"><a href="#9-命令面板" class="headerlink" title="9. 命令面板"></a>9. 命令面板</h3><table><thead><tr><th align="left">操作</th><th align="left">Windows&#x2F;Linux</th><th align="left">macOS</th></tr></thead><tbody><tr><td align="left">打开命令面板</td><td align="left"><code>Ctrl + Shift + P</code></td><td align="left"><code>Cmd + Shift + P</code></td></tr><tr><td align="left">打开键盘快捷键参考</td><td align="left"><code>Ctrl + K, Ctrl + S</code></td><td align="left"><code>Cmd + K, Cmd + S</code></td></tr></tbody></table><h3 id="10-显示"><a href="#10-显示" class="headerlink" title="10. 显示"></a>10. 显示</h3><table><thead><tr><th align="left"><strong>功能</strong></th><th align="left"><strong>Windows&#x2F;Linux</strong></th><th align="left"><strong>macOS</strong></th></tr></thead><tbody><tr><td align="left">切换全屏</td><td align="left"><code>F11</code></td><td align="left"><code>Cmd + Ctrl + F</code></td></tr><tr><td align="left">放大&#x2F;缩小</td><td align="left"><code>Ctrl + = / -</code></td><td align="left"><code>Cmd + = / -</code></td></tr><tr><td align="left">切换侧边栏可见性</td><td align="left"><code>Ctrl + B</code></td><td align="left"><code>Cmd + B</code></td></tr><tr><td align="left">显示资源管理器</td><td align="left"><code>Ctrl + Shift + E</code></td><td align="left"><code>Cmd + Shift + E</code></td></tr><tr><td align="left">显示搜索</td><td align="left"><code>Ctrl + Shift + F</code></td><td align="left"><code>Cmd + Shift + F</code></td></tr><tr><td align="left">显示源代码控制</td><td align="left"><code>Ctrl + Shift + G</code></td><td align="left"><code>Cmd + Shift + G</code></td></tr><tr><td align="left">显示调试</td><td align="left"><code>Ctrl + Shift + D</code></td><td align="left"><code>Cmd + Shift + D</code></td></tr><tr><td align="left">显示扩展</td><td align="left"><code>Ctrl + Shift + X</code></td><td align="left"><code>Cmd + Shift + X</code></td></tr></tbody></table><h3 id="11-扩展操作"><a href="#11-扩展操作" class="headerlink" title="11. 扩展操作"></a>11. 扩展操作</h3><table><thead><tr><th align="left">操作</th><th align="left">Windows&#x2F;Linux</th><th align="left">macOS</th></tr></thead><tbody><tr><td align="left">安装扩展</td><td align="left"><code>Ctrl + Shift + X</code></td><td align="left"><code>Cmd + Shift + X</code></td></tr><tr><td align="left">扩展管理</td><td align="left"><code>Ctrl + Shift + P</code> → 输入 “Extensions”</td><td align="left">同左</td></tr></tbody></table><h3 id="12-其他"><a href="#12-其他" class="headerlink" title="12. 其他"></a>12. 其他</h3><table><thead><tr><th align="left"><strong>功能</strong></th><th align="left"><strong>Windows&#x2F;Linux</strong></th><th align="left"><strong>macOS</strong></th></tr></thead><tbody><tr><td align="left">打开 Markdown 预览</td><td align="left"><code>Ctrl + K, V</code></td><td align="left"><code>Cmd + K, V</code></td></tr><tr><td align="left">禅模式</td><td align="left"><code>Ctrl + K, Z</code></td><td align="left"><code>Cmd + K, Z</code></td></tr></tbody></table><hr><h2 id="官方提供的快捷键说明"><a href="#官方提供的快捷键说明" class="headerlink" title="官方提供的快捷键说明"></a>官方提供的快捷键说明</h2><h3 id="Windows-平台"><a href="#Windows-平台" class="headerlink" title="Windows 平台"></a>Windows 平台</h3><p><img src="/2025/09/03/VSCode%20%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%A4%A7%E5%85%A8/keyboard-shortcuts-win.png" alt="img"></p><h3 id="macOS-平台"><a href="#macOS-平台" class="headerlink" title="macOS 平台"></a>macOS 平台</h3><p><img src="/2025/09/03/VSCode%20%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%A4%A7%E5%85%A8/keyboard-shortcuts-macos.png" alt="img"></p><h3 id="Linux-平台"><a href="#Linux-平台" class="headerlink" title="Linux 平台"></a>Linux 平台</h3><p><img src="/2025/09/03/VSCode%20%E5%BF%AB%E6%8D%B7%E9%94%AE%E5%A4%A7%E5%85%A8/keyboard-shortcuts-linux.png" alt="img"></p><hr><p>以上快捷键可以通过 <strong>键绑定设置</strong> 自定义。在 VS Code 中，按下 <code>Ctrl+K Ctrl+S</code>（macOS 上 <code>Cmd+K Cmd+S</code>）打开键绑定页面，方便查询和修改快捷键。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> VSCode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> VSCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>VSCode 快速折叠所有的文件夹</title>
      <link href="/2025/09/03/VSCode%20%E5%BF%AB%E9%80%9F%E6%8A%98%E5%8F%A0%E6%89%80%E6%9C%89%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9/"/>
      <url>/2025/09/03/VSCode%20%E5%BF%AB%E9%80%9F%E6%8A%98%E5%8F%A0%E6%89%80%E6%9C%89%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9/</url>
      
        <content type="html"><![CDATA[<h1 id="VSCode-快速折叠所有的文件夹"><a href="#VSCode-快速折叠所有的文件夹" class="headerlink" title="VSCode 快速折叠所有的文件夹"></a>VSCode 快速折叠所有的文件夹</h1><p><strong>遇到的问题</strong><br>在写代码的时候，会打开很多文件夹，但是开的文件夹很多的话又很烦，所以想折叠所有文件夹</p><blockquote><p>我在网上也找过快捷键，但是网上的 <code>ctrl + k  ctrl + 0</code> 折叠，<code>ctrl + k  ctrl + j</code> 展开并没有作用。</p></blockquote><p><strong>找到的另一个解决方案</strong><br><code>看红色的箭头，点击这个会快速折叠所有文件夹！</code></p><img src="/2025/09/03/VSCode%20%E5%BF%AB%E9%80%9F%E6%8A%98%E5%8F%A0%E6%89%80%E6%9C%89%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9/image.png" class="">]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> VSCode </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> VSCode </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo配置友链</title>
      <link href="/2025/09/01/hexo%E9%85%8D%E7%BD%AE%E5%8F%8B%E9%93%BE/"/>
      <url>/2025/09/01/hexo%E9%85%8D%E7%BD%AE%E5%8F%8B%E9%93%BE/</url>
      
        <content type="html"><![CDATA[<blockquote><p> 效果图可以查看我的博客<code>友人帐</code>页面</p></blockquote><h2 id="数据-（统一写-JSON，和-Matery-同款字段，后续可迁移很方便）"><a href="#数据-（统一写-JSON，和-Matery-同款字段，后续可迁移很方便）" class="headerlink" title="数据 （统一写 JSON，和 Matery 同款字段，后续可迁移很方便）"></a><strong>数据</strong> （统一写 JSON，和 Matery 同款字段，后续可迁移很方便）</h2><p>新建 <code>source/_data/friends.json</code>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;avatar&quot;: &quot;https://files.catbox.moe/zepnb3.jpg&quot;,</span><br><span class="line">        &quot;name&quot;: &quot;爱骑扫把的王同学&quot;,</span><br><span class="line">        &quot;introduction&quot;: &quot;海是倒过来的天&quot;,</span><br><span class="line">        &quot;url&quot;: &quot;https://wenjiew-astro.github.io/&quot;,</span><br><span class="line">        &quot;title&quot;: &quot;我的地盘&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;avatar&quot;: &quot;https://d33wubrfki0l68.cloudfront.net/6657ba50e702d84afb32fe846bed54fba1a77add/827ae/logo.svg&quot;,</span><br><span class="line">        &quot;name&quot;: &quot;Hexo&quot;,</span><br><span class="line">        &quot;introduction&quot;: &quot;快速、简单且强大的网站框架&quot;,</span><br><span class="line">        &quot;url&quot;: &quot;https://hexo.io/zh-tw/&quot;,</span><br><span class="line">        &quot;title&quot;: &quot;访问官网&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;avatar&quot;: &quot;https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg&quot;,</span><br><span class="line">        &quot;name&quot;: &quot;安知鱼&quot;,</span><br><span class="line">        &quot;introduction&quot;: &quot;生活明朗，万物可爱&quot;,</span><br><span class="line">        &quot;url&quot;: &quot;https://blog.anheyu.com/&quot;,</span><br><span class="line">        &quot;title&quot;: &quot;快去戳他&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">        &quot;name&quot;: &quot;Kezade&quot;,</span><br><span class="line">        &quot;avatar&quot;: &quot;https://zyxelva.github.io/medias/avatar.png&quot;,</span><br><span class="line">        &quot;url&quot;: &quot;https://zyxelva.github.io&quot;,</span><br><span class="line">        &quot;introduction&quot;: &quot;全栈开发，架构师，向往躺平&quot;,</span><br><span class="line">        &quot;title&quot;: &quot;访问他的主页&quot;</span><br><span class="line">    &#125;</span><br><span class="line">]</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="模板（Pug）"><a href="#模板（Pug）" class="headerlink" title="模板（Pug）"></a><strong>模板（Pug）</strong></h2><p> 在 <code>themes/butterfly/layout/ 新建 </code>  <strong>friends-matery.pug</strong>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">//- themes/butterfly/layout/friends-matery.pug</span><br><span class="line">extends includes/layout.pug</span><br><span class="line"></span><br><span class="line">block content</span><br><span class="line">  .page#page</span><br><span class="line">    // 顶部标题</span><br><span class="line">    if page.title</span><br><span class="line">      .friends-hero</span><br><span class="line">        h1= page.title</span><br><span class="line"></span><br><span class="line">    // 友链卡片</span><br><span class="line">    .friends-grid(class=page.gradient ? &#x27;gradient&#x27; : &#x27;&#x27;)</span><br><span class="line">      - const list = site.data.friends || []</span><br><span class="line">      each f in list</span><br><span class="line">        article.friend-card</span><br><span class="line">          img.avatar(</span><br><span class="line">            src=f.avatar,</span><br><span class="line">            alt=f.name,</span><br><span class="line">            loading=&quot;lazy&quot;,</span><br><span class="line">            decoding=&quot;async&quot;,</span><br><span class="line">            referrerpolicy=&quot;no-referrer&quot;,</span><br><span class="line">            onerror=&quot;this.src=&#x27;/img/avatar-fallback.png&#x27;&quot;</span><br><span class="line">          )</span><br><span class="line">          .meta</span><br><span class="line">            h3= f.name</span><br><span class="line">            .title-line</span><br><span class="line">            if f.introduction</span><br><span class="line">              p= f.introduction</span><br><span class="line">          a.btn(href=f.url, target=&quot;_blank&quot;, rel=&quot;noopener&quot;)= f.title || &#x27;访问&#x27;</span><br><span class="line"></span><br><span class="line">    // 页面正文（保持你已有的）</span><br><span class="line">    if page.content</span><br><span class="line">    .post-content!= page.content</span><br><span class="line">    </span><br><span class="line">    // 评论（按 Butterfly 的评论系统设置显示）</span><br><span class="line">    if page.comments !== false</span><br><span class="line">      include includes/third-party/comments/index.pug</span><br><span class="line"></span><br><span class="line">    // ===== 直接内嵌 giscus（不再依赖主题的 comments 入口） =====</span><br><span class="line">    if page.comments !== false</span><br><span class="line">    - const g = theme.giscus || &#123;&#125;;</span><br><span class="line">    - const repo      = g.repo;</span><br><span class="line">    - const repoId    = g[&#x27;repo-id&#x27;] || g.repo_id;</span><br><span class="line">    - const category  = g.category;</span><br><span class="line">    - const catId     = g[&#x27;category-id&#x27;] || g.category_id;</span><br><span class="line">    - const mapping   = g.mapping || &#x27;pathname&#x27;;</span><br><span class="line">    - const strict    = (g.strict === 1 || g.strict === &#x27;1&#x27;) ? &#x27;1&#x27; : &#x27;0&#x27;;</span><br><span class="line">    - const reactions = g[&#x27;reactions-enabled&#x27;] || g.reactions_enabled || &#x27;1&#x27;;</span><br><span class="line">    - const emitMeta  = g[&#x27;emit-metadata&#x27;] || g.emit_metadata || &#x27;0&#x27;;</span><br><span class="line">    - const inputPos  = g[&#x27;input-position&#x27;] || g.input_position || &#x27;bottom&#x27;;</span><br><span class="line">    - const lang      = g.lang || &#x27;zh-CN&#x27;;</span><br><span class="line">    - const themeName = g.theme || &#x27;preferred_color_scheme&#x27;;</span><br><span class="line"></span><br><span class="line">    .giscus</span><br><span class="line">    script(</span><br><span class="line">        src=&quot;https://giscus.app/client.js&quot;</span><br><span class="line">        async</span><br><span class="line">        crossorigin=&quot;anonymous&quot;</span><br><span class="line">        data-repo=repo</span><br><span class="line">        data-repo-id=repoId</span><br><span class="line">        data-category=category</span><br><span class="line">        data-category-id=catId</span><br><span class="line">        data-mapping=mapping</span><br><span class="line">        data-strict=strict</span><br><span class="line">        data-reactions-enabled=reactions</span><br><span class="line">        data-emit-metadata=emitMeta</span><br><span class="line">        data-input-position=inputPos</span><br><span class="line">        data-lang=lang</span><br><span class="line">        data-theme=themeName</span><br><span class="line">    )</span><br></pre></td></tr></table></figure><h2 id="样式"><a href="#样式" class="headerlink" title="样式"></a><strong>样式</strong></h2><p> 把下面这段保存为 <code>source/css/friends-matery.css</code>，并在 <code>themes/butterfly/_config.butterfly.yml</code> 里注入：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/* ========== friends-matery.css (clean) ========== */</span><br><span class="line"></span><br><span class="line">/* 顶部标题 */</span><br><span class="line">.friends-hero&#123;margin:16px 0 24px;text-align:center&#125;</span><br><span class="line">.friends-hero h1&#123;font-size:2rem;margin:0&#125;</span><br><span class="line"></span><br><span class="line">/* 网格容器 */</span><br><span class="line">.friends-grid&#123;</span><br><span class="line">  display:grid;</span><br><span class="line">  grid-template-columns:repeat(auto-fill,minmax(280px,1fr));</span><br><span class="line">  gap:18px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 卡片基础（白卡） */</span><br><span class="line">.friend-card&#123;</span><br><span class="line">  position:relative;</span><br><span class="line">  padding:20px;</span><br><span class="line">  border-radius:20px;</span><br><span class="line">  border:1px solid var(--card-border,rgba(0,0,0,.06));</span><br><span class="line">  background:var(--card-bg,rgba(255,255,255,.6));</span><br><span class="line">  box-shadow:0 8px 26px rgba(0,0,0,.08);</span><br><span class="line">  backdrop-filter:saturate(1.05) blur(2px);</span><br><span class="line">  will-change:transform;</span><br><span class="line">  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 悬停动效 */</span><br><span class="line">.friend-card:hover&#123;transform:translateY(-4px);box-shadow:0 14px 36px rgba(0,0,0,.12)&#125;</span><br><span class="line"></span><br><span class="line">/* —— 布局：左图右文 + 按钮吸底 —— */</span><br><span class="line">.friend-card&#123;</span><br><span class="line">  display:grid;</span><br><span class="line">  grid-template-columns:84px minmax(0,1fr);  /* 左头像 / 右内容 */</span><br><span class="line">  grid-template-rows:auto 1fr auto;          /* 标题 | 描述 | 按钮 */</span><br><span class="line">  column-gap:16px;</span><br><span class="line">  row-gap:8px;</span><br><span class="line">  align-items:start;</span><br><span class="line">  min-height:190px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 头像 */</span><br><span class="line">.friend-card .avatar&#123;</span><br><span class="line">  grid-column:1; grid-row:1 / span 3;</span><br><span class="line">  width:84px;height:84px;border-radius:50%;</span><br><span class="line">  border:3px solid transparent;object-fit:cover;align-self:center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 右侧信息区 */</span><br><span class="line">.friend-card .meta&#123;grid-column:2;grid-row:1 / span 2;min-width:0;display:flex;flex-direction:column&#125;</span><br><span class="line"></span><br><span class="line">/* 标题更大 */</span><br><span class="line">.friend-card h3&#123;</span><br><span class="line">  margin:0;</span><br><span class="line">  font-weight:800;</span><br><span class="line">  font-size:1.5rem;</span><br><span class="line">  line-height:1.25;</span><br><span class="line">  letter-spacing:.2px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 分隔线（白卡下为浅灰，渐变模式下会自动变浅白） */</span><br><span class="line">.friend-card .title-line&#123;</span><br><span class="line">  width:56px;height:3px;border-radius:2px;</span><br><span class="line">  background:rgba(0,0,0,.12);</span><br><span class="line">  margin:6px 0 8px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 描述，两行省略 */</span><br><span class="line">.friend-card p&#123;</span><br><span class="line">  margin:0;opacity:.9;</span><br><span class="line">  display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;</span><br><span class="line">  overflow:hidden;white-space:normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 按钮吸底 */</span><br><span class="line">.friend-card .btn&#123;</span><br><span class="line">  grid-column:2;grid-row:3;justify-self:center; /* 居中改为 center */</span><br><span class="line">  margin:0;border-radius:999px;</span><br><span class="line">  padding:.5rem .9rem;</span><br><span class="line">  border:1px solid rgba(0,0,0,.08);</span><br><span class="line">  font-weight:700;line-height:1;text-decoration:none;</span><br><span class="line">&#125;</span><br><span class="line">.friend-card .btn:hover&#123;box-shadow:0 6px 18px rgba(0,0,0,.12)&#125;</span><br><span class="line"></span><br><span class="line">/* 键盘可见焦点 */</span><br><span class="line">.friend-card:focus-within&#123;outline:3px solid rgba(59,130,246,.5);outline-offset:2px&#125;</span><br><span class="line"></span><br><span class="line">/* 深色模式 */</span><br><span class="line">:root[theme=&#x27;dark&#x27;] .friend-card&#123;</span><br><span class="line">  --card-bg:rgba(18,18,18,.65);</span><br><span class="line">  --card-border:rgba(255,255,255,.08);</span><br><span class="line">  box-shadow:0 10px 30px rgba(0,0,0,.45);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 低动效偏好 */</span><br><span class="line">@media (prefers-reduced-motion: reduce)&#123;</span><br><span class="line">  .friend-card,.friend-card:hover&#123;transform:none&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* ===== 渐变彩卡（在容器 .friends-grid 上加 .gradient 即可启用） ===== */</span><br><span class="line">.friends-grid.gradient .friend-card&#123;</span><br><span class="line">  border:none;background:transparent;color:#fff;box-shadow:0 16px 36px rgba(0,0,0,.25);</span><br><span class="line">&#125;</span><br><span class="line">.friends-grid.gradient .friend-card::before&#123;</span><br><span class="line">  content:&quot;&quot;;position:absolute;inset:0;border-radius:inherit;z-index:0;</span><br><span class="line">  background:linear-gradient(135deg,var(--g1,#00c6ff),var(--g2,#0072ff));</span><br><span class="line">&#125;</span><br><span class="line">.friends-grid.gradient .friend-card &gt; *&#123;position:relative;z-index:1&#125;</span><br><span class="line">.friends-grid.gradient .title-line&#123;background:rgba(255,255,255,.35)&#125;</span><br><span class="line">.friends-grid.gradient .avatar&#123;border-color:rgba(255,255,255,.75)&#125;</span><br><span class="line">.friends-grid.gradient .btn&#123;background:rgba(255,255,255,.95);color:#111;border-color:transparent&#125;</span><br><span class="line">.friends-grid.gradient .btn:hover&#123;box-shadow:0 10px 24px rgba(0,0,0,.28)&#125;</span><br><span class="line"></span><br><span class="line">/* 6 组轮换渐变色（可按需改） */</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n+1)&#123;--g1:#00c6ff;--g2:#0072ff&#125;</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n+2)&#123;--g1:#7f00ff;--g2:#e100ff&#125;</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n+3)&#123;--g1:#f093fb;--g2:#f5576c&#125;</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n+4)&#123;--g1:#36d1dc;--g2:#5b86e5&#125;</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n+5)&#123;--g1:#4facfe;--g2:#00f2fe&#125;</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n)&#123;--g1:#fa709a;--g2:#fee140&#125;</span><br><span class="line"></span><br><span class="line">/* 小屏优化 */</span><br><span class="line">@media (max-width:480px)&#123;</span><br><span class="line">  .friend-card&#123;grid-template-columns:72px 1fr;min-height:170px&#125;</span><br><span class="line">  .friend-card .avatar&#123;width:72px;height:72px&#125;</span><br><span class="line">  .friend-card h3&#123;font-size:1.12rem&#125;</span><br><span class="line">&#125;</span><br><span class="line">/* ========== friends-matery.css (clean) ========== */</span><br><span class="line"></span><br><span class="line">/* 顶部标题 */</span><br><span class="line">.friends-hero&#123;margin:16px 0 24px;text-align:center&#125;</span><br><span class="line">.friends-hero h1&#123;font-size:2rem;margin:0&#125;</span><br><span class="line"></span><br><span class="line">/* 网格容器 */</span><br><span class="line">.friends-grid&#123;</span><br><span class="line">  display:grid;</span><br><span class="line">  grid-template-columns:repeat(auto-fill,minmax(280px,1fr));</span><br><span class="line">  gap:18px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 卡片基础（白卡） */</span><br><span class="line">.friend-card&#123;</span><br><span class="line">  position:relative;</span><br><span class="line">  padding:20px;</span><br><span class="line">  border-radius:20px;</span><br><span class="line">  border:1px solid var(--card-border,rgba(0,0,0,.06));</span><br><span class="line">  background:var(--card-bg,rgba(255,255,255,.6));</span><br><span class="line">  box-shadow:0 8px 26px rgba(0,0,0,.08);</span><br><span class="line">  backdrop-filter:saturate(1.05) blur(2px);</span><br><span class="line">  will-change:transform;</span><br><span class="line">  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 悬停动效 */</span><br><span class="line">.friend-card:hover&#123;transform:translateY(-4px);box-shadow:0 14px 36px rgba(0,0,0,.12)&#125;</span><br><span class="line"></span><br><span class="line">/* —— 布局：左图右文 + 按钮吸底 —— */</span><br><span class="line">.friend-card&#123;</span><br><span class="line">  display:grid;</span><br><span class="line">  grid-template-columns:84px minmax(0,1fr);  /* 左头像 / 右内容 */</span><br><span class="line">  grid-template-rows:auto 1fr auto;          /* 标题 | 描述 | 按钮 */</span><br><span class="line">  column-gap:16px;</span><br><span class="line">  row-gap:8px;</span><br><span class="line">  align-items:start;</span><br><span class="line">  min-height:190px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 头像 */</span><br><span class="line">.friend-card .avatar&#123;</span><br><span class="line">  grid-column:1; grid-row:1 / span 3;</span><br><span class="line">  width:84px;height:84px;border-radius:50%;</span><br><span class="line">  border:3px solid transparent;object-fit:cover;align-self:center;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 右侧信息区 */</span><br><span class="line">.friend-card .meta&#123;grid-column:2;grid-row:1 / span 2;min-width:0;display:flex;flex-direction:column&#125;</span><br><span class="line"></span><br><span class="line">/* 标题更大 */</span><br><span class="line">.friend-card h3&#123;</span><br><span class="line">  margin:0;</span><br><span class="line">  font-weight:800;</span><br><span class="line">  font-size:1.25rem;</span><br><span class="line">  line-height:1.25;</span><br><span class="line">  letter-spacing:.2px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 分隔线（白卡下为浅灰，渐变模式下会自动变浅白） */</span><br><span class="line">.friend-card .title-line&#123;</span><br><span class="line">  width:56px;height:3px;border-radius:2px;</span><br><span class="line">  background:rgba(0,0,0,.12);</span><br><span class="line">  margin:6px 0 8px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 描述，两行省略 */</span><br><span class="line">.friend-card p&#123;</span><br><span class="line">  margin:0;opacity:.9;</span><br><span class="line">  display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;</span><br><span class="line">  overflow:hidden;white-space:normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 按钮吸底 */</span><br><span class="line">.friend-card .btn&#123;</span><br><span class="line">  grid-column:2;grid-row:3;justify-self:start; /* 居中改为 center */</span><br><span class="line">  margin:0;border-radius:999px;</span><br><span class="line">  padding:.5rem .9rem;</span><br><span class="line">  border:1px solid rgba(0,0,0,.08);</span><br><span class="line">  font-weight:700;line-height:1;text-decoration:none;</span><br><span class="line">&#125;</span><br><span class="line">.friend-card .btn:hover&#123;box-shadow:0 6px 18px rgba(0,0,0,.12)&#125;</span><br><span class="line"></span><br><span class="line">/* 键盘可见焦点 */</span><br><span class="line">.friend-card:focus-within&#123;outline:3px solid rgba(59,130,246,.5);outline-offset:2px&#125;</span><br><span class="line"></span><br><span class="line">/* 深色模式 */</span><br><span class="line">:root[theme=&#x27;dark&#x27;] .friend-card&#123;</span><br><span class="line">  --card-bg:rgba(18,18,18,.65);</span><br><span class="line">  --card-border:rgba(255,255,255,.08);</span><br><span class="line">  box-shadow:0 10px 30px rgba(0,0,0,.45);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 低动效偏好 */</span><br><span class="line">@media (prefers-reduced-motion: reduce)&#123;</span><br><span class="line">  .friend-card,.friend-card:hover&#123;transform:none&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* ===== 渐变彩卡（在容器 .friends-grid 上加 .gradient 即可启用） ===== */</span><br><span class="line">.friends-grid.gradient .friend-card&#123;</span><br><span class="line">  border:none;background:transparent;color:#fff;box-shadow:0 16px 36px rgba(0,0,0,.25);</span><br><span class="line">&#125;</span><br><span class="line">.friends-grid.gradient .friend-card::before&#123;</span><br><span class="line">  content:&quot;&quot;;position:absolute;inset:0;border-radius:inherit;z-index:0;</span><br><span class="line">  background:linear-gradient(135deg,var(--g1,#00c6ff),var(--g2,#0072ff));</span><br><span class="line">&#125;</span><br><span class="line">.friends-grid.gradient .friend-card &gt; *&#123;position:relative;z-index:1&#125;</span><br><span class="line">.friends-grid.gradient .title-line&#123;background:rgba(255,255,255,.35)&#125;</span><br><span class="line">.friends-grid.gradient .avatar&#123;border-color:rgba(255,255,255,.75)&#125;</span><br><span class="line">.friends-grid.gradient .btn&#123;background:rgba(255,255,255,.95);color:#111;border-color:transparent&#125;</span><br><span class="line">.friends-grid.gradient .btn:hover&#123;box-shadow:0 10px 24px rgba(0,0,0,.28)&#125;</span><br><span class="line"></span><br><span class="line">/* 6 组轮换渐变色（可按需改） */</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n+1)&#123;--g1:#00c6ff;--g2:#0072ff&#125;</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n+2)&#123;--g1:#7f00ff;--g2:#e100ff&#125;</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n+3)&#123;--g1:#f093fb;--g2:#f5576c&#125;</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n+4)&#123;--g1:#36d1dc;--g2:#5b86e5&#125;</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n+5)&#123;--g1:#4facfe;--g2:#00f2fe&#125;</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n)&#123;--g1:#fa709a;--g2:#fee140&#125;</span><br><span class="line"></span><br><span class="line">/* 小屏优化 */</span><br><span class="line">@media (max-width:480px)&#123;</span><br><span class="line">  .friend-card&#123;grid-template-columns:72px 1fr;min-height:170px&#125;</span><br><span class="line">  .friend-card .avatar&#123;width:72px;height:72px&#125;</span><br><span class="line">  .friend-card h3&#123;font-size:1.12rem&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">/* —— 布局与间距微调 —— */</span><br><span class="line">.friends-grid&#123;</span><br><span class="line">  grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); /* 卡片更稳 */</span><br><span class="line">  gap:18px;</span><br><span class="line">&#125;</span><br><span class="line">.friend-card&#123;</span><br><span class="line">  padding:20px;</span><br><span class="line">  border-radius:20px;</span><br><span class="line">  display:flex;              /* 统一卡片高度 */</span><br><span class="line">  flex-direction:column;</span><br><span class="line">  min-height:190px;</span><br><span class="line">  will-change:transform;</span><br><span class="line">  transition:transform .18s ease, box-shadow .18s ease, border-color .18s ease;</span><br><span class="line">  border:1px solid var(--card-border, rgba(0,0,0,.06));</span><br><span class="line">  box-shadow:0 8px 26px rgba(0,0,0,.08);</span><br><span class="line">&#125;</span><br><span class="line">.friend-card:hover&#123;</span><br><span class="line">  transform:translateY(-4px);</span><br><span class="line">  box-shadow:0 14px 36px rgba(0,0,0,.12);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* —— 头像、标题、描述 —— */</span><br><span class="line">.friend-card .avatar&#123;</span><br><span class="line">  width:80px; height:80px;</span><br><span class="line">  margin:2px 0 12px;</span><br><span class="line">  border-radius:50%;</span><br><span class="line">  border:3px solid transparent;</span><br><span class="line">&#125;</span><br><span class="line">.friend-card h3&#123;</span><br><span class="line">  margin:.1rem 0 .35rem;</span><br><span class="line">  font-weight:800;</span><br><span class="line">  letter-spacing:.2px;</span><br><span class="line">&#125;</span><br><span class="line">.friend-card p&#123;</span><br><span class="line">  margin:0 0 1rem;</span><br><span class="line">  opacity:.9;</span><br><span class="line">  /* 描述两行省略 */</span><br><span class="line">  display:-webkit-box;</span><br><span class="line">  -webkit-line-clamp:2;</span><br><span class="line">  -webkit-box-orient:vertical;</span><br><span class="line">  overflow:hidden;</span><br><span class="line">  white-space:normal;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* —— 按钮强化，贴底 —— */</span><br><span class="line">.friend-card .btn&#123;</span><br><span class="line">  margin-top:auto;</span><br><span class="line">  border-radius:999px;</span><br><span class="line">  padding:.5rem .9rem;</span><br><span class="line">  border:1px solid rgba(0,0,0,.08);</span><br><span class="line">  font-weight:700;</span><br><span class="line">&#125;</span><br><span class="line">.friend-card .btn:hover&#123; box-shadow:0 6px 18px rgba(0,0,0,.12); &#125;</span><br><span class="line"></span><br><span class="line">/* —— 可见焦点（键盘无障碍） —— */</span><br><span class="line">.friend-card:focus-within&#123;</span><br><span class="line">  outline:3px solid rgba(59,130,246,.5);</span><br><span class="line">  outline-offset:2px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* —— 深色模式对比度 —— */</span><br><span class="line">:root[theme=&#x27;dark&#x27;] .friend-card&#123;</span><br><span class="line">  --card-bg:rgba(18,18,18,.65);</span><br><span class="line">  --card-border:rgba(255,255,255,.08);</span><br><span class="line">  box-shadow:0 10px 30px rgba(0,0,0,.45);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* —— 低动效偏好 —— */</span><br><span class="line">@media (prefers-reduced-motion: reduce)&#123;</span><br><span class="line">  .friend-card, .friend-card:hover&#123; transform:none; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* =========================</span><br><span class="line">   可选：渐变彩卡风格（开关见第 3 部分）</span><br><span class="line">   ========================= */</span><br><span class="line">.friends-grid.gradient .friend-card&#123;</span><br><span class="line">  position:relative;</span><br><span class="line">  border:none;</span><br><span class="line">  color:#fff;</span><br><span class="line">  background:transparent;</span><br><span class="line">  box-shadow:0 16px 36px rgba(0,0,0,.25);</span><br><span class="line">&#125;</span><br><span class="line">.friends-grid.gradient .friend-card::before&#123;</span><br><span class="line">  content:&quot;&quot;;</span><br><span class="line">  position:absolute; inset:0; z-index:0; border-radius:inherit;</span><br><span class="line">  background:linear-gradient(135deg,var(--g1,#00c6ff),var(--g2,#0072ff));</span><br><span class="line">&#125;</span><br><span class="line">.friends-grid.gradient .friend-card &gt; *&#123; position:relative; z-index:1; &#125;</span><br><span class="line">.friends-grid.gradient .avatar&#123; border-color:rgba(255,255,255,.7); &#125;</span><br><span class="line">.friends-grid.gradient .btn&#123;</span><br><span class="line">  background:rgba(255,255,255,.92);</span><br><span class="line">  color:#111; border-color:transparent;</span><br><span class="line">&#125;</span><br><span class="line">.friends-grid.gradient .btn:hover&#123; box-shadow:0 10px 24px rgba(0,0,0,.28); &#125;</span><br><span class="line"></span><br><span class="line">/* 自动配色（6色轮替），想要更个性可以自行改色值 */</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n+1)&#123; --g1:#00c6ff; --g2:#0072ff; &#125;</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n+2)&#123; --g1:#7f00ff; --g2:#e100ff; &#125;</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n+3)&#123; --g1:#f093fb; --g2:#f5576c; &#125;</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n+4)&#123; --g1:#36d1dc; --g2:#5b86e5; &#125;</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n+5)&#123; --g1:#4facfe; --g2:#00f2fe; &#125;</span><br><span class="line">.friends-grid.gradient .friend-card:nth-child(6n)&#123;   --g1:#fa709a; --g2:#fee140; &#125;</span><br><span class="line"></span><br><span class="line">/* —— 按钮加长（覆盖前面的规则） —— */</span><br><span class="line">.friends-grid .friend-card .btn&#123;</span><br><span class="line">  min-width: 250px;      /* 想再长一点就调成 180/200px */</span><br><span class="line">  padding: .6rem 1.2rem; /* 稍加粗手感 */</span><br><span class="line">  font-size: .95rem;</span><br><span class="line">  letter-spacing: .2px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* 小屏略收一点 */</span><br><span class="line">@media (max-width: 480px)&#123;</span><br><span class="line">  .friends-grid .friend-card .btn&#123; min-width: 140px; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="页面-Front-Matter"><a href="#页面-Front-Matter" class="headerlink" title="页面 Front-Matter"></a><strong>页面 Front-Matter</strong></h2><p> 把你的友链页（<code>source/link/index.md</code> 或 <code>source/friends/index.md</code>）头部写成：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 友人帐</span><br><span class="line">layout: friends-matery</span><br><span class="line">gradient: true   # ← 想关闭渐变就删掉这一行或设为 false</span><br><span class="line">comments: true</span><br><span class="line">---</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo配置追番页面 — Node.js 22</title>
      <link href="/2025/09/01/hexo%E9%85%8D%E7%BD%AE%E8%BF%BD%E7%95%AA%E9%A1%B5%E9%9D%A2%20%E2%80%94%20Node.js%2022/"/>
      <url>/2025/09/01/hexo%E9%85%8D%E7%BD%AE%E8%BF%BD%E7%95%AA%E9%A1%B5%E9%9D%A2%20%E2%80%94%20Node.js%2022/</url>
      
        <content type="html"><![CDATA[<h1 id="hexo配置追番页面-—-Node-js-22"><a href="#hexo配置追番页面-—-Node-js-22" class="headerlink" title="hexo配置追番页面 — Node.js 22"></a>hexo配置追番页面 — Node.js 22</h1><blockquote><p>hexo 可以连接bilibili，加一个番剧页面，但是网上很多教程都是使用 <code>hexo-bilibili-bangumi</code> 这个插件实现的，但是 <code>hexo-bilibili-bangumi</code> 在 Node.js 18+ 下无法使用，所以我就重新做了一个新的加载方法。</p><p>效果可以看我的博客<a href="https://wenjiew-astro.github.io/">Wenjie Wang - 拾光的老人</a>中 <code>生活/追番</code> 页面</p></blockquote><h2 id="一、抓取脚本（构建时拉取-B-站数据）"><a href="#一、抓取脚本（构建时拉取-B-站数据）" class="headerlink" title="一、抓取脚本（构建时拉取 B 站数据）"></a>一、抓取脚本（构建时拉取 B 站数据）</h2><p>新建文件：<code>source/scripts/fetch_bangumi.cjs</code></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// source/scripts/fetch_bangumi.cjs</span><br><span class="line">const fs = require(&quot;fs&quot;);</span><br><span class="line">const path = require(&quot;path&quot;);</span><br><span class="line"></span><br><span class="line">// 必填：你的 B 站 UID（纯数字）</span><br><span class="line">const UID = process.env.BILI_UID || &quot;3493143351659309&quot;;</span><br><span class="line">// 选填：追番列表不公开时需要（浏览器 Cookie 中的 SESSDATA 值）</span><br><span class="line">const SESSDATA = process.env.BILI_SESSDATA || &quot;&quot;;</span><br><span class="line"></span><br><span class="line">const API_BASE = &quot;https://api.bilibili.com/x/space/bangumi/follow/list&quot;;</span><br><span class="line">const PAGE_SIZE = 30; // B站分页</span><br><span class="line">const TYPE_NUM = 1;   // 1=番剧，2=追剧（当前只抓番剧）</span><br><span class="line"></span><br><span class="line">async function requestOnce(status, pn) &#123;</span><br><span class="line">  const url = `$&#123;API_BASE&#125;?vmid=$&#123;UID&#125;&amp;type=$&#123;TYPE_NUM&#125;&amp;follow_status=$&#123;status&#125;&amp;ps=$&#123;PAGE_SIZE&#125;&amp;pn=$&#123;pn&#125;`;</span><br><span class="line">  const headers = &#123;</span><br><span class="line">    &quot;User-Agent&quot;: &quot;Mozilla/5.0&quot;,</span><br><span class="line">    &quot;Referer&quot;: &quot;https://www.bilibili.com/&quot;</span><br><span class="line">  &#125;;</span><br><span class="line">  if (SESSDATA) headers[&quot;cookie&quot;] = `SESSDATA=$&#123;SESSDATA&#125;;`;</span><br><span class="line"></span><br><span class="line">  const res = await fetch(url, &#123; headers &#125;);</span><br><span class="line">  if (!res.ok) throw new Error(`HTTP $&#123;res.status&#125;`);</span><br><span class="line">  const data = await res.json();</span><br><span class="line">  if (data.code !== 0) &#123;</span><br><span class="line">    throw new Error(`Bilibili API error: code=$&#123;data.code&#125;, message=$&#123;data.message&#125;`);</span><br><span class="line">  &#125;</span><br><span class="line">  return data.data || &#123; list: [] &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">async function fetchAll(status) &#123;</span><br><span class="line">  let pn = 1;</span><br><span class="line">  const out = [];</span><br><span class="line">  while (true) &#123;</span><br><span class="line">    const data = await requestOnce(status, pn);</span><br><span class="line">    const list = data.list || [];</span><br><span class="line">    for (const b of list) &#123;</span><br><span class="line">      let cover = b?.cover || &quot;&quot;;</span><br><span class="line">      if (cover.startsWith(&quot;http://&quot;)) cover = cover.replace(&quot;http://&quot;, &quot;https://&quot;);</span><br><span class="line">      out.push(&#123;</span><br><span class="line">        title: b?.title ?? &quot;&quot;,</span><br><span class="line">        cover: cover,</span><br><span class="line">        new_ep: b?.new_ep?.title ?? &quot;&quot;,</span><br><span class="line">        total_count: b?.total_count ?? -1,</span><br><span class="line">        media_id: b?.media_id ?? 0,</span><br><span class="line">        season_id: b?.season_id ?? 0,   // ← 新增：优先直达播放页</span><br><span class="line">        area: b?.areas?.[0]?.name ?? &quot;&quot;,</span><br><span class="line">        type_name: b?.season_type_name ?? &quot;&quot;,</span><br><span class="line">        evaluate: b?.evaluate ?? &quot;&quot;,</span><br><span class="line">        stat: b?.stat ?? &#123;&#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    if (list.length &lt; PAGE_SIZE) break;</span><br><span class="line">    pn += 1;</span><br><span class="line">  &#125;</span><br><span class="line">  return out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">(async () =&gt; &#123;</span><br><span class="line">  if (!/^\d+$/.test(UID)) &#123;</span><br><span class="line">    throw new Error(&quot;请设置环境变量 BILI_UID 为你的 B 站 UID（纯数字）。&quot;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  console.log(`[bangumi] Fetching UID=$&#123;UID&#125; ...`);</span><br><span class="line">  const wantWatch = await fetchAll(1); // 想看</span><br><span class="line">  const watching  = await fetchAll(2); // 在看</span><br><span class="line">  const watched   = await fetchAll(3); // 已看</span><br><span class="line"></span><br><span class="line">  const outDir = path.resolve(process.cwd(), &quot;source/bangumi&quot;);</span><br><span class="line">  fs.mkdirSync(outDir, &#123; recursive: true &#125;);</span><br><span class="line">  const outPath = path.join(outDir, &quot;data.json&quot;);</span><br><span class="line">  fs.writeFileSync(outPath, JSON.stringify(&#123; wantWatch, watching, watched &#125;, null, 2), &quot;utf-8&quot;);</span><br><span class="line">  console.log(`[bangumi] Saved $&#123;wantWatch.length + watching.length + watched.length&#125; items -&gt; $&#123;outPath&#125;`);</span><br><span class="line">&#125;)().catch(err =&gt; &#123;</span><br><span class="line">  console.error(&quot;[bangumi] Failed:&quot;, err);</span><br><span class="line">  process.exit(1);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>若你的追番列表是<strong>非公开</strong>，要在系统里设置环境变量 <code>BILI_SESSDATA</code>（从浏览器 Cookie 里复制自己的 <code>SESSDATA</code> 值），否则接口可能返回空数组。</p></blockquote><h2 id="二、页面（读取本地-JSON-渲染三个标签）"><a href="#二、页面（读取本地-JSON-渲染三个标签）" class="headerlink" title="二、页面（读取本地 JSON 渲染三个标签）"></a>二、页面（读取本地 JSON 渲染三个标签）</h2><p>新建文件：<code>source/bangumi/index.md</code></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 谁不热爱追番呢</span><br><span class="line">date: 2025-09-01</span><br><span class="line">layout: page</span><br><span class="line">comments: false</span><br><span class="line">top_img: img/top_img/bangumi.png</span><br><span class="line">---</span><br><span class="line">&lt;div id=&quot;bangumi-root&quot;&gt;</span><br><span class="line">  &lt;style&gt;</span><br><span class="line">    /* :root &#123; --card:#fff; --muted:#6b7280; --border:#e5e7eb; --bg:#f8fafc; &#125; */</span><br><span class="line">    #bangumi-root &#123; margin:0; &#125;</span><br><span class="line">    .bangumi-header &#123; padding:24px 16px; text-align:center; background:var(--bg); &#125;</span><br><span class="line">    .bangumi-title &#123; margin:0 0 8px; font-size:30px; &#125;</span><br><span class="line">    .tabs &#123; display:flex; justify-content:center; gap:8px; flex-wrap:wrap; &#125;</span><br><span class="line">    .tab &#123; padding:8px 14px; border:1px solid var(--border); background:#fff; border-radius:10px; cursor:pointer; &#125;</span><br><span class="line">    .tab.active &#123; border-color:#3b82f6; color:#1f2937; box-shadow:0 1px 2px rgba(0,0,0,.06); &#125;</span><br><span class="line">    .bangumi-main &#123; padding:16px; max-width:1100px; margin:0 auto; &#125;</span><br><span class="line">    .grid &#123; display:grid; grid-template-columns:repeat(auto-fill,minmax(180px,1fr)); gap:14px; &#125;</span><br><span class="line">    .card &#123; background:var(--card); border:1px solid var(--border); border-radius:12px; overflow:hidden; transition:transform .15s ease; &#125;</span><br><span class="line">    .card:hover &#123; transform:translateY(-2px); &#125;</span><br><span class="line">    .thumb &#123; display:block; width:100%; aspect-ratio:10/14; object-fit:cover; background:#eef2f7; &#125;</span><br><span class="line">    .content &#123; padding:10px; &#125;</span><br><span class="line">    .title &#123; margin:0 0 6px; font-size:14px; line-height:1.35; &#125;</span><br><span class="line">    .meta &#123; margin:0; font-size:12px; color:var(--muted); &#125;</span><br><span class="line">    .empty &#123; text-align:center; color:var(--muted); padding:40px 0; &#125;</span><br><span class="line">  &lt;/style&gt;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;bangumi-header&quot;&gt;</span><br><span class="line">    &lt;h1 class=&quot;bangumi-title&quot;&gt;📺 我的追番&lt;/h1&gt;</span><br><span class="line">    &lt;div class=&quot;tabs&quot;&gt;</span><br><span class="line">      &lt;button class=&quot;tab&quot; data-key=&quot;watching&quot;&gt;在看&lt;/button&gt;</span><br><span class="line">      &lt;button class=&quot;tab active&quot; data-key=&quot;wantWatch&quot;&gt;想看&lt;/button&gt;</span><br><span class="line">      &lt;button class=&quot;tab&quot; data-key=&quot;watched&quot;&gt;已看&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div class=&quot;bangumi-main&quot;&gt;</span><br><span class="line">    &lt;div id=&quot;grid&quot; class=&quot;grid&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div id=&quot;empty&quot; class=&quot;empty&quot; style=&quot;display:none;&quot;&gt;暂无数据，请先执行抓取脚本。&lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">(function () &#123;</span><br><span class="line">  const PROXY_ON = true; // 若封面不显示，保持 true 通过代理加载；若你不想代理，可改为 false</span><br><span class="line">  const PROXY = (url) =&gt; &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">      if (!url) return &quot;&quot;;</span><br><span class="line">      // 统一成 https</span><br><span class="line">      if (url.startsWith(&quot;//&quot;)) url = &quot;https:&quot; + url;</span><br><span class="line">      if (url.startsWith(&quot;http://&quot;)) url = url.replace(&quot;http://&quot;, &quot;https://&quot;);</span><br><span class="line">      if (!PROXY_ON) return url;</span><br><span class="line">      // 走公开镜像，避免防盗链（不带协议的域名）</span><br><span class="line">      const clean = url.replace(/^https?:\/\//, &quot;&quot;);</span><br><span class="line">      return &quot;https://images.weserv.nl/?url=&quot; + encodeURIComponent(clean);</span><br><span class="line">    &#125; catch (e) &#123; return url || &quot;&quot;; &#125;</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  const GRID  = document.getElementById(&quot;grid&quot;);</span><br><span class="line">  const EMPTY = document.getElementById(&quot;empty&quot;);</span><br><span class="line">  const TABS  = Array.from(document.querySelectorAll(&quot;.tab&quot;));</span><br><span class="line">  let DATA = &#123; wantWatch:[], watching:[], watched:[] &#125;;</span><br><span class="line">  let currentKey = &quot;watching&quot;;</span><br><span class="line"></span><br><span class="line">  function fmtTotal(n) &#123;</span><br><span class="line">    if (n === -1) return &quot;未完结&quot;;</span><br><span class="line">    if (!n || n &lt;= 0) return &quot;&quot;;</span><br><span class="line">    return `全$&#123;n&#125;话`;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  function render(key) &#123;</span><br><span class="line">    GRID.innerHTML = &quot;&quot;;</span><br><span class="line">    const list = DATA[key] || [];</span><br><span class="line">    if (!list.length) &#123; EMPTY.style.display = &quot;block&quot;; return; &#125;</span><br><span class="line">    EMPTY.style.display = &quot;none&quot;;</span><br><span class="line"></span><br><span class="line">    const frag = document.createDocumentFragment();</span><br><span class="line">    list.forEach(b =&gt; &#123;</span><br><span class="line">      const card = document.createElement(&quot;article&quot;);</span><br><span class="line">      card.className = &quot;card&quot;;</span><br><span class="line"></span><br><span class="line">      // 计算跳转链接：优先 season_id（播放页），否则 media_id（媒体页）</span><br><span class="line">      const href =</span><br><span class="line">        (b.season_id &amp;&amp; `https://www.bilibili.com/bangumi/play/ss$&#123;b.season_id&#125;`) ||</span><br><span class="line">        (b.media_id  &amp;&amp; `https://www.bilibili.com/bangumi/media/md$&#123;b.media_id&#125;`) ||</span><br><span class="line">        &quot;&quot;;</span><br><span class="line"></span><br><span class="line">      // 封面（加链接）</span><br><span class="line">      const img = document.createElement(&quot;img&quot;);</span><br><span class="line">      img.className = &quot;thumb&quot;;</span><br><span class="line">      img.loading = &quot;lazy&quot;;</span><br><span class="line">      img.referrerPolicy = &quot;no-referrer&quot;;</span><br><span class="line">      img.alt = b.title || &quot;&quot;;</span><br><span class="line">      img.src = PROXY(b.cover);</span><br><span class="line">      img.onerror = () =&gt; &#123; img.onerror = null; img.src = (b.cover || &quot;&quot;).replace(/^http:\/\//,&quot;https://&quot;); &#125;;</span><br><span class="line"></span><br><span class="line">      if (href) &#123;</span><br><span class="line">        const aImg = document.createElement(&quot;a&quot;);</span><br><span class="line">        aImg.href = href; aImg.target = &quot;_blank&quot;; aImg.rel = &quot;noopener noreferrer&quot;;</span><br><span class="line">        aImg.appendChild(img);</span><br><span class="line">        card.appendChild(aImg);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        card.appendChild(img);</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      // 文本区</span><br><span class="line">      const box = document.createElement(&quot;div&quot;);</span><br><span class="line">      box.className = &quot;content&quot;;</span><br><span class="line"></span><br><span class="line">      // 标题（加链接）</span><br><span class="line">      const h3 = document.createElement(&quot;h3&quot;);</span><br><span class="line">      h3.className = &quot;title&quot;;</span><br><span class="line">      if (href) &#123;</span><br><span class="line">        const aTitle = document.createElement(&quot;a&quot;);</span><br><span class="line">        aTitle.href = href; aTitle.target = &quot;_blank&quot;; aTitle.rel = &quot;noopener noreferrer&quot;;</span><br><span class="line">        aTitle.textContent = b.title || &quot;未命名&quot;;</span><br><span class="line">        h3.appendChild(aTitle);</span><br><span class="line">      &#125; else &#123;</span><br><span class="line">        h3.textContent = b.title || &quot;未命名&quot;;</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      const p = document.createElement(&quot;p&quot;);</span><br><span class="line">      p.className = &quot;meta&quot;;</span><br><span class="line">      const items = [</span><br><span class="line">        b.new_ep ? `进度：$&#123;b.new_ep&#125;` : &quot;&quot;,</span><br><span class="line">        (b.total_count === -1) ? &quot;未完结&quot; : (b.total_count &gt; 0 ? `全$&#123;b.total_count&#125;话` : &quot;&quot;),</span><br><span class="line">        b.area ? `地区：$&#123;b.area&#125;` : &quot;&quot;</span><br><span class="line">      ].filter(Boolean);</span><br><span class="line">      p.textContent = items.join(&quot; · &quot;);</span><br><span class="line"></span><br><span class="line">      box.appendChild(h3);</span><br><span class="line">      box.appendChild(p);</span><br><span class="line">      card.appendChild(box);</span><br><span class="line"></span><br><span class="line">      frag.appendChild(card);</span><br><span class="line">    &#125;);</span><br><span class="line">    GRID.appendChild(frag);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  async function boot() &#123;</span><br><span class="line">    try &#123;</span><br><span class="line">      const res = await fetch(&quot;./data.json?_t=&quot; + Date.now());</span><br><span class="line">      if (!res.ok) throw new Error(&quot;data.json not found&quot;);</span><br><span class="line">      DATA = await res.json();</span><br><span class="line">    &#125; catch (e) &#123;</span><br><span class="line">      console.error(e);</span><br><span class="line">      DATA = &#123; wantWatch:[], watching:[], watched:[] &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">    render(currentKey);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  TABS.forEach(tab =&gt; &#123;</span><br><span class="line">    tab.addEventListener(&quot;click&quot;, () =&gt; &#123;</span><br><span class="line">      TABS.forEach(t =&gt; t.classList.remove(&quot;active&quot;));</span><br><span class="line">      tab.classList.add(&quot;active&quot;);</span><br><span class="line">      currentKey = tab.dataset.key;</span><br><span class="line">      render(currentKey);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  boot();</span><br><span class="line">&#125;)();</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="三、把它接入-Hexo"><a href="#三、把它接入-Hexo" class="headerlink" title="三、把它接入 Hexo"></a>三、把它接入 Hexo</h2><ol><li>安装依赖：</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm i axios --save</span><br></pre></td></tr></table></figure><ol start="2"><li>在 <code>package.json</code> 替换成如下代码：</li></ol><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;hexo-site&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;0.0.0&quot;,</span><br><span class="line">  &quot;private&quot;: true,</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;bangumi:fetch&quot;: &quot;node source/scripts/fetch_bangumi.cjs&quot;,</span><br><span class="line">    &quot;prebuild&quot;: &quot;npm run bangumi:fetch&quot;,</span><br><span class="line">    &quot;preserver&quot;: &quot;npm run bangumi:fetch&quot;,</span><br><span class="line">    &quot;predeploy&quot;: &quot;npm run bangumi:fetch &amp;&amp; hexo generate&quot;,</span><br><span class="line">    &quot;build&quot;: &quot;hexo generate&quot;,</span><br><span class="line">    &quot;clean&quot;: &quot;hexo clean&quot;,</span><br><span class="line">    &quot;deploy&quot;: &quot;hexo deploy&quot;,</span><br><span class="line">    &quot;server&quot;: &quot;hexo server&quot;,</span><br><span class="line">    &quot;start&quot;: &quot;npm run server&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;hexo&quot;: &#123;</span><br><span class="line">    &quot;version&quot;: &quot;7.3.0&quot;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line">    &quot;add&quot;: &quot;^2.0.6&quot;,</span><br><span class="line">    &quot;axios&quot;: &quot;^1.11.0&quot;,</span><br><span class="line">    &quot;hexo&quot;: &quot;^7.3.0&quot;,</span><br><span class="line">    &quot;hexo-butterfly-artitalk&quot;: &quot;^1.0.5&quot;,</span><br><span class="line">    &quot;hexo-butterfly-categories-card&quot;: &quot;^1.0.0&quot;,</span><br><span class="line">    &quot;hexo-butterfly-envelope&quot;: &quot;^1.0.15&quot;,</span><br><span class="line">    &quot;hexo-butterfly-hpptalk&quot;: &quot;^1.0.4&quot;,</span><br><span class="line">    &quot;hexo-deployer-git&quot;: &quot;^4.0.0&quot;,</span><br><span class="line">    &quot;hexo-generator-archive&quot;: &quot;^2.0.0&quot;,</span><br><span class="line">    &quot;hexo-generator-category&quot;: &quot;^2.0.0&quot;,</span><br><span class="line">    &quot;hexo-generator-feed&quot;: &quot;^3.0.0&quot;,</span><br><span class="line">    &quot;hexo-generator-index&quot;: &quot;^4.0.0&quot;,</span><br><span class="line">    &quot;hexo-generator-search&quot;: &quot;^2.4.3&quot;,</span><br><span class="line">    &quot;hexo-generator-tag&quot;: &quot;^2.0.0&quot;,</span><br><span class="line">    &quot;hexo-helper-live2d&quot;: &quot;^3.1.0&quot;,</span><br><span class="line">    &quot;hexo-next-giscus&quot;: &quot;^1.3.0&quot;,</span><br><span class="line">    &quot;hexo-renderer-ejs&quot;: &quot;^2.0.0&quot;,</span><br><span class="line">    &quot;hexo-renderer-marked&quot;: &quot;^7.0.0&quot;,</span><br><span class="line">    &quot;hexo-renderer-pug&quot;: &quot;^3.0.0&quot;,</span><br><span class="line">    &quot;hexo-renderer-stylus&quot;: &quot;^3.0.1&quot;,</span><br><span class="line">    &quot;hexo-server&quot;: &quot;^3.0.0&quot;,</span><br><span class="line">    &quot;hexo-tag-plugins&quot;: &quot;^1.0.5&quot;,</span><br><span class="line">    &quot;hexo-theme-landscape&quot;: &quot;^1.0.0&quot;,</span><br><span class="line">    &quot;hexo-wordcount&quot;: &quot;^6.0.1&quot;,</span><br><span class="line">    &quot;i&quot;: &quot;^0.3.7&quot;,</span><br><span class="line">    &quot;image-size&quot;: &quot;^2.0.2&quot;,</span><br><span class="line">    &quot;install&quot;: &quot;^0.13.0&quot;,</span><br><span class="line">    &quot;live2d-widget-model-koharu&quot;: &quot;^1.0.5&quot;,</span><br><span class="line">    &quot;live2d-widget-model-miku&quot;: &quot;^1.0.5&quot;,</span><br><span class="line">    &quot;live2d-widget-model-wanko&quot;: &quot;^1.0.5&quot;,</span><br><span class="line">    &quot;or&quot;: &quot;^0.2.0&quot;,</span><br><span class="line">    &quot;yarn&quot;: &quot;^1.22.22&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><blockquote><p>其实就是把下面这一部分代码加进去</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;bangumi:fetch&quot;: &quot;node scripts/fetch_bangumi.mjs&quot;,</span><br><span class="line">    &quot;build&quot;: &quot;npm run bangumi:fetch &amp;&amp; hexo g&quot;,</span><br><span class="line">    &quot;start&quot;: &quot;npm run bangumi:fetch &amp;&amp; hexo s&quot;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></blockquote><ol start="3"><li>设置你的 UID（以及可选的 SESSDATA）后运行：</li></ol><ul><li><p>PowerShell（Windows）：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">$env:BILI_UID=&quot;你的B站UID&quot;</span><br><span class="line"># 若追番是私密的，还需要：</span><br><span class="line"># $env:BILI_SESSDATA=&quot;你的SESSDATA&quot;</span><br><span class="line"></span><br><span class="line">npm run build   # 会先自动抓取 -&gt; 生成 data.json -&gt; 再生成站点</span><br><span class="line">npm run server  # 预览 http://localhost:4000/bangumi/</span><br></pre></td></tr></table></figure></li><li><p>或者临时前缀（Git Bash&#x2F;CMD）：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">BILI_UID=你的UID npm run start</span><br><span class="line"># 可选：BILI_SESSDATA=你的SESSDATA npm run start</span><br></pre></td></tr></table></figure></li></ul><p>脚本会生成：<code>source/bangumi/data.json</code><br>然后你的 <code>source/bangumi/index.md</code> 页面（我之前给的那个）会从同目录读取 <code>data.json</code>，三个标签「想看&#x2F;在看&#x2F;已看」就会有内容了。</p><h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><p>以后使用的话要先运行</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm run build   # 自动抓取 -&gt; 生成 data.json -&gt; 再生成站点</span><br></pre></td></tr></table></figure><p>之后正常运行</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure><p>预览 <a href="http://localhost:4000/">http://localhost:4000</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo配置相册页面</title>
      <link href="/2025/09/01/hexo%E9%85%8D%E7%BD%AE%E7%9B%B8%E5%86%8C%E9%A1%B5%E9%9D%A2/"/>
      <url>/2025/09/01/hexo%E9%85%8D%E7%BD%AE%E7%9B%B8%E5%86%8C%E9%A1%B5%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="hexo配置相册页面"><a href="#hexo配置相册页面" class="headerlink" title="hexo配置相册页面"></a>hexo配置相册页面</h1><blockquote><p>相册演示地址:<a href="https://wenjiew-astro.github.io/photos/">光影流年 | Wenjie Wang</a> 。本文是基于Hexo 7.3.0开发！！主要实现相册集以及相册页面功能。</p></blockquote><h2 id="1-创建相册页面"><a href="#1-创建相册页面" class="headerlink" title="1.创建相册页面"></a>1.创建相册页面</h2><p>在自己的博客项目下，新建相册页</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new page photos</span><br></pre></td></tr></table></figure><p>编辑 &#x2F;source&#x2F;photos&#x2F;index.md，输入以下内容</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 光影流年</span><br><span class="line">date: 2025-08-25</span><br><span class="line">layout: photo</span><br><span class="line">top_img: img/top_img/photo.png</span><br><span class="line">---</span><br><span class="line">&lt;!-- 分组封面索引 --&gt;</span><br><span class="line"></span><br><span class="line">&lt;div id=&quot;galleryIntro&quot; class=&quot;gallery-intro&quot;&gt;“ 这里有光影流年，还把喜欢装进云朵，相拥在明天的河岸。 ”&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div id=&quot;galleryIndex&quot; class=&quot;gallery-index&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>新建 &#x2F;source&#x2F;gallery&#x2F;index.md，输入以下内容</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">comments: false</span><br><span class="line">---</span><br><span class="line">&lt;div class=&quot;ImageGrid&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>新建 &#x2F;source&#x2F;galleries&#x2F;index.md，输入以下内容</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 光影流年</span><br><span class="line">comments: false</span><br><span class="line">---</span><br><span class="line">&lt;div id=&quot;galleryIntro&quot; class=&quot;gallery-intro&quot;&gt;“ 这里有光影流年，还把喜欢装进云朵，相拥在明天的河岸。 ”&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;div id=&quot;galleryIndex&quot; class=&quot;gallery-index&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure><h2 id="2-处理图片信息"><a href="#2-处理图片信息" class="headerlink" title="2.处理图片信息"></a>2.处理图片信息</h2><p>这里需要创建自己的github相册，创建一个gallery项目，建一个gallery的文件夹，在这个文件夹里就可以放你想要的照片了。PS：可以放文件夹，一个文件夹就在你的博客中显示的是一个照片集。</p><p>这里主要是为了加快图片的加载速度, 利用GitHub +jsDelivr的方式。</p><blockquote><p>把这个项目clone到本地，下面的操作是对这个项目进行的。</p></blockquote><p>这里没有安装 image-size，需要npm安装下</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm i -S image-size</span><br></pre></td></tr></table></figure><p>在github相册目录下，执行createjs，</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">node createjs.js </span><br></pre></td></tr></table></figure><p>createjs.js 脚本如下：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">const fs = require(&#x27;fs-extra&#x27;);</span><br><span class="line">const path = require(&#x27;path&#x27;);</span><br><span class="line"></span><br><span class="line">// 兼容各种导出形式：function / &#123; imageSize &#125; / &#123; default &#125;</span><br><span class="line">const imgMod = require(&#x27;image-size&#x27;);</span><br><span class="line">const imageSize = typeof imgMod === &#x27;function&#x27; ? imgMod : (imgMod.imageSize || imgMod.default);</span><br><span class="line"></span><br><span class="line">const rootPath = &#x27;gallery&#x27;;   // 相册根目录（不用末尾斜杠）</span><br><span class="line"></span><br><span class="line">class PhotoExtension &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    this.size = 64;</span><br><span class="line">    this.offset = [0, 0];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class Photo &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    this.dirName = &#x27;&#x27;;</span><br><span class="line">    this.fileName = &#x27;&#x27;;</span><br><span class="line">    this.iconID = &#x27;&#x27;;</span><br><span class="line">    this.extension = new PhotoExtension();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class PhotoGroup &#123;</span><br><span class="line">  constructor() &#123;</span><br><span class="line">    this.name = &#x27;&#x27;;</span><br><span class="line">    this.children = [];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const IMAGE_EXTS = new Set([&#x27;.png&#x27;, &#x27;.jpg&#x27;, &#x27;.jpeg&#x27;, &#x27;.gif&#x27;, &#x27;.webp&#x27;, &#x27;.bmp&#x27;, &#x27;.tiff&#x27;, &#x27;.svg&#x27;]);</span><br><span class="line"></span><br><span class="line">function createPlotIconsData() &#123;</span><br><span class="line">  let allPlots = [];</span><br><span class="line">  let allPlotGroups = [];</span><br><span class="line"></span><br><span class="line">  const plotJsonFile = path.join(__dirname, &#x27;photosInfo.json&#x27;);</span><br><span class="line">  const plotGroupJsonFile = path.join(__dirname, &#x27;photos.json&#x27;);</span><br><span class="line"></span><br><span class="line">  if (fs.existsSync(plotJsonFile)) &#123;</span><br><span class="line">    allPlots = JSON.parse(fs.readFileSync(plotJsonFile, &#x27;utf8&#x27;));</span><br><span class="line">  &#125;</span><br><span class="line">  if (fs.existsSync(plotGroupJsonFile)) &#123;</span><br><span class="line">    allPlotGroups = JSON.parse(fs.readFileSync(plotGroupJsonFile, &#x27;utf8&#x27;));</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  // 只遍历相册根目录</span><br><span class="line">  const rootDir = path.join(__dirname, rootPath);</span><br><span class="line">  if (!fs.existsSync(rootDir)) &#123;</span><br><span class="line">    console.error(`根目录不存在：$&#123;rootDir&#125;`);</span><br><span class="line">    return;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  fs.readdirSync(rootDir).forEach((dirName) =&gt; &#123;</span><br><span class="line">    const dirFull = path.join(rootDir, dirName);</span><br><span class="line">    if (!fs.statSync(dirFull).isDirectory()) return;</span><br><span class="line"></span><br><span class="line">    const subfiles = fs.readdirSync(dirFull);</span><br><span class="line">    subfiles.forEach((subfileName) =&gt; &#123;</span><br><span class="line">      const ext = path.extname(subfileName).toLowerCase();</span><br><span class="line">      if (!IMAGE_EXTS.has(ext)) return; // 只处理图片</span><br><span class="line"></span><br><span class="line">      // 如果已存在可跳过（按需打开）</span><br><span class="line">      if (allPlots.find(o =&gt; o.fileName === subfileName &amp;&amp; o.dirName === dirName)) return;</span><br><span class="line"></span><br><span class="line">      const imgPath = path.join(dirFull, subfileName);</span><br><span class="line"></span><br><span class="line">      try &#123;</span><br><span class="line">        const info = imageSize(imgPath); // 这里已兼容函数获取</span><br><span class="line">        const plot = new Photo();</span><br><span class="line">        plot.dirName = dirName;</span><br><span class="line">        plot.fileName = subfileName;</span><br><span class="line">        plot.iconID = `$&#123;info.width&#125;.$&#123;info.height&#125; $&#123;subfileName&#125;`;</span><br><span class="line">        allPlots.push(plot);</span><br><span class="line"></span><br><span class="line">        let group = allPlotGroups.find(o =&gt; o.name === dirName);</span><br><span class="line">        if (!group) &#123;</span><br><span class="line">          group = new PhotoGroup();</span><br><span class="line">          group.name = dirName;</span><br><span class="line">          allPlotGroups.push(group);</span><br><span class="line">        &#125;</span><br><span class="line">        group.children.push(plot.iconID);</span><br><span class="line">        console.log(&#x27;✔ 新增图片：&#x27;, plot.iconID);</span><br><span class="line">      &#125; catch (e) &#123;</span><br><span class="line">        console.warn(&#x27;⚠ 读取图片尺寸失败：&#x27;, imgPath, e.message);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  fs.writeJSONSync(plotJsonFile, allPlots, &#123; spaces: 2 &#125;);</span><br><span class="line">  fs.writeJSONSync(plotGroupJsonFile, allPlotGroups, &#123; spaces: 2 &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">createPlotIconsData();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>将生成的photos.json拷贝到博客目录下的photos</p><h2 id="3-加载-js和css文件"><a href="#3-加载-js和css文件" class="headerlink" title="3.加载 js和css文件"></a>3.加载 js和css文件</h2><p>在 &#x2F;source&#x2F;js&#x2F; 目录下创建 photoWall.js</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">var imgDataPath = &quot;/photos/photos.json&quot;; // 先用站点内路径，稳定 200</span><br><span class="line">var imgPath     = &quot;https://cdn.jsdelivr.net/gh/wenjiew-astro/gallery@main/gallery/&quot;;</span><br><span class="line">var imgMaxNum   = 50;</span><br><span class="line"></span><br><span class="line">var windowWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;</span><br><span class="line">var imageWidth  = windowWidth &lt; 768 ? 145 : 250;</span><br><span class="line"></span><br><span class="line">function slugify(s)&#123; return String(s).toLowerCase().replace(/\s+/g,&#x27;-&#x27;).replace(/[^\w\-]+/g,&#x27;&#x27;).replace(/\-+/g,&#x27;-&#x27;).replace(/^\-+|\-+$/g,&#x27;&#x27;)||&#x27;tab&#x27;; &#125;</span><br><span class="line">function enc(s)&#123; return encodeURIComponent(s); &#125;</span><br><span class="line">function buildImgURL(dir,file)&#123; return imgPath + enc(dir) + &#x27;/&#x27; + enc(file); &#125;</span><br><span class="line"></span><br><span class="line">// 可选：为分组定义“中文/英文标题”这类别名；找不到就用 name 填充</span><br><span class="line">const groupMeta = &#123;</span><br><span class="line">  // &#x27;凤凰古城&#x27;: &#123; title:&#x27;Fenghuang&#x27;, sub:&#x27;凤凰古城&#x27; &#125;,</span><br><span class="line">  // &#x27;西湖&#x27;:     &#123; title:&#x27;West Lake&#x27;, sub:&#x27;西湖&#x27; &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">const photo = &#123;</span><br><span class="line">  offset: imgMaxNum,</span><br><span class="line"></span><br><span class="line">  init()&#123;</span><br><span class="line">    if (typeof jQuery===&#x27;undefined&#x27;)&#123; console.error(&#x27;[photoWall] jQuery 未加载&#x27;); return; &#125;</span><br><span class="line">    $.getJSON(imgDataPath,(data)=&gt;&#123;</span><br><span class="line">      if(!Array.isArray(data)||!data.length)&#123;</span><br><span class="line">        $(&#x27;.ImageGrid&#x27;).html(&#x27;&lt;div style=&quot;padding:1rem;color:#999;&quot;&gt;没有可显示的相册数据&lt;/div&gt;&#x27;); return;</span><br><span class="line">      &#125;</span><br><span class="line">      this.renderIndex(data);      // 上方分组封面区（像示例页）</span><br><span class="line">      this.renderGroups(data);     // 下方分组内容（瀑布流）</span><br><span class="line">      this.bindEvents();</span><br><span class="line">    &#125;).fail((_,s,e)=&gt;&#123;</span><br><span class="line">      console.error(&#x27;[photoWall] 加载 photos.json 失败：&#x27;,s,e);</span><br><span class="line">      $(&#x27;.ImageGrid&#x27;).html(&#x27;&lt;div style=&quot;padding:1rem;color:#c00;&quot;&gt;加载 photos.json 失败&lt;/div&gt;&#x27;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  renderIndex(data)&#123;</span><br><span class="line">    let html=&#x27;&#x27;;</span><br><span class="line">    data.forEach((g,idx)=&gt;&#123;</span><br><span class="line">      const &#123;name=&#x27;&#x27;,children=[]&#125;=g||&#123;&#125;;</span><br><span class="line">      const first=children[0];</span><br><span class="line">      const cover = first ? buildImgURL(name, String(first).split(&#x27; &#x27;)[1])</span><br><span class="line">                          : &#x27;https://via.placeholder.com/400x240?text=No+Image&#x27;;</span><br><span class="line">      const meta  = groupMeta[name] || &#123; title:name, sub:name &#125;;</span><br><span class="line">      const tiltClass = &#x27;tilt-&#x27; + (1 + Math.floor(Math.random()*6));</span><br><span class="line">      html += `</span><br><span class="line">        &lt;div class=&quot;gcard $&#123;tiltClass&#125;&quot; data-target=&quot;#$&#123;slugify(name)&#125;-$&#123;idx&#125;&quot; data-group=&quot;$&#123;enc(name)&#125;&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;gimg&quot;&gt;&lt;img src=&quot;$&#123;cover&#125;&quot; alt=&quot;$&#123;meta.title&#125;&quot;&gt;&lt;/div&gt;</span><br><span class="line">          &lt;div class=&quot;gmeta&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;gtitle&quot;&gt;$&#123;meta.title&#125;&lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;gsub&quot;&gt;$&#123;meta.sub&#125;（$&#123;children.length&#125;）&lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;`;</span><br><span class="line">    &#125;);</span><br><span class="line">    $(&#x27;#galleryIndex&#x27;).html(html);</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  renderGroups(data)&#123;</span><br><span class="line">    let liHtml=&#x27;&#x27;, panesHtml=&#x27;&#x27;;</span><br><span class="line">    data.forEach((group,idx)=&gt;&#123;</span><br><span class="line">      const &#123;name=&#x27;&#x27;,children=[]&#125;=group||&#123;&#125;;</span><br><span class="line">      const active = idx===0 ? &#x27;active&#x27; : &#x27;&#x27;;</span><br><span class="line">      const slug   = `$&#123;slugify(name)&#125;-$&#123;idx&#125;`;</span><br><span class="line"></span><br><span class="line">      // tabs（已被 CSS 隐藏，仅用于内部切分容器）</span><br><span class="line">      liHtml += `</span><br><span class="line">        &lt;li class=&quot;nav-item&quot; role=&quot;presentation&quot;&gt;</span><br><span class="line">          &lt;a class=&quot;nav-link $&#123;active&#125; photo-tab&quot; data-toggle=&quot;tab&quot;</span><br><span class="line">             href=&quot;#$&#123;slug&#125;&quot; role=&quot;tab&quot; aria-controls=&quot;$&#123;slug&#125;&quot; aria-selected=&quot;$&#123;idx===0&#125;&quot;&gt;</span><br><span class="line">             $&#123;name&#125;</span><br><span class="line">          &lt;/a&gt;</span><br><span class="line">        &lt;/li&gt;`;</span><br><span class="line"></span><br><span class="line">      // 分组里的图片卡片</span><br><span class="line">      let cards=&#x27;&#x27;;</span><br><span class="line">      children.slice(0,this.offset).forEach((item)=&gt;&#123;</span><br><span class="line">        const [size,file]=String(item).split(&#x27; &#x27;);</span><br><span class="line">        if(!size||!file) return;</span><br><span class="line">        const [w,h]=size.split(&#x27;.&#x27;);</span><br><span class="line">        const url=buildImgURL(name,file);</span><br><span class="line">        const imgName=file.split(&#x27;.&#x27;)[0];</span><br><span class="line"></span><br><span class="line">        cards += `</span><br><span class="line">          &lt;div class=&quot;card&quot; style=&quot;width:$&#123;imageWidth&#125;px&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;ImageInCard&quot; style=&quot;height:$&#123;(imageWidth*(+h||1))/(+w||1)&#125;px&quot;&gt;</span><br><span class="line">              &lt;a data-fancybox=&quot;gallery&quot; href=&quot;$&#123;url&#125;&quot; data-caption=&quot;$&#123;imgName&#125;&quot; title=&quot;$&#123;imgName&#125;&quot;&gt;</span><br><span class="line">                &lt;img loading=&quot;lazy&quot; src=&quot;$&#123;url&#125;&quot; width=&quot;$&#123;imageWidth&#125;&quot; /&gt;</span><br><span class="line">              &lt;/a&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">          &lt;/div&gt;`;</span><br><span class="line">      &#125;);</span><br><span class="line"></span><br><span class="line">      panesHtml += `</span><br><span class="line">        &lt;div class=&quot;tab-pane fade $&#123;active?&#x27;show active&#x27;:&#x27;&#x27;&#125;&quot; id=&quot;$&#123;slug&#125;&quot; role=&quot;tabpanel&quot;&gt;</span><br><span class="line">          &lt;div class=&quot;ImageGrid&quot;&gt;$&#123;cards&#125;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;`;</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const tabs = `&lt;ul class=&quot;nav nav-tabs&quot; id=&quot;myTab&quot; role=&quot;tablist&quot;&gt;$&#123;liHtml&#125;&lt;/ul&gt;`;</span><br><span class="line">    const content = `&lt;div class=&quot;tab-content&quot; id=&quot;myTabContent&quot;&gt;$&#123;panesHtml&#125;&lt;/div&gt;`;</span><br><span class="line">    $(&#x27;#imageTab&#x27;).html(tabs);</span><br><span class="line">    $(&#x27;.ImageGrid&#x27;).not(&#x27;#myTabContent .ImageGrid&#x27;).remove();</span><br><span class="line">    $(&#x27;#myTab&#x27;).after(content);</span><br><span class="line"></span><br><span class="line">    this.mountGrids();</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  bindEvents()&#123;</span><br><span class="line">    // 点击封面卡片 → 切换到对应分组</span><br><span class="line">    $(document).on(&#x27;click&#x27;,&#x27;.gcard&#x27;,(e)=&gt;&#123;</span><br><span class="line">      const target=$(e.currentTarget).data(&#x27;target&#x27;);</span><br><span class="line">      if(target)&#123; $(`a[href=&#x27;$&#123;target&#125;&#x27;]`).tab(&#x27;show&#x27;); $(&#x27;html,body&#x27;).animate(&#123;scrollTop: $(&#x27;#imageTab&#x27;).offset().top-16&#125;, 280); &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    // Tab 切换/窗口尺寸更改 → 重新布局</span><br><span class="line">    $(document).on(&#x27;shown.bs.tab&#x27;,&#x27;a[data-toggle=&quot;tab&quot;]&#x27;,()=&gt;this.mountGrids());</span><br><span class="line">    $(window).on(&#x27;resize&#x27;,()=&gt;this.mountGrids());</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  mountGrids()&#123;</span><br><span class="line">    $(&quot;.tab-pane.show.active .ImageGrid, .tab-pane.active .ImageGrid&quot;).each(function()&#123;</span><br><span class="line">      try&#123;</span><br><span class="line">        var grid=new Minigrid(&#123; container:this, item:&quot;.card&quot;, gutter:12 &#125;);</span><br><span class="line">        grid.mount();</span><br><span class="line">        const imgs=$(this).find(&#x27;img&#x27;); let left=imgs.length;</span><br><span class="line">        if(!left) return;</span><br><span class="line">        imgs.off(&#x27;load.pw error.pw&#x27;).on(&#x27;load.pw error.pw&#x27;,()=&gt;&#123; if(--left&lt;=0) grid.mount(); &#125;);</span><br><span class="line">      &#125;catch(e)&#123; console.warn(&#x27;[photoWall] Minigrid 失败：&#x27;,e.message); &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">$(function()&#123; photo.init(); &#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在 &#x2F;source&#x2F;js&#x2F; 目录下创建 gallery-group.js</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">console.log(&#x27;gallery-group.js loaded&#x27;);</span><br><span class="line"></span><br><span class="line">var IMG_DATA = &quot;/photos/photos.json&quot;;</span><br><span class="line">var IMG_ROOT = &quot;https://cdn.jsdelivr.net/gh/wenjiew-astro/gallery@main/gallery/&quot;;</span><br><span class="line">var W = (window.innerWidth || document.documentElement.clientWidth) &lt; 768 ? 145 : 250;</span><br><span class="line"></span><br><span class="line">function enc(s)&#123; return encodeURIComponent(s) &#125;</span><br><span class="line">function build(dir, file)&#123; return IMG_ROOT + enc(dir) + &#x27;/&#x27; + enc(file) &#125;</span><br><span class="line">function q(k)&#123; return new URLSearchParams(location.search).get(k) || &#x27;&#x27; &#125;</span><br><span class="line"></span><br><span class="line">$(function()&#123;</span><br><span class="line">  var $grid = $(&quot;.ImageGrid&quot;);</span><br><span class="line">  if (!$grid.length) return;</span><br><span class="line"></span><br><span class="line">  $.getJSON(IMG_DATA).done(function(list)&#123;</span><br><span class="line">    if (!Array.isArray(list) || !list.length) &#123; </span><br><span class="line">      $grid.html(&#x27;&lt;p style=&quot;color:#999&quot;&gt;暂无相册&lt;/p&gt;&#x27;); </span><br><span class="line">      return; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 取参数；没有则默认第一组（但只有在确实没带参数时才兜底）</span><br><span class="line">    var group = q(&#x27;group&#x27;);</span><br><span class="line">    if (!group) &#123;</span><br><span class="line">      group = list[0].name;</span><br><span class="line">      history.replaceState(null, &#x27;&#x27;, &#x27;?group=&#x27; + encodeURIComponent(group));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 兼容中文参数：URLSearchParams 已解码，这里不再反复解码</span><br><span class="line">    var item = list.find(function(x)&#123; return x &amp;&amp; x.name === group; &#125;);</span><br><span class="line">    if (!item) &#123; </span><br><span class="line">      $grid.html(&#x27;&lt;p style=&quot;color:#c00&quot;&gt;未找到分组：&#x27;+ group +&#x27;&lt;/p&gt;&#x27;); </span><br><span class="line">      return; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 找到分组后（item 存在）——把页头标题改成组名，并锁定</span><br><span class="line">    (function forceSiteTitle(name) &#123;</span><br><span class="line">      // 1) 浏览器标签</span><br><span class="line">      document.title = name + &#x27; - 相册&#x27;;</span><br><span class="line"></span><br><span class="line">      // 2) 页头大标题 #site-title</span><br><span class="line">      var el = document.querySelector(&#x27;#page-site-info #site-title&#x27;);</span><br><span class="line">      if (!el) return;</span><br><span class="line"></span><br><span class="line">      // 重复多次以覆盖主题的晚注入</span><br><span class="line">      function apply() &#123; el.textContent = name; &#125;</span><br><span class="line">      [0, 30, 80, 200, 500, 1000, 2000].forEach(function(t)&#123; setTimeout(apply, t); &#125;);</span><br><span class="line"></span><br><span class="line">      // 监听这个节点，一旦被改回就再写一次</span><br><span class="line">      try &#123;</span><br><span class="line">        var mo = new MutationObserver(function()&#123; if (el.textContent !== name) el.textContent = name; &#125;);</span><br><span class="line">        mo.observe(el, &#123; childList: true, characterData: true, subtree: true &#125;);</span><br><span class="line">        setTimeout(function()&#123; mo.disconnect(); &#125;, 8000); // 8 秒后基本稳定</span><br><span class="line">      &#125; catch(e)&#123;&#125;</span><br><span class="line">    &#125;)(group);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    $(&#x27;#groupTitle&#x27;).text(group);</span><br><span class="line"></span><br><span class="line">    var cards = item.children.map(function(s)&#123;</span><br><span class="line">      var seg = String(s).split(&#x27; &#x27;); if (seg.length &lt; 2) return &#x27;&#x27;;</span><br><span class="line">      var wh = seg[0].split(&#x27;.&#x27;); var iw = +wh[0]||1, ih = +wh[1]||1;</span><br><span class="line">      var file = seg[1]; var url = build(group, file); var name = file.split(&#x27;.&#x27;)[0];</span><br><span class="line"></span><br><span class="line">      return &#x27;&#x27; +</span><br><span class="line">        &#x27;&lt;div class=&quot;card&quot; style=&quot;width:&#x27;+W+&#x27;px&quot;&gt;&#x27; +</span><br><span class="line">          &#x27;&lt;div class=&quot;ImageInCard&quot; style=&quot;height:&#x27;+(W*ih/iw)+&#x27;px&quot;&gt;&#x27; +</span><br><span class="line">            &#x27;&lt;a data-fancybox=&quot;gallery&quot; href=&quot;&#x27;+url+&#x27;&quot; data-caption=&quot;&#x27;+name+&#x27;&quot; title=&quot;&#x27;+name+&#x27;&quot;&gt;&#x27; +</span><br><span class="line">              &#x27;&lt;img loading=&quot;lazy&quot; src=&quot;&#x27;+url+&#x27;&quot; width=&quot;&#x27;+W+&#x27;&quot;/&gt;&#x27; +</span><br><span class="line">            &#x27;&lt;/a&gt;&#x27; +</span><br><span class="line">          &#x27;&lt;/div&gt;&#x27; +</span><br><span class="line">        &#x27;&lt;/div&gt;&#x27;;</span><br><span class="line">    &#125;).join(&#x27;&#x27;);</span><br><span class="line"></span><br><span class="line">    $grid.html(cards);</span><br><span class="line"></span><br><span class="line">    try &#123;</span><br><span class="line">      var grid = new Minigrid(&#123; container: $grid[0], item: &#x27;.card&#x27;, gutter: 12 &#125;);</span><br><span class="line">      grid.mount();</span><br><span class="line">      var imgs = $grid.find(&#x27;img&#x27;), left = imgs.length;</span><br><span class="line">      imgs.on(&#x27;load error&#x27;, function()&#123; if(--left &lt;= 0) grid.mount(); &#125;);</span><br><span class="line">      $(window).on(&#x27;resize&#x27;, function()&#123; grid.mount(); &#125;);</span><br><span class="line">    &#125; catch(e) &#123; console.warn(&#x27;Minigrid error:&#x27;, e.message); &#125;</span><br><span class="line">  &#125;).fail(function(_,s,e)&#123;</span><br><span class="line">    $grid.html(&#x27;&lt;p style=&quot;color:#c00&quot;&gt;photos.json 加载失败&lt;/p&gt;&#x27;);</span><br><span class="line">    console.error(&#x27;[gallery-group] photos.json 加载失败：&#x27;, s, e);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">document.addEventListener(&#x27;pjax:complete&#x27;, function () &#123;</span><br><span class="line">  var g = new URLSearchParams(location.search).get(&#x27;group&#x27;);</span><br><span class="line">  if (g) (function(name)&#123;</span><br><span class="line">    var el = document.querySelector(&#x27;#page-site-info #site-title&#x27;);</span><br><span class="line">    if (el) el.textContent = name;</span><br><span class="line">    document.title = name + &#x27; - 相册&#x27;;</span><br><span class="line">  &#125;)(g);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>在 &#x2F;source&#x2F;js&#x2F; 目录下创建 gallery-index.js</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">console.log(&#x27;gallery-index.js loaded&#x27;);</span><br><span class="line"></span><br><span class="line">// 数据与图片前缀</span><br><span class="line">var IMG_DATA = &quot;/photos/photos.json&quot;;  // 请确保 source/photos/photos.json 存在并会部署</span><br><span class="line">var IMG_ROOT = &quot;https://cdn.jsdelivr.net/gh/wenjiew-astro/gallery@main/gallery/&quot;;</span><br><span class="line"></span><br><span class="line">// 从封面页渲染“可点击的封面卡片”，卡片本身就是 &lt;a href=&quot;../gallery/?group=xxx&quot;&gt;</span><br><span class="line">function enc(s)&#123; return encodeURIComponent(s) &#125;</span><br><span class="line">function build(dir, file)&#123; return IMG_ROOT + enc(dir) + &#x27;/&#x27; + enc(file) &#125;</span><br><span class="line"></span><br><span class="line">$(function()&#123;</span><br><span class="line">  var $index = $(&quot;#galleryIndex&quot;);</span><br><span class="line">  if (!$index.length) return;</span><br><span class="line"></span><br><span class="line">  $.getJSON(IMG_DATA).done(function(list)&#123;</span><br><span class="line">    if (!Array.isArray(list) || !list.length) &#123;</span><br><span class="line">      $index.html(&#x27;&lt;p style=&quot;color:#999&quot;&gt;暂无相册&lt;/p&gt;&#x27;);</span><br><span class="line">      return;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    var html = list.map(function(g)&#123;</span><br><span class="line">      var name  = g.name || &#x27;&#x27;;</span><br><span class="line">      var first = (g.children &amp;&amp; g.children[0]) ? String(g.children[0]).split(&#x27; &#x27;)[1] : null;</span><br><span class="line">      var cover = first ? build(name, first) : &#x27;https://via.placeholder.com/400x240?text=No+Image&#x27;;</span><br><span class="line">      var tilt  = &#x27;tilt-&#x27; + (1 + Math.floor(Math.random()*6));</span><br><span class="line"></span><br><span class="line">      // ★ 用相对路径 ../gallery/，从 /galleries/ 跳到 /gallery/，任何根路径都成立</span><br><span class="line">      return &#x27;&#x27; +</span><br><span class="line">        &#x27;&lt;a class=&quot;gcard &#x27;+tilt+&#x27;&quot; href=&quot;../gallery/?group=&#x27;+ enc(name) +&#x27;&quot;&gt;&#x27; +</span><br><span class="line">          &#x27;&lt;div class=&quot;gimg&quot;&gt;&lt;img src=&quot;&#x27;+cover+&#x27;&quot; alt=&quot;&#x27;+name+&#x27;&quot;&gt;&lt;/div&gt;&#x27; +</span><br><span class="line">          &#x27;&lt;div class=&quot;gmeta&quot;&gt;&lt;div class=&quot;gtitle&quot;&gt;&#x27;+name+&#x27;&lt;/div&gt;&#x27; +</span><br><span class="line">          &#x27;&lt;div class=&quot;gsub&quot;&gt;共 &#x27;+(g.children?g.children.length:0)+&#x27; 张&lt;/div&gt;&lt;/div&gt;&#x27; +</span><br><span class="line">        &#x27;&lt;/a&gt;&#x27;;</span><br><span class="line">    &#125;).join(&#x27;&#x27;);</span><br><span class="line"></span><br><span class="line">    $index.html(html);</span><br><span class="line">  &#125;).fail(function(_,s,e)&#123;</span><br><span class="line">    console.error(&#x27;[gallery-index] photos.json 加载失败：&#x27;, s, e);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>用 Butterfly 的 <code>inject</code> 注入配置文件</p><p>打开 <code>themes/butterfly/_config.yml</code>，增加（或合并到你自己的 inject）：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">   # 相册页需要的东西</span><br><span class="line">    - &#x27;&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/bootstrap/4.6.2/css/bootstrap.min.css&quot;&gt;&#x27;</span><br><span class="line">    - &#x27;&lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css&quot;&gt;&#x27;</span><br><span class="line">    - |</span><br><span class="line">      &lt;style&gt;</span><br><span class="line">        .gallery-index, .ImageGrid &#123; width: min(1200px, calc(100% - 32px)); margin: 12px auto 24px; &#125;</span><br><span class="line">        .post-block:has(#galleryIndex)&#123; background:transparent!important; box-shadow:none!important; padding:0!important; &#125;</span><br><span class="line">        .post-title:has(+ .post-content #galleryIndex),</span><br><span class="line">        .post-meta:has(+ .post-content #galleryIndex),</span><br><span class="line">        .post-content:has(#galleryIndex) &gt; *:not(#galleryIntro):not(#galleryIndex)&#123; display:none!important; &#125;</span><br><span class="line"></span><br><span class="line">        /* 引言容器样式（放大 + 增距 + 现代卡片效果） */</span><br><span class="line">        .gallery-intro &#123;</span><br><span class="line">          /* 尺寸更大 */</span><br><span class="line">          width: min(2000px, calc(100% - 1px));</span><br><span class="line">          margin: -80px auto 44px;          /* ↑ 上 28px，↓ 下 44px：与下面内容拉开距离 */</span><br><span class="line">          padding: 22px 28px;</span><br><span class="line"></span><br><span class="line">          /* 排版与可读性 */</span><br><span class="line">          text-align: center;</span><br><span class="line">          font-size: 16px;                  /* 整体字更大 */</span><br><span class="line">          line-height: 1.9;</span><br><span class="line"></span><br><span class="line">          /* 背景与毛玻璃 */</span><br><span class="line">          background: rgb(166, 169, 175);</span><br><span class="line">          backdrop-filter: blur(6px);</span><br><span class="line">          -webkit-backdrop-filter: blur(6px);</span><br><span class="line"></span><br><span class="line">          /* 形状与投影 */</span><br><span class="line">          border-radius: 16px;</span><br><span class="line">          box-shadow: 0 10px 30px rgba(0,0,0,0.18);</span><br><span class="line"></span><br><span class="line">          /* 悬停动效（轻微上浮 + 放大） */</span><br><span class="line">          transform: translateY(0) scale(1);</span><br><span class="line">          transition: transform .25s ease, box-shadow .25s ease, filter .25s ease;</span><br><span class="line">          will-change: transform;</span><br><span class="line"></span><br><span class="line">          position: relative;               /* 供 ::before 定位用 */</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        .gallery-intro:hover &#123;</span><br><span class="line">          transform: translateY(-4px) scale(1.02);</span><br><span class="line">          box-shadow: 0 16px 40px rgba(0,0,0,0.24);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /* 渐变边框（不遮住内容） */</span><br><span class="line">        .gallery-intro::before &#123;</span><br><span class="line">          content: &#x27;&#x27;;</span><br><span class="line">          position: absolute;</span><br><span class="line">          inset: 0;</span><br><span class="line">          padding: 2px;                     /* 边框粗细 */</span><br><span class="line">          border-radius: inherit;</span><br><span class="line">          background: linear-gradient(135deg, #4facfe, #00f2fe, #f093fb, #f5576c);</span><br><span class="line"></span><br><span class="line">          /* 用蒙版把中间“挖空”，只显示边框 */</span><br><span class="line">          -webkit-mask: </span><br><span class="line">            linear-gradient(#000 0 0) content-box, </span><br><span class="line">            linear-gradient(#000 0 0);</span><br><span class="line">          -webkit-mask-composite: xor;</span><br><span class="line">                  mask-composite: exclude;</span><br><span class="line"></span><br><span class="line">          pointer-events: none;</span><br><span class="line">          z-index: 0;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        .gallery-index&#123; display:grid; grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:22px; &#125;</span><br><span class="line">        .gcard&#123; width:240px; cursor:pointer; user-select:none; transform-origin:50% 80%;</span><br><span class="line">                transition:transform .25s ease, filter .25s ease; filter:drop-shadow(0 10px 20px rgba(0,0,0,.18)); text-decoration:none; &#125;</span><br><span class="line">        .gcard:hover&#123; transform:rotate(0deg) translateY(-6px) scale(1.02); filter:drop-shadow(0 14px 28px rgba(0,0,0,.22)); &#125;</span><br><span class="line">        .gimg&#123; width:100%; height:150px; border-radius:12px; overflow:hidden; background:#111; &#125;</span><br><span class="line">        .gimg img&#123; width:100%; height:100%; object-fit:cover; display:block; &#125;</span><br><span class="line">        .gmeta&#123; text-align:center; margin-top:8px; line-height:1.25; color:inherit; &#125;</span><br><span class="line">        .gtitle&#123; font-weight:700; &#125;</span><br><span class="line">        .gsub&#123; font-size:12px; opacity:.75; margin-top:4px; &#125;</span><br><span class="line">        .tilt-1&#123; transform:rotate(-4deg) &#125; .tilt-2&#123; transform:rotate(-2.5deg) &#125;</span><br><span class="line">        .tilt-3&#123; transform:rotate(-1.5deg) &#125; .tilt-4&#123; transform:rotate(1.5deg) &#125;</span><br><span class="line">        .tilt-5&#123; transform:rotate(2.5deg) &#125;  .tilt-6&#123; transform:rotate(4deg) &#125;</span><br><span class="line"></span><br><span class="line">        .card&#123; border-radius:14px; overflow:hidden; box-shadow:0 6px 18px rgba(0,0,0,.08) &#125;</span><br><span class="line">        .ImageInCard&#123; overflow:hidden; border-radius:14px &#125;</span><br><span class="line">        .card img&#123; width:100%; height:100%; object-fit:cover; display:block &#125;</span><br><span class="line">        .gallery-title&#123; width:min(1200px, calc(100% - 32px)); margin:16px auto 8px; font-weight:700; font-size:20px; &#125;</span><br><span class="line">        /* 用伪元素显示我们设置的标题；把原文字隐藏掉 */</span><br><span class="line">        #page-header .dyn-title&#123; color: transparent !important; position: relative; &#125;</span><br><span class="line">        #page-header .dyn-title::after&#123;</span><br><span class="line">          content: attr(data-group);   /* 读取元素属性 data-group 作为标题 */</span><br><span class="line">          color: inherit;</span><br><span class="line">          position: absolute;</span><br><span class="line">          left: 0; top: 0;</span><br><span class="line">        &#125;</span><br><span class="line">      &lt;/style&gt;</span><br><span class="line">    # 自定义样式</span><br><span class="line">    - &#x27;&lt;style&gt;</span><br><span class="line">        /* 让 nav 成为定位容器 */</span><br><span class="line">        #nav&#123;position:relative;&#125;</span><br><span class="line"></span><br><span class="line">        /* 方案 A：适配大多数版本的菜单容器 */</span><br><span class="line">        #nav .menus_items&#123;</span><br><span class="line">          position:absolute;</span><br><span class="line">          left:50%;</span><br><span class="line">          top:20%;</span><br><span class="line">          transform:translateX(-50%);</span><br><span class="line">          display:flex;</span><br><span class="line">          gap:.1rem;</span><br><span class="line">          white-space:nowrap;</span><br><span class="line">          /* 避免被右侧按钮挤压 */</span><br><span class="line">          max-width:calc(100% - 240px);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /* 方案 B：部分版本菜单容器是 .menus */</span><br><span class="line">        #nav .menus&#123;</span><br><span class="line">          display:flex !important;</span><br><span class="line">          justify-content:center !important;</span><br><span class="line">          width:100% !important;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /* 保留左右两侧布局（logo 左、右侧按钮在右） */</span><br><span class="line">        #nav .site-brand, #nav .brand, #nav .site-title&#123;</span><br><span class="line">          position:relative; z-index:2;</span><br><span class="line">        &#125;</span><br><span class="line">        #nav .right, #nav .right-menu&#123;</span><br><span class="line">          position:relative; z-index:2;</span><br><span class="line">          margin-left:auto;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /* 菜单项间距（可调） */</span><br><span class="line">        #nav .menus_items&gt;li, #nav .menus&gt;li&#123;</span><br><span class="line">          margin:0 .5rem;</span><br><span class="line">        &#125;</span><br><span class="line">      &lt;/style&gt;&#x27;</span><br><span class="line">  bottom:</span><br><span class="line">    # 相册页需要的东西</span><br><span class="line">    - &#x27;&lt;script src=&quot;https://cdn.staticfile.org/jquery/3.6.4/jquery.min.js&quot;&gt;&lt;/script&gt;&#x27;</span><br><span class="line">    - &#x27;&lt;script src=&quot;https://cdn.staticfile.org/bootstrap/4.6.2/js/bootstrap.bundle.min.js&quot;&gt;&lt;/script&gt;&#x27;</span><br><span class="line">    - &#x27;&lt;script src=&quot;https://gcore.jsdelivr.net/npm/minigrid@3.1.1/dist/minigrid.min.js&quot;&gt;&lt;/script&gt;&#x27;</span><br><span class="line">    - &#x27;&lt;script src=&quot;https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js&quot;&gt;&lt;/script&gt;&#x27;</span><br><span class="line">    - &#x27;&lt;script defer src=&quot;/js/gallery-index.js&quot;&gt;&lt;/script&gt;&#x27;</span><br><span class="line">    - &#x27;&lt;script defer src=&quot;/js/gallery-group.js&quot;&gt;&lt;/script&gt;&#x27;</span><br></pre></td></tr></table></figure><p>最后 <code>hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</code>，本地部署看看效果。</p><h2 id="如果你的相册中图片比较大的话我写了一个程序来处理"><a href="#如果你的相册中图片比较大的话我写了一个程序来处理" class="headerlink" title="如果你的相册中图片比较大的话我写了一个程序来处理"></a>如果你的相册中图片比较大的话我写了一个程序来处理</h2><p>新建一个compress_gallery.py</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">#!/usr/bin/env python3</span><br><span class="line"># -*- coding: utf-8 -*-</span><br><span class="line"></span><br><span class="line"># python compress_gallery.py --src .\gallery --dst .\gallery_5MB</span><br><span class="line"># python compress_gallery.py --src .\gallery --dst .\gallery_5MB --limit 5</span><br><span class="line"># python compress_gallery.py --src .\gallery --dst .\gallery_10MB --limit 10</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">import os, sys, io, shutil, argparse</span><br><span class="line">from pathlib import Path</span><br><span class="line">from PIL import Image, ImageOps</span><br><span class="line"></span><br><span class="line"># 可选支持 HEIC/HEIF</span><br><span class="line">try:</span><br><span class="line">    from pillow_heif import register_heif_opener  # type: ignore</span><br><span class="line">    register_heif_opener()</span><br><span class="line">except Exception:</span><br><span class="line">    pass</span><br><span class="line"></span><br><span class="line">IMAGE_EXTS = &#123;&quot;.jpg&quot;, &quot;.jpeg&quot;, &quot;.png&quot;, &quot;.tif&quot;, &quot;.tiff&quot;, &quot;.bmp&quot;, &quot;.webp&quot;, &quot;.heic&quot;, &quot;.heif&quot;&#125;</span><br><span class="line"></span><br><span class="line">def is_image_file(p: Path) -&gt; bool:</span><br><span class="line">    return p.suffix.lower() in IMAGE_EXTS</span><br><span class="line"></span><br><span class="line">def ensure_dir(p: Path):</span><br><span class="line">    p.parent.mkdir(parents=True, exist_ok=True)</span><br><span class="line"></span><br><span class="line">def normalize_orientation(img: Image.Image, strategy: str = &quot;auto&quot;) -&gt; tuple[Image.Image, bytes | None]:</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    返回 (像素已标准化的图像, EXIF字节或None)。写回的EXIF已将 Orientation(274)=1。</span><br><span class="line">    strategy: &quot;auto&quot; | &quot;force&quot; | &quot;strip&quot;</span><br><span class="line">    &quot;&quot;&quot;</span><br><span class="line">    try:</span><br><span class="line">        exif = img.getexif()</span><br><span class="line">    except Exception:</span><br><span class="line">        exif = None</span><br><span class="line"></span><br><span class="line">    ori = 1</span><br><span class="line">    if exif and len(exif):</span><br><span class="line">        ori = exif.get(274, 1)</span><br><span class="line"></span><br><span class="line">    if strategy == &quot;strip&quot;:</span><br><span class="line">        if exif:</span><br><span class="line">            exif[274] = 1</span><br><span class="line">            return img, exif.tobytes()</span><br><span class="line">        return img, None</span><br><span class="line"></span><br><span class="line">    if strategy == &quot;force&quot;:</span><br><span class="line">        base = ImageOps.exif_transpose(img)</span><br><span class="line">        if exif:</span><br><span class="line">            exif[274] = 1</span><br><span class="line">            return base, exif.tobytes()</span><br><span class="line">        return base, None</span><br><span class="line"></span><br><span class="line">    # strategy == &quot;auto&quot;</span><br><span class="line">    w, h = img.size</span><br><span class="line">    need_rotate = False</span><br><span class="line">    if ori in (3, 4):         # 180°</span><br><span class="line">        need_rotate = True</span><br><span class="line">    elif ori in (5, 6, 7, 8): # 90°/270°</span><br><span class="line">        need_rotate = (w &gt;= h)  # 横图才旋转；已是竖图则不旋</span><br><span class="line"></span><br><span class="line">    base = ImageOps.exif_transpose(img) if need_rotate else img</span><br><span class="line">    if exif:</span><br><span class="line">        exif[274] = 1</span><br><span class="line">        return base, exif.tobytes()</span><br><span class="line">    return base, None</span><br><span class="line"></span><br><span class="line">def save_jpeg_under_limit(img: Image.Image,</span><br><span class="line">                          limit_bytes: int,</span><br><span class="line">                          exif_bytes: bytes | None,</span><br><span class="line">                          icc: bytes | None,</span><br><span class="line">                          min_side: int = 800,</span><br><span class="line">                          quality_steps = (92, 85, 80, 72, 65, 60, 50)) -&gt; bytes:</span><br><span class="line">    &quot;&quot;&quot;逐步降质，必要时等比缩放，直到 &lt;= limit_bytes。此时 img 已完成方向归一化。&quot;&quot;&quot;</span><br><span class="line">    base = img</span><br><span class="line">    if base.mode not in (&quot;RGB&quot;, &quot;L&quot;):</span><br><span class="line">        base = base.convert(&quot;RGB&quot;)</span><br><span class="line"></span><br><span class="line">    w, h = base.size</span><br><span class="line">    scale = 1.0</span><br><span class="line">    last_data = None</span><br><span class="line"></span><br><span class="line">    while True:</span><br><span class="line">        work = base if scale == 1.0 else base.resize((max(1,int(w*scale)), max(1,int(h*scale))), Image.LANCZOS)</span><br><span class="line"></span><br><span class="line">        for q in quality_steps:</span><br><span class="line">            buf = io.BytesIO()</span><br><span class="line">            save_kwargs = dict(format=&quot;JPEG&quot;, quality=q, optimize=True, progressive=True, subsampling=&quot;4:2:0&quot;)</span><br><span class="line">            if exif_bytes: save_kwargs[&quot;exif&quot;] = exif_bytes</span><br><span class="line">            if icc:        save_kwargs[&quot;icc_profile&quot;] = icc</span><br><span class="line">            work.save(buf, **save_kwargs)</span><br><span class="line">            data = buf.getvalue()</span><br><span class="line">            last_data = data</span><br><span class="line">            if len(data) &lt;= limit_bytes:</span><br><span class="line">                return data</span><br><span class="line"></span><br><span class="line">        if min(work.size) &lt;= min_side:</span><br><span class="line">            return last_data</span><br><span class="line">        scale *= 0.85</span><br><span class="line"></span><br><span class="line">def save_webp_under_limit(img: Image.Image,</span><br><span class="line">                          limit_bytes: int,</span><br><span class="line">                          exif_bytes: bytes | None,</span><br><span class="line">                          icc: bytes | None,</span><br><span class="line">                          min_side: int = 800,</span><br><span class="line">                          quality_steps = (95, 90, 85, 80, 75, 70, 65, 60)) -&gt; bytes:</span><br><span class="line">    &quot;&quot;&quot;保存为 WebP（可带透明），逐步降质与缩放至 &lt;= limit_bytes。此时 img 已完成方向归一化。&quot;&quot;&quot;</span><br><span class="line">    base = img</span><br><span class="line">    has_alpha = (base.mode in (&quot;RGBA&quot;, &quot;LA&quot;)) or (base.mode == &quot;P&quot; and &quot;transparency&quot; in base.info)</span><br><span class="line">    if has_alpha:</span><br><span class="line">        if base.mode != &quot;RGBA&quot;:</span><br><span class="line">            base = base.convert(&quot;RGBA&quot;)</span><br><span class="line">    else:</span><br><span class="line">        if base.mode not in (&quot;RGB&quot;, &quot;L&quot;):</span><br><span class="line">            base = base.convert(&quot;RGB&quot;)</span><br><span class="line"></span><br><span class="line">    w, h = base.size</span><br><span class="line">    scale = 1.0</span><br><span class="line">    last_data = None</span><br><span class="line"></span><br><span class="line">    while True:</span><br><span class="line">        work = base if scale == 1.0 else base.resize((max(1,int(w*scale)), max(1,int(h*scale))), Image.LANCZOS)</span><br><span class="line"></span><br><span class="line">        for q in quality_steps:</span><br><span class="line">            buf = io.BytesIO()</span><br><span class="line">            save_kwargs = dict(format=&quot;WEBP&quot;, quality=q, method=6)</span><br><span class="line">            if exif_bytes: save_kwargs[&quot;exif&quot;] = exif_bytes  # 某些查看器可能忽略 WebP EXIF，但我们仍写入</span><br><span class="line">            if icc:        save_kwargs[&quot;icc_profile&quot;] = icc</span><br><span class="line">            work.save(buf, **save_kwargs)</span><br><span class="line">            data = buf.getvalue()</span><br><span class="line">            last_data = data</span><br><span class="line">            if len(data) &lt;= limit_bytes:</span><br><span class="line">                return data</span><br><span class="line"></span><br><span class="line">        if min(work.size) &lt;= min_side:</span><br><span class="line">            return last_data</span><br><span class="line">        scale *= 0.85</span><br><span class="line"></span><br><span class="line">def compress_one(input_path: Path, output_path: Path, limit_bytes: int, min_side: int = 800, orient_strategy: str = &quot;auto&quot;) -&gt; tuple[bool, str]:</span><br><span class="line">    try:</span><br><span class="line">        if input_path.stat().st_size &lt;= limit_bytes:</span><br><span class="line">            ensure_dir(output_path)</span><br><span class="line">            shutil.copy2(input_path, output_path)</span><br><span class="line">            return True, f&quot;SKIP (&lt;= limit): &#123;input_path&#125;&quot;</span><br><span class="line"></span><br><span class="line">        with Image.open(input_path) as im:</span><br><span class="line">            base, exif_bytes = normalize_orientation(im, strategy=orient_strategy)</span><br><span class="line">            icc  = im.info.get(&quot;icc_profile&quot;, None)</span><br><span class="line">            ext = input_path.suffix.lower()</span><br><span class="line"></span><br><span class="line">            if ext == &quot;.png&quot;:</span><br><span class="line">                data = save_webp_under_limit(base, limit_bytes, exif_bytes, icc, min_side=min_side)</span><br><span class="line">                out = output_path.with_suffix(&quot;.webp&quot;)</span><br><span class="line">                ensure_dir(out)</span><br><span class="line">                with open(out, &quot;wb&quot;) as f:</span><br><span class="line">                    f.write(data)</span><br><span class="line">                return True, f&quot;PNG-&gt;WebP-&gt;OK: &#123;input_path&#125; -&gt; &#123;out.name&#125;&quot;</span><br><span class="line"></span><br><span class="line">            elif ext in (&quot;.jpg&quot;, &quot;.jpeg&quot;, &quot;.webp&quot;, &quot;.tif&quot;, &quot;.tiff&quot;, &quot;.bmp&quot;, &quot;.heic&quot;, &quot;.heif&quot;):</span><br><span class="line">                data = save_jpeg_under_limit(base, limit_bytes, exif_bytes, icc, min_side=min_side)</span><br><span class="line">                out = output_path.with_suffix(&quot;.jpg&quot;)</span><br><span class="line">                ensure_dir(out)</span><br><span class="line">                with open(out, &quot;wb&quot;) as f:</span><br><span class="line">                    f.write(data)</span><br><span class="line">                return True, f&quot;&#123;ext.upper().lstrip(&#x27;.&#x27;)&#125;-&gt;JPEG-&gt;OK: &#123;input_path&#125; -&gt; &#123;out.name&#125;&quot;</span><br><span class="line"></span><br><span class="line">            else:</span><br><span class="line">                data = save_jpeg_under_limit(base, limit_bytes, exif_bytes, icc, min_side=min_side)</span><br><span class="line">                out = output_path.with_suffix(&quot;.jpg&quot;)</span><br><span class="line">                ensure_dir(out)</span><br><span class="line">                with open(out, &quot;wb&quot;) as f:</span><br><span class="line">                    f.write(data)</span><br><span class="line">                return True, f&quot;OTHER-&gt;JPEG-&gt;OK: &#123;input_path&#125; -&gt; &#123;out.name&#125;&quot;</span><br><span class="line"></span><br><span class="line">    except Exception as e:</span><br><span class="line">        return False, f&quot;FAIL: &#123;input_path&#125; (&#123;e&#125;)&quot;</span><br><span class="line"></span><br><span class="line">def walk_and_compress(src: Path, dst: Path, limit_mb: float, min_side: int, orient_strategy: str):</span><br><span class="line">    limit_bytes = int(limit_mb * 1024 * 1024)</span><br><span class="line">    total = ok = fail = 0</span><br><span class="line">    for root, _, files in os.walk(src):</span><br><span class="line">        for name in files:</span><br><span class="line">            total += 1</span><br><span class="line">            in_path = Path(root) / name</span><br><span class="line">            rel = in_path.relative_to(src)</span><br><span class="line">            out_path = (dst / rel)</span><br><span class="line"></span><br><span class="line">            if not is_image_file(in_path):</span><br><span class="line">                try:</span><br><span class="line">                    ensure_dir(out_path)</span><br><span class="line">                    shutil.copy2(in_path, out_path)</span><br><span class="line">                    ok += 1</span><br><span class="line">                    print(f&quot;COPY (non-image): &#123;in_path&#125;&quot;)</span><br><span class="line">                except Exception as e:</span><br><span class="line">                    fail += 1</span><br><span class="line">                    print(f&quot;FAIL COPY: &#123;in_path&#125; (&#123;e&#125;)&quot;)</span><br><span class="line">                continue</span><br><span class="line"></span><br><span class="line">            success, msg = compress_one(in_path, out_path, limit_bytes, min_side=min_side, orient_strategy=orient_strategy)</span><br><span class="line">            print(msg)</span><br><span class="line">            ok += int(success)</span><br><span class="line">            fail += int(not success)</span><br><span class="line"></span><br><span class="line">    print(&quot;\n=== Summary ===&quot;)</span><br><span class="line">    print(f&quot;Source: &#123;src&#125;&quot;)</span><br><span class="line">    print(f&quot;Output: &#123;dst&#125;&quot;)</span><br><span class="line">    print(f&quot;Limit : &#123;limit_mb&#125; MB&quot;)</span><br><span class="line">    print(f&quot;Total : &#123;total&#125; | OK: &#123;ok&#125; | FAIL: &#123;fail&#125;&quot;)</span><br><span class="line"></span><br><span class="line">def main():</span><br><span class="line">    ap = argparse.ArgumentParser(description=&quot;Compress images; PNG-&gt;WebP (alpha), others-&gt;JPEG. Orientation fixed.&quot;)</span><br><span class="line">    ap.add_argument(&quot;--src&quot;, type=str, required=True, help=&quot;Source folder (e.g., ./gallery)&quot;)</span><br><span class="line">    ap.add_argument(&quot;--dst&quot;, type=str, required=True, help=&quot;Output folder (e.g., ./gallery_5MB)&quot;)</span><br><span class="line">    ap.add_argument(&quot;--limit&quot;, type=float, default=5.0, help=&quot;Max size per image in MB (default: 5)&quot;)</span><br><span class="line">    ap.add_argument(&quot;--min-side&quot;, type=int, default=800, help=&quot;Do not scale below this shorter side (default: 800px)&quot;)</span><br><span class="line">    ap.add_argument(&quot;--orientation&quot;, type=str, choices=[&quot;auto&quot;,&quot;force&quot;,&quot;strip&quot;], default=&quot;auto&quot;,</span><br><span class="line">                    help=&quot;Orientation fix strategy: auto (default), force (always rotate by EXIF), strip (no rotate, set Orientation=1)&quot;)</span><br><span class="line">    args = ap.parse_args()</span><br><span class="line"></span><br><span class="line">    src = Path(args.src).resolve()</span><br><span class="line">    dst = Path(args.dst).resolve()</span><br><span class="line"></span><br><span class="line">    if not src.exists():</span><br><span class="line">        print(f&quot;Source folder not found: &#123;src&#125;&quot;)</span><br><span class="line">        sys.exit(1)</span><br><span class="line">    dst.mkdir(parents=True, exist_ok=True)</span><br><span class="line"></span><br><span class="line">    walk_and_compress(src, dst, args.limit, args.min_side, args.orientation)</span><br><span class="line"></span><br><span class="line">if __name__ == &quot;__main__&quot;:</span><br><span class="line">    main()</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>运行命令是前几行</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># python compress_gallery.py --src .\gallery --dst .\gallery_5MB</span><br><span class="line"># python compress_gallery.py --src .\gallery --dst .\gallery_5MB --limit 5</span><br><span class="line"># python compress_gallery.py --src .\gallery --dst .\gallery_10MB --limit 10</span><br></pre></td></tr></table></figure><blockquote><p>这里的 5MB&#x2F;10MB 是最后需要限制的照片大小，如果想替换原相册的话就把后面的.\gallery_5MB或者.\gallery_10MB换成源目录.\gallery</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo配置安知鱼音乐页面</title>
      <link href="/2025/09/01/hexo%E9%85%8D%E7%BD%AE%E5%AE%89%E7%9F%A5%E9%B1%BC%E9%9F%B3%E4%B9%90%E9%A1%B5%E9%9D%A2/"/>
      <url>/2025/09/01/hexo%E9%85%8D%E7%BD%AE%E5%AE%89%E7%9F%A5%E9%B1%BC%E9%9F%B3%E4%B9%90%E9%A1%B5%E9%9D%A2/</url>
      
        <content type="html"><![CDATA[<h1 id="hexo配置安知鱼音乐页面"><a href="#hexo配置安知鱼音乐页面" class="headerlink" title="hexo配置安知鱼音乐页面"></a>hexo配置安知鱼音乐页面</h1><p>用现成的 <code>hexo-anzhiyu-music</code> 适配脚本，样式、布局。</p><p><strong>1）安装脚本</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 在博客根目录执行</span><br><span class="line"></span><br><span class="line">npm i hexo-anzhiyu-music --save</span><br></pre></td></tr></table></figure><p> <strong>2）在站点配置或主题配置里加上：</strong></p><p> （任选其一：<code>_config.yml</code> 或 <code>_config.butterfly.yml</code>）</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 音乐馆</span><br><span class="line">anzhiyu_music:</span><br><span class="line">  enable: true</span><br><span class="line">  id: &quot;826250135&quot;    # 你的网易云歌单ID</span><br><span class="line">  server: netease</span><br><span class="line">  customJS:</span><br><span class="line">  customCSS:</span><br><span class="line">  front_matter: |</span><br><span class="line">    title: 音乐馆</span><br><span class="line">    type: music</span><br><span class="line">    aplayer: true</span><br><span class="line">    top_img: false</span><br><span class="line">    comments: false</span><br><span class="line">    aside: false</span><br></pre></td></tr></table></figure><p> <strong>3）用 Butterfly 的 <code>inject</code> 注入 APlayer 和 Meting2（关键）</strong></p><p>打开 <code>themes/butterfly/_config.yml</code>，增加（或合并到你自己的 inject）：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">inject:</span><br><span class="line">  head:</span><br><span class="line">    - &lt;link rel=&quot;stylesheet&quot; href=&quot;https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css&quot;&gt;</span><br><span class="line">  bottom:</span><br><span class="line">    - &lt;script src=&quot;https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">    - &lt;script src=&quot;https://npm.elemecdn.com/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><blockquote><p> 备用镜像（万一被墙&#x2F;抽风）：</p><ul><li><code>https://cdn.jsdelivr.net/npm/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js</code></li><li><code>https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js</code></li><li><code>https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css</code></li></ul></blockquote><p> <strong>4）新建页面（如果还没建）：</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo new page music</span><br></pre></td></tr></table></figure><p>把 <code>source/music/index.md</code> 写成如下这样：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line">title: 音乐馆</span><br><span class="line">type: music</span><br><span class="line">comments: false</span><br><span class="line">aside: false</span><br><span class="line">aplayer: true</span><br><span class="line">top_img: false</span><br><span class="line"># 如果你开了 pjax，强烈建议关掉，否则可能不执行初始化</span><br><span class="line">pjax: false</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line">&lt;meting-js</span><br><span class="line">  server=&quot;netease&quot;</span><br><span class="line">  type=&quot;playlist&quot;</span><br><span class="line">  id=&quot;826250135&quot;</span><br><span class="line">  fixed=&quot;false&quot;</span><br><span class="line">  autoplay=&quot;false&quot;</span><br><span class="line">  order=&quot;list&quot;</span><br><span class="line">  list-folded=&quot;false&quot;</span><br><span class="line">  lrc-type=&quot;1&quot;&gt;</span><br><span class="line">&lt;/meting-js&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p> 然后：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo s</span><br></pre></td></tr></table></figure><p><strong>5）问题：发现这样进度条有点高，可以使用下面这样的方案解决</strong></p><p>在 <code>themes/butterfly/_config.yml</code> 里，把之前我让你加的 <code>&lt;style id=&quot;music-fix&quot;&gt;...&lt;/style&gt;</code> 删除；然后在 <code>inject.head</code> 里加入这段极简样式：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">inject:</span><br><span class="line">head:</span><br><span class="line">    - &lt;style id=&quot;music-bar-lower&quot;&gt;</span><br><span class="line">        /* 仅把控制条整体往下挪一点 */</span><br><span class="line">        .aplayer .aplayer-controller&#123;</span><br><span class="line">          transform: translateY(12px);   /* 数值越大越靠下，自己调 */</span><br><span class="line">        &#125;</span><br><span class="line">        /* 防止被裁切/挡住，给信息区留一点底部空间 */</span><br><span class="line">        .aplayer .aplayer-info&#123;</span><br><span class="line">          padding-bottom: 12px;</span><br><span class="line">        &#125;</span><br><span class="line">      &lt;/style&gt;</span><br></pre></td></tr></table></figure><p>想再低一点，就把 <code>12px</code> 调成 <code>16px / 20px</code> 试试；不影响歌词样式，也不会改进度条的粗细。</p><blockquote><p><strong>但是还有一个遗留问题，歌词滚动不正常，暂时没有更好的解决方案，就先这样吧，之后有时间再解决一下！！</strong></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>LaTeX 如何用 .bib 插入参考文献：从入门到入土（含完整示例）</title>
      <link href="/2025/08/31/LaTeX%20%E5%A6%82%E4%BD%95%E7%94%A8%20.bib%20%E6%8F%92%E5%85%A5%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE%EF%BC%9A%E4%BB%8E%200%20%E5%88%B0%E5%8F%91%E5%B8%83%EF%BC%88%E5%90%AB%E5%AE%8C%E6%95%B4%E7%A4%BA%E4%BE%8B%EF%BC%89/"/>
      <url>/2025/08/31/LaTeX%20%E5%A6%82%E4%BD%95%E7%94%A8%20.bib%20%E6%8F%92%E5%85%A5%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE%EF%BC%9A%E4%BB%8E%200%20%E5%88%B0%E5%8F%91%E5%B8%83%EF%BC%88%E5%90%AB%E5%AE%8C%E6%95%B4%E7%A4%BA%E4%BE%8B%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h1 id="LaTeX-如何用-bib-插入参考文献：从入门到入土（含完整示例）"><a href="#LaTeX-如何用-bib-插入参考文献：从入门到入土（含完整示例）" class="headerlink" title="LaTeX 如何用 .bib 插入参考文献：从入门到入土（含完整示例）"></a>LaTeX 如何用 .bib 插入参考文献：从入门到入土（含完整示例）</h1><h2 id="1-基本概念速览"><a href="#1-基本概念速览" class="headerlink" title="1. 基本概念速览"></a>1. 基本概念速览</h2><ul><li><strong><code>.bib</code> 文件</strong>：参考文献数据库（纯文本），由一条条 <code>@article&#123;...&#125;</code>、<code>@book&#123;...&#125;</code> 等构成。</li><li><strong>引用命令</strong>：在正文中用 <code>\cite&#123;键&#125;</code>、<code>\citep&#123;键&#125;</code>、<code>\citet&#123;键&#125;</code> 等调用。</li><li><strong>样式</strong>：决定文末参考文献列表的格式（作者名、期刊名、年份等的排版）。</li><li><strong>编译链</strong>：<ul><li>BibTeX 路线：<code>pdflatex → bibtex → pdflatex → pdflatex</code></li><li>biblatex 路线：<code>pdflatex → biber → pdflatex → pdflatex</code></li></ul></li></ul><hr><h2 id="2-路线-A：BibTeX（经典稳定，投稿友好）"><a href="#2-路线-A：BibTeX（经典稳定，投稿友好）" class="headerlink" title="2. 路线 A：BibTeX（经典稳定，投稿友好）"></a>2. 路线 A：BibTeX（经典稳定，投稿友好）</h2><h3 id="2-1-目录与文件结构"><a href="#2-1-目录与文件结构" class="headerlink" title="2.1 目录与文件结构"></a>2.1 目录与文件结构</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">project/</span><br><span class="line">├─ main.tex        % 主文档</span><br><span class="line">├─ refs.bib        % 你的文献库</span><br><span class="line">└─ aasjournal.bst  %（示例）期刊样式文件；也可用 natbib + plainnat 等</span><br></pre></td></tr></table></figure><blockquote><p>注：很多期刊会提供 <code>.bst</code>（样式）与 <code>.cls</code>（文档类），放在同目录或 TEX 路径可见处即可。</p></blockquote><h3 id="2-2-bib-文件示例（refs-bib）"><a href="#2-2-bib-文件示例（refs-bib）" class="headerlink" title="2.2 .bib 文件示例（refs.bib）"></a>2.2 <code>.bib</code> 文件示例（refs.bib）</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@article&#123;Willott1999,</span><br><span class="line">  author       = &#123;Willott, C. J. and others&#125;,</span><br><span class="line">  title        = &#123;The radio luminosity function...&#125;,</span><br><span class="line">  journal      = &#123;MNRAS&#125;,</span><br><span class="line">  year         = &#123;1999&#125;,</span><br><span class="line">  volume       = &#123;309&#125;,</span><br><span class="line">  pages        = &#123;1017--1033&#125;,</span><br><span class="line">  doi          = &#123;10.1046/j.1365-8711.1999.02900.x&#125;,</span><br><span class="line">  url          = &#123;https://doi.org/10.1046/j.1365-8711.1999.02900.x&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@book&#123;Lamport1994,</span><br><span class="line">  author       = &#123;Lamport, Leslie&#125;,</span><br><span class="line">  title        = &#123;LaTeX: A Document Preparation System&#125;,</span><br><span class="line">  publisher    = &#123;Addison-Wesley&#125;,</span><br><span class="line">  year         = &#123;1994&#125;,</span><br><span class="line">  edition      = &#123;2&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>技巧：从 Google Scholar、ADS、Zotero、Mendeley 可直接导出 BibTeX。导入时注意清理字段（如多余的 html 标记）。</p></blockquote><h3 id="2-3-natbib-BibTeX-最小示例（main-tex）"><a href="#2-3-natbib-BibTeX-最小示例（main-tex）" class="headerlink" title="2.3 natbib + BibTeX 最小示例（main.tex）"></a>2.3 <code>natbib</code> + BibTeX 最小示例（main.tex）</h3><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\documentclass</span>[11pt]&#123;article&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>[utf8]&#123;inputenc&#125; <span class="comment">% 现代发行版可省略</span></span><br><span class="line"><span class="keyword">\usepackage</span>[T1]&#123;fontenc&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;lmodern&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;natbib&#125;</span><br><span class="line"><span class="keyword">\bibliographystyle</span>&#123;plainnat&#125; <span class="comment">% 也可换成期刊给的 .bst，如 aasjournal</span></span><br><span class="line"><span class="keyword">\usepackage</span>[colorlinks=true,linkcolor=blue,citecolor=blue]&#123;hyperref&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\title</span>&#123;BibTeX 入门示例&#125;</span><br><span class="line"><span class="keyword">\author</span>&#123;Your Name&#125;</span><br><span class="line"><span class="keyword">\date</span>&#123;<span class="keyword">\today</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\begin</span>&#123;document&#125;</span><br><span class="line"><span class="keyword">\maketitle</span></span><br><span class="line"></span><br><span class="line">正文中可以这样引用：<span class="keyword">\citet</span>&#123;Willott1999&#125; 指出……；</span><br><span class="line">或括号引用：星系射电功率与环境有关（<span class="keyword">\citealp</span>&#123;Willott1999&#125;）。</span><br><span class="line">再引一本书 <span class="keyword">\citep</span>&#123;Lamport1994&#125;。</span><br><span class="line"></span><br><span class="line"><span class="comment">% 生成参考文献列表</span></span><br><span class="line"><span class="keyword">\bibliography</span>&#123;refs&#125; <span class="comment">% 对应 refs.bib</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">\end</span>&#123;document&#125;</span><br></pre></td></tr></table></figure><h3 id="2-4-常用-natbib-引用命令"><a href="#2-4-常用-natbib-引用命令" class="headerlink" title="2.4 常用 natbib 引用命令"></a>2.4 常用 <code>natbib</code> 引用命令</h3><ul><li><code>\citet&#123;键&#125;</code>：作者名在句中（Author (Year)）</li><li><code>\citep&#123;键&#125;</code>：括号引用（(Author, Year)）</li><li><code>\citealp&#123;键&#125;</code>：无括号外壳的引用（Author, Year）</li><li><code>\citeyear&#123;键&#125;</code>：只年份</li><li><code>\citeauthor&#123;键&#125;</code>：只作者</li></ul><blockquote><p>选择不同的 <code>\bibliographystyle&#123;...&#125;</code>（如 <code>plainnat</code>、<code>unsrtnat</code>、<code>apalike</code>、期刊 <code>.bst</code>）会改变最终格式。</p></blockquote><h3 id="2-5-编译步骤（本地-TeX-Live-MiKTeX）"><a href="#2-5-编译步骤（本地-TeX-Live-MiKTeX）" class="headerlink" title="2.5 编译步骤（本地 TeX Live&#x2F;MiKTeX）"></a>2.5 编译步骤（本地 TeX Live&#x2F;MiKTeX）</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pdflatex main</span><br><span class="line">bibtex main</span><br><span class="line">pdflatex main</span><br><span class="line">pdflatex main</span><br></pre></td></tr></table></figure><blockquote><p>Overleaf：菜单选择 <strong>Compiler</strong> 为 pdfLaTeX，点击 Recompile；首次需要让 Overleaf 触发 <code>bibtex</code>，一般自动完成。</p></blockquote><hr><h2 id="3-路线-B：biblatex-biber（功能强、中文友好、Web-字段丰富）"><a href="#3-路线-B：biblatex-biber（功能强、中文友好、Web-字段丰富）" class="headerlink" title="3. 路线 B：biblatex + biber（功能强、中文友好、Web 字段丰富）"></a>3. 路线 B：biblatex + biber（功能强、中文友好、Web 字段丰富）</h2><h3 id="3-1-bib-文件可与上文相同（refs-bib）"><a href="#3-1-bib-文件可与上文相同（refs-bib）" class="headerlink" title="3.1 .bib 文件可与上文相同（refs.bib）"></a>3.1 <code>.bib</code> 文件可与上文相同（refs.bib）</h3><h3 id="3-2-最小示例（main-tex）"><a href="#3-2-最小示例（main-tex）" class="headerlink" title="3.2 最小示例（main.tex）"></a>3.2 最小示例（main.tex）</h3><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\documentclass</span>[11pt]&#123;article&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>[utf8]&#123;inputenc&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>[T1]&#123;fontenc&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;lmodern&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 关键：加载 biblatex，后端用 biber</span></span><br><span class="line"><span class="keyword">\usepackage</span>[backend=biber,style=authoryear,sorting=nyt,maxbibnames=99]&#123;biblatex&#125;</span><br><span class="line"><span class="keyword">\addbibresource</span>&#123;refs.bib&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\usepackage</span>[colorlinks=true,linkcolor=blue,citecolor=blue]&#123;hyperref&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\title</span>&#123;biblatex + biber 入门示例&#125;</span><br><span class="line"><span class="keyword">\author</span>&#123;Your Name&#125;</span><br><span class="line"><span class="keyword">\date</span>&#123;<span class="keyword">\today</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">\begin</span>&#123;document&#125;</span><br><span class="line"><span class="keyword">\maketitle</span></span><br><span class="line"></span><br><span class="line">句中引用：<span class="keyword">\textcite</span>&#123;Willott1999&#125;；括号引用：<span class="keyword">\parencite</span>&#123;Lamport1994&#125;。</span><br><span class="line">也可以一次引用多篇 <span class="keyword">\parencite</span>&#123;Willott1999,Lamport1994&#125;。</span><br><span class="line"></span><br><span class="line"><span class="comment">% 生成参考文献列表</span></span><br><span class="line"><span class="keyword">\printbibliography</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">\end</span>&#123;document&#125;</span><br></pre></td></tr></table></figure><h3 id="3-3-常用-biblatex-引用命令"><a href="#3-3-常用-biblatex-引用命令" class="headerlink" title="3.3 常用 biblatex 引用命令"></a>3.3 常用 <code>biblatex</code> 引用命令</h3><ul><li><code>\parencite&#123;键&#125;</code>：括号引用</li><li><code>\textcite&#123;键&#125;</code>：作者名融入正文</li><li><code>\footcite&#123;键&#125;</code>：脚注引用</li><li><code>\citeauthor&#123;键&#125;</code>、<code>\citeyear&#123;键&#125;</code> 同理可用</li></ul><h3 id="3-4-编译步骤"><a href="#3-4-编译步骤" class="headerlink" title="3.4 编译步骤"></a>3.4 编译步骤</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pdflatex main</span><br><span class="line">biber main</span><br><span class="line">pdflatex main</span><br><span class="line">pdflatex main</span><br></pre></td></tr></table></figure><blockquote><p>Overleaf：菜单设置 <strong>Biber</strong> 为后端（Project → Settings → Compiler：pdfLaTeX；Biber enabled）。首次编译后 Overleaf 会自动运行 biber。</p></blockquote><hr><h2 id="4-选择哪条路线？"><a href="#4-选择哪条路线？" class="headerlink" title="4. 选择哪条路线？"></a>4. 选择哪条路线？</h2><ul><li><strong>投稿&#x2F;跟随期刊模版</strong>：通常用 <strong>BibTeX</strong> + 期刊 <code>.bst</code>；很多天文、物理期刊（AAS、MNRAS、A&amp;A）传统上就是这个。</li><li><strong>个人论文&#x2F;讲义&#x2F;中文环境更友好</strong>：推荐 <strong>biblatex + biber</strong>（可玩性强，字段更全，分组&#x2F;过滤更灵活）。</li><li><strong>已有大量老项目</strong>：继续用 BibTeX 也很好，稳定可靠。</li></ul><hr><h2 id="5-处理中文与编码"><a href="#5-处理中文与编码" class="headerlink" title="5. 处理中文与编码"></a>5. 处理中文与编码</h2><ul><li>现代 TeX Live 下，建议用 <code>xelatex</code> 或 <code>lualatex</code> 编译，并配合 <code>biblatex + biber</code>：</li></ul><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\documentclass</span>&#123;article&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;fontspec&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>[backend=biber,style=authoryear]&#123;biblatex&#125;</span><br><span class="line"><span class="keyword">\addbibresource</span>&#123;refs.bib&#125;</span><br><span class="line"><span class="keyword">\setmainfont</span>&#123;Times New Roman&#125; <span class="comment">% 或任意系统字体</span></span><br><span class="line"><span class="keyword">\begin</span>&#123;document&#125;</span><br><span class="line">中文测试：<span class="keyword">\textcite</span>&#123;Lamport1994&#125;。</span><br><span class="line"><span class="keyword">\printbibliography</span></span><br><span class="line"><span class="keyword">\end</span>&#123;document&#125;</span><br></pre></td></tr></table></figure><ul><li>BibTeX 处理中文较麻烦，需要 <code>gbt7714</code> 等样式或将中文转拼音排序；若需国标格式，可用 <code>\usepackage[backend=biber,style=gb7714-2015]&#123;biblatex&#125;</code>（需安装 <code>biblatex-gb7714-2015</code> 套件）。</li></ul><hr><h2 id="6-常见条目类型与字段（速查）"><a href="#6-常见条目类型与字段（速查）" class="headerlink" title="6. 常见条目类型与字段（速查）"></a>6. 常见条目类型与字段（速查）</h2><ul><li><code>@article</code>：<code>author</code>, <code>title</code>, <code>journal</code>, <code>year</code>, <code>volume</code>, <code>number</code>, <code>pages</code>, <code>doi</code>, <code>url</code></li><li><code>@book</code>：<code>author/editor</code>, <code>title</code>, <code>publisher</code>, <code>year</code>, <code>edition</code></li><li><code>@inproceedings</code>：<code>author</code>, <code>title</code>, <code>booktitle</code>, <code>year</code>, <code>pages</code></li><li><code>@misc</code>：万金油；可放 <code>howpublished</code>, <code>note</code>, <code>url</code>, <code>doi</code>, <code>eprint</code>（arXiv）</li><li><code>@phdthesis</code> &#x2F; <code>@mastersthesis</code>：<code>author</code>, <code>title</code>, <code>school</code>, <code>year</code></li></ul><blockquote><p><strong>arXiv</strong>：可用 <code>eprint=&#123;arXiv:XXXX.XXXXX&#125;</code>, <code>archivePrefix=&#123;arXiv&#125;</code>, <code>primaryClass=&#123;astro-ph.GA&#125;</code> 等字段（biblatex 对 eprint 支持更好）。</p></blockquote><hr><h2 id="7-批量管理文献的实用建议"><a href="#7-批量管理文献的实用建议" class="headerlink" title="7. 批量管理文献的实用建议"></a>7. 批量管理文献的实用建议</h2><ul><li><strong>Zotero &#x2F; Mendeley</strong> 管库 → 导出 <code>.bib</code> 到项目目录。</li><li>给文献<strong>稳定的 citation key</strong>（如 <code>AuthorYearTitleKey</code>），避免与同名同年冲突（必要时加 <code>a,b,c</code>）。</li><li>定期清理 <code>.bib</code>：去掉无用字段（<code>abstract</code>、<code>file</code>、<code>urldate</code> 等，按需）。</li></ul><hr><h2 id="8-常见报错与排查"><a href="#8-常见报错与排查" class="headerlink" title="8. 常见报错与排查"></a>8. 常见报错与排查</h2><ol><li><strong>“Citation <code>xxx</code> undefined”</strong><ul><li>键不存在&#x2F;拼写错误；或忘记在 <code>.tex</code> 中 <code>\bibliography&#123;refs&#125;</code> &#x2F; <code>\addbibresource&#123;refs.bib&#125;</code>。</li><li>没有按正确顺序多次编译（见第 2.5&#x2F;3.4 步骤）。</li></ul></li><li><strong>参考文献不显示&#x2F;老版本</strong><ul><li>忘了运行 <code>bibtex</code>&#x2F;<code>biber</code>；或 <code>.aux/.bbl/.bcf</code> 等中间文件残留导致。</li><li>解决：删中间文件重新编译，或按顺序完整跑一遍。</li></ul></li><li><strong><code>biber</code> not found &#x2F; biblatex 报错</strong><ul><li>本地没装 <code>biber</code> 或 PATH 未配置；Overleaf 需在设置里启用 biber。</li></ul></li><li><strong>中文乱码&#x2F;问号</strong><ul><li>用 <code>xelatex</code>&#x2F;<code>lualatex</code> + <code>biblatex + biber</code>；或检查 <code>.bib</code> 的 UTF-8 编码。</li></ul></li><li><strong>样式不合期刊要求</strong><ul><li>使用期刊提供的 <code>.bst</code>（BibTeX）或官方文档推荐的 <code>biblatex</code> 样式。</li><li>某些期刊仅接受 BibTeX 格式的 <code>.bbl</code>，按其要求生成即可。</li></ul></li></ol><hr><h2 id="9-进阶：同一文献多次引用、附加页码、前后缀"><a href="#9-进阶：同一文献多次引用、附加页码、前后缀" class="headerlink" title="9. 进阶：同一文献多次引用、附加页码、前后缀"></a>9. 进阶：同一文献多次引用、附加页码、前后缀</h2><ul><li><strong>natbib</strong>：<ul><li><code>\citep[见][p.~12]&#123;Willott1999&#125;</code> → (见 Willott et al., 1999, p. 12)</li><li><code>\citep[例如][]&#123;Willott1999&#125;</code>、<code>\citet[第2节]&#123;Willott1999&#125;</code></li></ul></li><li><strong>biblatex</strong>：<ul><li><code>\parencite[见][12]&#123;Willott1999&#125;</code></li><li><code>\parencite[例如][]&#123;Willott1999&#125;</code></li><li><code>\textcite[§2]&#123;Willott1999&#125;</code></li></ul></li></ul><hr><h2 id="10-在博客中展示"><a href="#10-在博客中展示" class="headerlink" title="10. 在博客中展示"></a>10. 在博客中展示</h2><ul><li>用 Markdown 代码块粘贴 <code>.tex</code>、<code>.bib</code> 示例（与本文相同做法）。</li><li>若博客支持渲染公式（KaTeX&#x2F;MathJax），依然建议给出 <strong>可复制的源码</strong>，方便读者本地测试。</li><li>可附一张编译流程图或命令行片段（见上文编译命令）。</li></ul><hr><h2 id="11-完整可运行示例（两套各给一份）"><a href="#11-完整可运行示例（两套各给一份）" class="headerlink" title="11. 完整可运行示例（两套各给一份）"></a>11. 完整可运行示例（两套各给一份）</h2><h3 id="11-1-BibTeX-natbib-版"><a href="#11-1-BibTeX-natbib-版" class="headerlink" title="11.1 BibTeX + natbib 版"></a>11.1 BibTeX + natbib 版</h3><p><strong>main.tex</strong></p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\documentclass</span>[11pt]&#123;article&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>[T1]&#123;fontenc&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;lmodern&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;natbib&#125;</span><br><span class="line"><span class="keyword">\bibliographystyle</span>&#123;plainnat&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>[colorlinks=true,linkcolor=blue,citecolor=blue]&#123;hyperref&#125;</span><br><span class="line"><span class="keyword">\title</span>&#123;BibTeX + natbib 示例&#125;</span><br><span class="line"><span class="keyword">\author</span>&#123;Your Name&#125;</span><br><span class="line"><span class="keyword">\date</span>&#123;<span class="keyword">\today</span>&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;document&#125;</span><br><span class="line"><span class="keyword">\maketitle</span></span><br><span class="line"></span><br><span class="line">如 <span class="keyword">\citet</span>&#123;Willott1999&#125; 所示，相关关系……（<span class="keyword">\citealp</span>&#123;Lamport1994&#125;）。</span><br><span class="line">多条同时引用：<span class="keyword">\citep</span>&#123;Willott1999,Lamport1994&#125;。</span><br><span class="line"></span><br><span class="line"><span class="keyword">\bibliography</span>&#123;refs&#125;</span><br><span class="line"><span class="keyword">\end</span>&#123;document&#125;</span><br></pre></td></tr></table></figure><p><strong>refs.bib</strong></p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@article&#123;Willott1999,</span><br><span class="line">  author  = &#123;Willott, C. J. and Rawlings, S. and Blundell, K. M. and Lacy, M.&#125;,</span><br><span class="line">  title   = &#123;The emission line-radio correlation...&#125;,</span><br><span class="line">  journal = &#123;MNRAS&#125;,</span><br><span class="line">  year    = &#123;1999&#125;,</span><br><span class="line">  volume  = &#123;309&#125;,</span><br><span class="line">  pages   = &#123;1017--1033&#125;,</span><br><span class="line">  doi     = &#123;10.1046/j.1365-8711.1999.02900.x&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@book&#123;Lamport1994,</span><br><span class="line">  author    = &#123;Lamport, Leslie&#125;,</span><br><span class="line">  title     = &#123;LaTeX: A Document Preparation System&#125;,</span><br><span class="line">  publisher = &#123;Addison-Wesley&#125;,</span><br><span class="line">  year      = &#123;1994&#125;,</span><br><span class="line">  edition   = &#123;2&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>编译</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pdflatex main</span><br><span class="line">bibtex main</span><br><span class="line">pdflatex main</span><br><span class="line">pdflatex main</span><br></pre></td></tr></table></figure><hr><h3 id="11-2-biblatex-biber-版"><a href="#11-2-biblatex-biber-版" class="headerlink" title="11.2 biblatex + biber 版"></a>11.2 biblatex + biber 版</h3><p><strong>main.tex</strong></p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\documentclass</span>[11pt]&#123;article&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>&#123;fontspec&#125; <span class="comment">% 若仅英文可不用</span></span><br><span class="line"><span class="keyword">\usepackage</span>[backend=biber,style=authoryear,sorting=nyt]&#123;biblatex&#125;</span><br><span class="line"><span class="keyword">\addbibresource</span>&#123;refs.bib&#125;</span><br><span class="line"><span class="keyword">\usepackage</span>[colorlinks=true,linkcolor=blue,citecolor=blue]&#123;hyperref&#125;</span><br><span class="line"><span class="keyword">\title</span>&#123;biblatex + biber 示例&#125;</span><br><span class="line"><span class="keyword">\author</span>&#123;Your Name&#125;</span><br><span class="line"><span class="keyword">\date</span>&#123;<span class="keyword">\today</span>&#125;</span><br><span class="line"><span class="keyword">\begin</span>&#123;document&#125;</span><br><span class="line"><span class="keyword">\maketitle</span></span><br><span class="line"></span><br><span class="line">句中：<span class="keyword">\textcite</span>&#123;Willott1999&#125;；括号：<span class="keyword">\parencite</span>&#123;Lamport1994&#125;；</span><br><span class="line">多条：<span class="keyword">\parencite</span>&#123;Willott1999,Lamport1994&#125;。</span><br><span class="line">带页码：<span class="keyword">\parencite</span>[12]&#123;Lamport1994&#125;。</span><br><span class="line"></span><br><span class="line"><span class="keyword">\printbibliography</span></span><br><span class="line"><span class="keyword">\end</span>&#123;document&#125;</span><br></pre></td></tr></table></figure><p><strong>refs.bib</strong>（同上）</p><p><strong>编译</strong></p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">pdflatex main</span><br><span class="line">biber main</span><br><span class="line">pdflatex main</span><br><span class="line">pdflatex main</span><br></pre></td></tr></table></figure><hr><h2 id="12-FAQ-快速解惑"><a href="#12-FAQ-快速解惑" class="headerlink" title="12. FAQ 快速解惑"></a>12. FAQ 快速解惑</h2><ul><li><p><strong>Q：期刊要求提供 <code>.bbl</code>，怎么弄？</strong><br>A：走 BibTeX 流程，编译后生成的 <code>main.bbl</code> 即可提交。biblatex 路线有时不被传统流程接受。</p></li><li><p><strong>Q：同一作者同一年多篇 <code>[2019a, 2019b]</code> 如何自动添加 a&#x2F;b？</strong><br>A：<code>natbib</code> 与 <code>biblatex</code> 都会自动区分；关键在于条目的 <code>year</code> 与作者相同，系统会追加字母。</p></li><li><p><strong>Q：如何显示 DOI&#x2F;URL？</strong><br>A：<code>biblatex</code> 默认更友好；BibTeX 需样式支持（如 <code>plainurl</code>、<code>apalike</code> 的改款、或期刊 <code>.bst</code>）。<br>在 <code>biblatex</code> 下，可 <code>\usepackage[doi=true,url=true]&#123;biblatex&#125;</code>（或样式本身已开启）。</p></li><li><p><strong>Q：我需要 GB&#x2F;T 7714 国标格式？</strong><br>A：推荐 <code>biblatex-gb7714-2015</code>：</p><figure class="highlight latex"><table><tr><td class="code"><pre><span class="line"><span class="keyword">\usepackage</span>[backend=biber,style=gb7714-2015]&#123;biblatex&#125;</span><br></pre></td></tr></table></figure></li></ul><hr><h2 id="13-一键排错清单（贴墙用）"><a href="#13-一键排错清单（贴墙用）" class="headerlink" title="13. 一键排错清单（贴墙用）"></a>13. 一键排错清单（贴墙用）</h2><ol><li>检查 <strong>citation key</strong> 是否一致（<code>\cite&#123;键&#125;</code> 与 <code>.bib</code> 中的 <code>@...&#123;键, ...&#125;</code>）。</li><li>跑对 <strong>编译顺序</strong>（BibTeX vs biber）。</li><li>删中间文件（<code>.aux .bbl .bcf .blg .run.xml</code> 等）后重编。</li><li>确认 Overleaf&#x2F;本地 <strong>后端设置</strong>（biber 是否开启）。</li><li>确认 <strong>编码</strong> 为 UTF-8；中文建议用 <code>xelatex</code> + <code>biblatex</code>。</li></ol>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Latex </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Latex </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Vercel 托管 Github page</title>
      <link href="/2025/08/28/Vercel%20%E6%89%98%E7%AE%A1%20Github%20page/"/>
      <url>/2025/08/28/Vercel%20%E6%89%98%E7%AE%A1%20Github%20page/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Vercel 是一个为开发者提供工具、工作流和基础设施的平台，可以让你更快地构建和部署你的 Web 应用，而无需额外的配置。</p></blockquote><p>vercel官网：<a href="https://link.juejin.cn/?target=https://vercel.com/">vercel.com&#x2F;</a>，可以直接使用github账号登录。</p><h1 id="Vercel-托管-Github-page"><a href="#Vercel-托管-Github-page" class="headerlink" title="Vercel 托管 Github page"></a>Vercel 托管 Github page</h1><h2 id="Vercel-直接托管“纯静态仓库”（不构建，最省事）"><a href="#Vercel-直接托管“纯静态仓库”（不构建，最省事）" class="headerlink" title="Vercel 直接托管“纯静态仓库”（不构建，最省事）"></a>Vercel 直接托管“纯静态仓库”（不构建，最省事）</h2><p>你的GitHub仓库里只有已经生成好的静态文件，就让 Vercel  <strong>不执行构建</strong> ，只把指定目录当站点根。</p><ol><li>在 Vercel → <strong>Add New → Project → Import Git Repository</strong> 选你的仓库。</li><li>在 “Configure Project” 里：<ul><li><strong>Framework Preset</strong> ：<code>Other</code></li><li><strong>Install Command</strong> ：留空</li><li><strong>Build Command</strong> ：留空（很关键，表示不构建）</li><li><strong>Output Directory</strong> ：</li><li>如果  <strong>静态文件在仓库根</strong> （<code>index.html</code> 在根）：填 <code>.</code></li><li>如果  <strong>静态文件在仓库的 <code>public/</code> 子目录</strong> ：填 <code>public</code></li></ul></li><li>点 <strong>Deploy</strong> 就完成了。以后你只要继续往这个仓库推送静态文件，Vercel 会自动发布。</li></ol><blockquote><p>你现在 GitHub Pages 是个人主页（根路径 <code>/</code>），如果你的仓库根就是这些文件，<strong>Output 直接填 <code>.</code></strong> 就行。</p></blockquote><h2 id="GitHub-Actions：检测到你推“静态仓库”就自动发-Vercel"><a href="#GitHub-Actions：检测到你推“静态仓库”就自动发-Vercel" class="headerlink" title="GitHub Actions：检测到你推“静态仓库”就自动发 Vercel"></a>GitHub Actions：检测到你推“静态仓库”就自动发 Vercel</h2><p>如果你仍把<strong>静态文件推到 GitHub</strong>，可以加个极简工作流，让它自动把仓库内容部署到 Vercel（不构建）。</p><p>在仓库中新增 <code>.github/workflows/deploy-vercel.yml</code>：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">name: Deploy static to Vercel (no build)</span><br><span class="line"></span><br><span class="line">on:</span><br><span class="line">  push:</span><br><span class="line">    branches: [ main ]</span><br><span class="line">  workflow_dispatch:</span><br><span class="line"></span><br><span class="line">jobs:</span><br><span class="line">  deploy:</span><br><span class="line">    runs-on: ubuntu-latest</span><br><span class="line">    steps:</span><br><span class="line">      - uses: actions/checkout@v4</span><br><span class="line"></span><br><span class="line">      - name: Install Vercel CLI</span><br><span class="line">        run: npm i -g vercel@latest</span><br><span class="line"></span><br><span class="line">      - name: Pull Vercel project settings</span><br><span class="line">        run: vercel pull --yes --environment=production --token $&#123;&#123; secrets.VERCEL_TOKEN &#125;&#125;</span><br><span class="line">        env:</span><br><span class="line">          VERCEL_ORG_ID: $&#123;&#123; secrets.VERCEL_ORG_ID &#125;&#125;</span><br><span class="line">          VERCEL_PROJECT_ID: $&#123;&#123; secrets.VERCEL_PROJECT_ID &#125;&#125;</span><br><span class="line"></span><br><span class="line">      # 如果你的静态文件在仓库根，改成 &quot;vercel deploy .&quot;</span><br><span class="line">      - name: Deploy current repo as static site</span><br><span class="line">        run: vercel deploy public --prod --yes --token $&#123;&#123; secrets.VERCEL_TOKEN &#125;&#125;</span><br><span class="line">        env:</span><br><span class="line">          VERCEL_ORG_ID: $&#123;&#123; secrets.VERCEL_ORG_ID &#125;&#125;</span><br><span class="line">          VERCEL_PROJECT_ID: $&#123;&#123; secrets.VERCEL_PROJECT_ID &#125;&#125;</span><br></pre></td></tr></table></figure><p>在 GitHub → Settings → Secrets and variables → Actions 新增 3 个机密：</p><ul><li><code>VERCEL_TOKEN</code>（Vercel 账户里创建的 access token）</li><li><code>VERCEL_ORG_ID</code>、<code>VERCEL_PROJECT_ID</code>（在对应项目的 Settings 里能看到）</li></ul><blockquote><p>如果你的仓库根就是静态站点，把 <code>vercel deploy public</code> 改为 <code>vercel deploy .</code>。</p></blockquote><hr><h2 id="小贴士"><a href="#小贴士" class="headerlink" title="小贴士"></a>小贴士</h2><ul><li><p><strong>同时保留 GitHub Pages</strong>：完全没冲突。Vercel 会有 <code>xxx.vercel.app</code> 域名；你可以在导航里放“镜像”链接。</p></li><li><p><strong>缓存优化（可选）</strong>：根目录放一个 <code>vercel.json</code> 给静态资源长缓存（HTML 不缓存），提升访问体验：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123; &quot;version&quot;: 2, &quot;cleanUrls&quot;: true,</span><br><span class="line">  &quot;headers&quot;: [</span><br><span class="line">    &#123; &quot;source&quot;: &quot;/(.*)\\.(js|css|png|jpg|jpeg|webp|svg|gif)&quot;,</span><br><span class="line">      &quot;headers&quot;: [&#123; &quot;key&quot;: &quot;Cache-Control&quot;, &quot;value&quot;: &quot;public, max-age=31536000, immutable&quot;&#125;] &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li></ul><blockquote><p>如果找不到<strong>VERCEL_ORG_ID</strong>，请看下面的方案</p></blockquote><h3 id="在-Vercel-面板里找到-ORG（账号-团队）ID"><a href="#在-Vercel-面板里找到-ORG（账号-团队）ID" class="headerlink" title="在 Vercel 面板里找到 ORG（账号&#x2F;团队）ID"></a>在 Vercel 面板里找到 ORG（账号&#x2F;团队）ID</h3><p><strong>如果是个人账号：</strong></p><ol><li>右上角头像 → <strong>Account Settings</strong>（账户设置）。</li><li><strong>General &#x2F; Account</strong> 页面里能看到 <strong>User ID</strong>（有时也显示为 Team&#x2F;Org ID），形如 <code>team_xxxxx</code> 或 <code>user_xxxxx</code>。这就是 <code>VERCEL_ORG_ID</code>。</li></ol><p><strong>如果是在团队下：</strong></p><ol><li>左上角团队切换（或头像菜单）进入 <strong>Team Settings</strong>。</li><li><strong>General</strong> 页面里能看到 <strong>Team ID</strong>（形如 <code>team_xxxxx</code>）。它就是 <code>VERCEL_ORG_ID</code>。</li></ol><p>把这个 ID 连同你已有的 <code>VERCEL_PROJECT_ID</code> 和 <code>VERCEL_TOKEN</code> 一起放进 GitHub 仓库的 <strong>Settings → Secrets and variables → Actions</strong> 即可。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github主页 </tag>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Github美化过程记录</title>
      <link href="/2025/08/22/Github%E7%BE%8E%E5%8C%96%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/"/>
      <url>/2025/08/22/Github%E7%BE%8E%E5%8C%96%E8%BF%87%E7%A8%8B%E8%AE%B0%E5%BD%95/</url>
      
        <content type="html"><![CDATA[<h1 id="Github美化过程记录"><a href="#Github美化过程记录" class="headerlink" title="Github美化过程记录"></a>Github美化过程记录</h1><blockquote><p>最后的效果可以参考我的Github主页：</p><p><a href="https://github.com/wenjiew-astro">wenjiew-astro (Wenjie Wang)</a></p></blockquote><p>有很多很好的教程分享了自己的美化之路，我是个懒狗，所以就直接 <strong>Copy &amp; Paste</strong>，然后 <strong>改改改</strong> 就成了我自己的主页了，下面是我参考的最主要的教程来源：</p><blockquote><p><a href="https://zhuanlan.zhihu.com/p/454597068">(99+ 封私信 &#x2F; 80 条消息) Github 首页美化教程（一）：打造个性化的GitHub首页 - 知乎</a></p></blockquote><p>当然了，还有很多很好的教程。如</p><blockquote><p><a href="https://www.cnblogs.com/PeterJXL/p/18437094">超详细的 GitHub 个人主页美化教程 - peterjxl - 博客园</a></p></blockquote><p>我这里就主要记录我自己的修改过程。</p><blockquote><p>Tips</p><p>你可以直接复制我的仓库，然后按照我的方法，就可以很容易构建你自己的主页了！</p><p>Have a nice day !!</p></blockquote><h2 id="1-首先要找到一个我们喜欢的主页"><a href="#1-首先要找到一个我们喜欢的主页" class="headerlink" title="1.首先要找到一个我们喜欢的主页"></a>1.首先要找到一个我们喜欢的主页</h2><p>因为我们不是自己做主页，所以第一要务就是要找到一个我们<strong>心仪</strong>的主页，然后”参考“一下（你懂我的意思吧）。这里我的来源是孙同学的主页 <a href="https://github.com/sun0225SUN/">sun0225SUN (Guoqi Sun)</a>。</p><p>找到之后，其实我们有两种方式，第一种就是直接克隆他的仓库，因为这个主页要求仓库的名字和用户的名字相同才会显示，所以在克隆的时候我们把仓库的名字改成我们自己的用户名就可以了。还有一种，就是把这个仓库下载下来，然后我们自己新建一个与用户名同名的仓库，使用电脑的git或者Github Desktop软件把这个代码推到我们刚刚建立的仓库里面去。</p><blockquote><p>注意要先打开仓库权限</p><ul><li>仓库 <strong>Settings → Actions → General → Workflow permissions</strong></li><li>选 <strong>Read and write permissions</strong></li><li>如果看到 “Allow GitHub Actions to create and approve pull requests”，也勾上</li></ul></blockquote><p>这里我推荐第二种，但其实第一种也没有任何问题。</p><p>之后我们只需要去改 <strong>README.md</strong> 这个文件内容就可以了，文件里面写了很多的注释，我相信你很容易就能看懂，下面我主要写一些我自己配置过程中的问题。</p><h2 id="配置过程中我遇到的问题-—-token问题"><a href="#配置过程中我遇到的问题-—-token问题" class="headerlink" title="配置过程中我遇到的问题 — token问题"></a>配置过程中我遇到的问题 — token问题</h2><p>这个问题是最头疼的问题了，修改过程中最麻烦的就是每一个插件都需要一个权限，这个权限主要是用来给自己建的那些action让它去自动更新我们的这个 <strong>README.md</strong> 文件。因此下面我就把所有需要用到的权限一次性列出来：</p><h3 id="WakaTime-Token"><a href="#WakaTime-Token" class="headerlink" title="WakaTime Token"></a>WakaTime Token</h3><p>这个主要作用是用来记录我们的编程时间的，官网是 <a href="https://wakatime.com/dashboard">Dashboard - WakaTime</a> 。</p><p>我们需要在官网注册一个账户，然后在设置里面找到 <strong>Edit profile</strong> ，在这里面该我们的<strong>名字</strong>和<strong>用户名</strong>。</p><blockquote><p>注意，这里的用户名就是你真正需要写到 <strong>README.md</strong> 中的名字</p></blockquote><p>之后，在设置里面你会看到 <strong>account</strong> 里面有 <strong>Secret API Key</strong> ，这个记住他，我们有两个地方需要用到：</p><h4 id="仓库"><a href="#仓库" class="headerlink" title="仓库"></a>仓库</h4><ol><li><p>先拿到你的 <strong>WAKATIME_API_KEY</strong></p><ul><li><p>登录 <a href="https://wakatime.com/">WakaTime</a></p></li><li><p>右上角头像 → <strong>Settings → API Key</strong></p></li><li><p>会看到一串很长的 key（类似 <code>1234abcd-xxxx-xxxx-xxxx-abcdef123456</code>）</p></li><li><p>复制下来备用</p></li></ul></li><li><p>在 GitHub 仓库里添加 <strong>Secrets</strong></p><ul><li><p>打开你的仓库 → 点上方菜单里的 <strong>Settings</strong></p></li><li><p>左边栏找到 <strong>Secrets and variables → Actions</strong></p></li><li><p>点 <strong>New repository secret</strong></p></li><li><p>Name 填：<code>WAKATIME_API_KEY</code></p></li><li><p>Value 填：刚才复制的那串 key</p></li><li><p>保存</p></li></ul></li></ol><h4 id="你的代码编辑器"><a href="#你的代码编辑器" class="headerlink" title="你的代码编辑器"></a>你的代码编辑器</h4><ul><li>在你的编辑器（VS Code、PyCharm 等）里安装 WakaTime 插件。</li><li>输入你的 API Key（在 WakaTime Settings → API Key）。</li><li>正常写点代码，至少运行几个小时，产生实际的编码时间数据。</li><li>等一天（WakaTime 的 public profile 只显示“过去的天数”，新账号当天是不会展示的）。</li></ul><h3 id="各种Action的Token"><a href="#各种Action的Token" class="headerlink" title="各种Action的Token"></a>各种Action的Token</h3><p>.github&#x2F;workflows 里面总共有六个Action：</p><ol><li><a href="https://github.com/wenjiew-astro/wenjiew-astro/blob/main/.github/workflows/blog.yml">blog.yml</a></li><li><a href="https://github.com/wenjiew-astro/wenjiew-astro/blob/main/.github/workflows/contrib.yml">contrib.yml</a></li><li><a href="https://github.com/wenjiew-astro/wenjiew-astro/blob/main/.github/workflows/fork_star.yml">fork_star.yml</a></li><li><a href="https://github.com/wenjiew-astro/wenjiew-astro/blob/main/.github/workflows/metrics.yml">metrics.yml</a></li><li><a href="https://github.com/wenjiew-astro/wenjiew-astro/blob/main/.github/workflows/snake.yml">snake.yml</a></li><li><a href="https://github.com/wenjiew-astro/wenjiew-astro/blob/main/.github/workflows/waka.yml">waka.yml</a></li></ol><p>每一个Action他们需要的Token都不一样。虽然我们可以定义同一个api_key，但是Token的名字却不尽相同。（这里也就是我为什么推荐你用第一种方式，因为如果用第二种的话，可能还需要改更多的内容）</p><p>下面我写一下需要做的事情：</p><h4 id="生成-PAT"><a href="#生成-PAT" class="headerlink" title="生成 PAT"></a><strong>生成 PAT</strong></h4><ul><li>去 GitHub → Settings → Developer settings → <strong>Personal access tokens → Tokens (classic)</strong></li><li>点击「Generate new token (classic)」</li><li>勾选最少的权限：<ul><li><code>repo</code></li><li><code>read:user</code></li><li><code>read:org</code>（如果你要展示组织&#x2F;私有仓库信息）</li><li><code>workflow</code></li></ul></li><li>复制生成的 token（格式是 <code>ghp_XXXXXXXXX...</code>）</li></ul><h4 id="添加到仓库-Secrets"><a href="#添加到仓库-Secrets" class="headerlink" title="添加到仓库 Secrets"></a><strong>添加到仓库 Secrets</strong></h4><ul><li>打开你的仓库 <code>wenjiew-astro/wenjiew-astro</code></li><li>Settings → Secrets and variables → Actions → New repository secret</li><li>Name 填：<code>GH_TOKEN</code></li><li>Value 填：刚才生成的 PAT</li></ul><p>你需要把这个PAT放到如下几个不同的名字中去：</p><ol><li><code>GH_TOKEN</code></li><li><code>ACCESS_TOKEN</code></li><li><code>METRICS_TOKEN</code></li></ol><blockquote><p>你可能会有疑问，为什么要新建这么多Token，只用一个不行吗？答案是，可以！But，如果你这里只建一个Token的话，那你就需要去改那好几个yml文件，如果你想改的话当然没问题，你可以去改。</p></blockquote><h4 id="还有一个小点"><a href="#还有一个小点" class="headerlink" title="还有一个小点"></a>还有一个小点</h4><p>你会在 <strong>README.md</strong> 文件最后看到这样一句话：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;img width=&quot;120%&quot; src=&quot;https://repobeats.axiom.co/api/embed/7aa7311e6885fc4b499b17d5c47c0cd5cbca9d4d.svg&quot; /&gt;</span><br></pre></td></tr></table></figure><p>这一行是 <strong><a href="https://repobeats.axiom.co/">Repobeats</a></strong> 服务，自动生成一张仓库贡献的动态分析图。比如提交数、活跃度、PR、issue 等，会显示成五颜六色的曲线图。这个 <strong>Repobeats</strong> 图，它并不是记录你的「整个 GitHub 账号」，而是记录<strong>某一个具体仓库</strong>的活动情况。</p><p>你只需要在 <strong><a href="https://repobeats.axiom.co/">Repobeats</a></strong>  这个网页中登录你的 Github 账号，然后选择需要记录的仓库，就会有一句这样的话：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">// Add the following to your README.md to embed Repobeats</span><br><span class="line"></span><br><span class="line">![Alt](https://repobeats.axiom.co/api/embed/7aa7311e6885fc4b499b17d5c47c0cd5cbca9d4d.svg &quot;Repobeats analytics image&quot;)</span><br></pre></td></tr></table></figure><p>你只需要把这里面的网址 替换掉就行了。这个时候基本就大功告成了。</p><p>如果你还有一个博客，那你就需要配置一下 <a href="https://github.com/wenjiew-astro/wenjiew-astro/blob/main/.github/workflows/blog.yml">blog.yml</a> 这个文件。</p><p>我的博客是 <a href="https://wenjiew-astro.github.io/">Wenjie Wang</a>，是部署在 Github 上面的，下面是 GPT 给我写的教程，但是我现在没有那个电脑，之后尝试了再更新。</p><p>+++</p><p>明白～Hexo 默认不自带 RSS，需要先装插件来“产出”一个 feed，然后再用那个 GitHub Action 把文章列表写进 README。</p><p>下面按顺序来：</p><hr><h2 id="1-给-Hexo-生成-RSS（一次性设置）"><a href="#1-给-Hexo-生成-RSS（一次性设置）" class="headerlink" title="1) 给 Hexo 生成 RSS（一次性设置）"></a>1) 给 Hexo 生成 RSS（一次性设置）</h2><p>在你的 Hexo 博客目录（有 <code>source/</code>、<code>themes/</code> 的那个根目录）里执行：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><p>然后在 <strong>站点配置文件</strong> <code>_config.yml</code>（根目录的，不是主题里的）加入&#x2F;修改如下：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 站点基本信息（确保正确，影响 feed 的链接）</span></span><br><span class="line"><span class="attr">url:</span> <span class="string">https://wenjiew-astro.github.io</span></span><br><span class="line"><span class="attr">root:</span> <span class="string">/</span></span><br><span class="line"><span class="attr">permalink:</span> <span class="string">:year/:month/:day/:title/</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># RSS 配置（hexo-generator-feed）</span></span><br><span class="line"><span class="attr">feed:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">atom</span>            <span class="comment"># 可选 atom | rss2 | both</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">atom.xml</span>        <span class="comment"># 生成文件名（常见：atom.xml 或 rss2.xml）</span></span><br><span class="line">  <span class="attr">limit:</span> <span class="number">10</span>             <span class="comment"># 列出最近 N 篇</span></span><br><span class="line">  <span class="attr">hub:</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span>         <span class="comment"># 是否包含全文（true/false）</span></span><br></pre></td></tr></table></figure><p>生成并预览看看是否有 <code>atom.xml</code>：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo g</span><br><span class="line">hexo s</span><br></pre></td></tr></table></figure><p>打开浏览器访问本地 <code>http://localhost:4000/atom.xml</code> 能看到 XML 就说明成功了。</p><p>部署后，你的线上地址就会是（按上面配置）：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">https://wenjiew-astro.github.io/atom.xml</span><br></pre></td></tr></table></figure><blockquote><p>如果你的站点是 <strong>项目页</strong>（repo 不是 <code>wenjiew-astro.github.io</code> 而是别的），那线上路径会是：<br> <code>https://wenjiew-astro.github.io/&lt;repo-name&gt;/atom.xml</code>。<br> 你的是用户页（域名就是用户名.github.io），所以直接 <code>/atom.xml</code>。</p></blockquote><hr><h2 id="2-改-GitHub-Actions（把-RSS-地址换成你的）"><a href="#2-改-GitHub-Actions（把-RSS-地址换成你的）" class="headerlink" title="2) 改 GitHub Actions（把 RSS 地址换成你的）"></a>2) 改 GitHub Actions（把 RSS 地址换成你的）</h2><p>把你现有的 workflow 改成这样（只改 url 即可；其余保留）：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Recent</span> <span class="string">Blog</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">schedule:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">cron:</span> <span class="string">&quot;0 0 * * *&quot;</span>   <span class="comment"># 每天 00:00 UTC 跑一次</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">name:</span> <span class="string">generate-readme-feed</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">sarisia/actions-readme-feed@v1</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">url:</span> <span class="string">&quot;https://wenjiew-astro.github.io/atom.xml&quot;</span>  <span class="comment"># ← 用你刚生成的 feed</span></span><br><span class="line">          <span class="attr">file:</span> <span class="string">&quot;README.md&quot;</span></span><br><span class="line">          <span class="comment"># 可选：最多显示 5 篇、每项的格式</span></span><br><span class="line">          <span class="attr">max_item:</span> <span class="number">5</span></span><br><span class="line">          <span class="attr">format:</span> <span class="string">&quot;- &lt;a href=&#x27;$&#123;link&#125;&#x27;&gt;$&#123;title&#125;&lt;/a&gt; &lt;sub&gt;($&#123;pubDate&#125;)&lt;/sub&gt;&quot;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">uses:</span> <span class="string">sarisia/actions-commit@master</span></span><br></pre></td></tr></table></figure><hr><h2 id="3-在-README-放占位符"><a href="#3-在-README-放占位符" class="headerlink" title="3) 在 README 放占位符"></a>3) 在 README 放占位符</h2><p>在 <code>README.md</code> 里加：</p><figure class="highlight markdown"><table><tr><td class="code"><pre><span class="line"><span class="section">## 📝 最近更新</span></span><br><span class="line">&lt;!--START<span class="emphasis">_SECTION:feed--&gt;</span></span><br><span class="line"><span class="emphasis">&lt;!--END_</span>SECTION:feed--&gt;</span><br></pre></td></tr></table></figure><p>Action 每次跑，会自动把最新文章列表填充在这两行之间。</p><hr><h2 id="常见问题排查"><a href="#常见问题排查" class="headerlink" title="常见问题排查"></a>常见问题排查</h2><ul><li><strong>访问 404</strong>：确认最终线上地址是否是 <code>/atom.xml</code>（或你设置的 <code>path</code>）。用户页是根目录；项目页要带仓库名。</li><li><strong>feed.xml &#x2F; rss.xml 打不开</strong>：你没有装插件或 <code>feed:</code> 节没配置；检查 <code>_config.yml</code> 是否在<strong>站点根</strong>而不是主题配置里。</li><li><strong>时区&#x2F;时间</strong>：Hexo 默认 UTC，想显示北京时间可以在 README 的格式里自己处理，或保持简单用 <code>$&#123;pubDate&#125;</code>。</li><li><strong>缓存</strong>：GitHub 对 README 图片&#x2F;内容有缓存，第一次更新后稍等一会儿或点进 Actions 的运行日志确认是否写入成功。</li></ul><hr><p>如果你把 <code>_config.yml</code>（相关几行）贴我，我可以帮你确认最终线上 feed 的准确 URL，并把 workflow 的 <code>format</code> 再美化一下（比如只显示日期不含时区、加 Emoji 等）。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Github </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Github主页 </tag>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo 写博客指南</title>
      <link href="/2025/08/16/hexo%E5%86%99%E5%8D%9A%E5%AE%A2%E6%8C%87%E5%8D%97/"/>
      <url>/2025/08/16/hexo%E5%86%99%E5%8D%9A%E5%AE%A2%E6%8C%87%E5%8D%97/</url>
      
        <content type="html"><![CDATA[<h1 id="Hexo-写博客指南"><a href="#Hexo-写博客指南" class="headerlink" title="Hexo 写博客指南"></a>Hexo 写博客指南</h1><p>这是一份面向新手和进阶用户的 Hexo 写作指南，整合了常见问题与一些经验。内容涵盖目录结构、文章写作、分类标签管理、草稿发布以及部署方式等。</p><hr><h2 id="1-Hexo-目录结构"><a href="#1-Hexo-目录结构" class="headerlink" title="1. Hexo 目录结构"></a>1. Hexo 目录结构</h2><p>一个典型的 Hexo 博客目录：</p><blockquote><p>.<br>├── _config.yml        # 博客全局配置文件<br>├── scaffolds&#x2F;         # 文章模板<br>├── source&#x2F;            # 存放页面、文章、静态资源<br>│   ├── _posts&#x2F;        # 文章（Markdown 文件）<br>│   ├── about&#x2F;         # 独立页面：关于我<br>│   ├── categories&#x2F;    # 独立页面：分类<br>│   ├── tags&#x2F;          # 独立页面：标签<br>│   └── …            # 其他页面，比如 links、music<br>├── themes&#x2F;            # 主题目录（如 butterfly）<br>├── public&#x2F;            # 生成的静态页面（执行 hexo g 后出现）<br>└── package.json       # 项目依赖</p></blockquote><ul><li><strong>_posts&#x2F;</strong>：专门放文章，Hexo 会根据 Front-matter 自动生成分类、标签、归档。</li><li><strong>source&#x2F;xxx&#x2F;</strong>：放置独立页面，比如关于、友链、相册等。</li><li><strong>scaffolds&#x2F;</strong>：定义 <code>hexo new</code> 时文章的默认模板。</li><li><strong>themes&#x2F;</strong>：主题目录，可以自定义样式与功能。</li></ul><hr><h2 id="2-写文章的基本操作"><a href="#2-写文章的基本操作" class="headerlink" title="2. 写文章的基本操作"></a>2. 写文章的基本操作</h2><h3 id="新建文章"><a href="#新建文章" class="headerlink" title="新建文章"></a>新建文章</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new post <span class="string">&quot;我的第一篇文章&quot;</span></span><br></pre></td></tr></table></figure><p>生成的文件在 <code>source/_posts/我的第一篇文章.md</code>。</p><h3 id="文章头部-Front-matter"><a href="#文章头部-Front-matter" class="headerlink" title="文章头部 Front-matter"></a>文章头部 Front-matter</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">我的第一篇文章</span></span><br><span class="line"><span class="attr">date:</span> <span class="number">2025-08-16 15:00:00</span></span><br><span class="line"><span class="attr">categories:</span> <span class="string">学习</span></span><br><span class="line"><span class="attr">tags:</span> [<span class="string">Hexo</span>, <span class="string">教程</span>]</span><br><span class="line"><span class="attr">top:</span> <span class="literal">true</span>       <span class="comment"># 置顶</span></span><br><span class="line"><span class="attr">abbrlink:</span> <span class="number">1234</span>  <span class="comment"># 固定链接（需插件）</span></span><br><span class="line"><span class="attr">password:</span> <span class="number">123</span>   <span class="comment"># 密码保护</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><h3 id="草稿写作"><a href="#草稿写作" class="headerlink" title="草稿写作"></a>草稿写作</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new draft <span class="string">&quot;草稿文章&quot;</span></span><br></pre></td></tr></table></figure><p>草稿会保存在 <code>source/_drafts/</code> 下。<br> 发布草稿：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo publish draft <span class="string">&quot;草稿文章&quot;</span></span><br></pre></td></tr></table></figure><hr><h2 id="3-分类-标签-归档"><a href="#3-分类-标签-归档" class="headerlink" title="3. 分类 &#x2F; 标签 &#x2F; 归档"></a>3. 分类 &#x2F; 标签 &#x2F; 归档</h2><h3 id="文章中的分类与标签"><a href="#文章中的分类与标签" class="headerlink" title="文章中的分类与标签"></a>文章中的分类与标签</h3><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">categories:</span> <span class="string">技术</span></span><br><span class="line"><span class="attr">tags:</span> [<span class="string">Hexo</span>, <span class="string">Node.js</span>]</span><br></pre></td></tr></table></figure><ul><li>分类 <strong>有层级关系</strong>（<code>categories: [技术, 前端]</code>）。</li><li>标签是 <strong>自由标签</strong>，无层级。</li></ul><h3 id="分类、标签、归档页面"><a href="#分类、标签、归档页面" class="headerlink" title="分类、标签、归档页面"></a>分类、标签、归档页面</h3><p>Hexo 不会自动生成 <code>/categories/</code>、<code>/tags/</code>、<code>/archives/</code> 页面，需要手动新建：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new page categories</span><br><span class="line">hexo new page tags</span><br><span class="line">hexo new page archives</span><br></pre></td></tr></table></figure><p>修改生成的 <code>index.md</code>：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">分类</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">categories</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">标签</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">tags</span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">---</span></span><br><span class="line"><span class="attr">title:</span> <span class="string">归档</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">archives</span></span><br><span class="line"><span class="meta">---</span></span><br></pre></td></tr></table></figure><p>这样访问 <code>/categories/</code> 就能显示分类索引。</p><hr><h2 id="4-独立页面"><a href="#4-独立页面" class="headerlink" title="4. 独立页面"></a>4. 独立页面</h2><p>如果你在菜单里配置了页面入口，就需要在 <code>source/</code> 下新建对应文件夹：</p><p>例如：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">menu:</span></span><br><span class="line">  <span class="string">主页:</span> <span class="string">/</span> <span class="string">||</span> <span class="string">fas</span> <span class="string">fa-home</span></span><br><span class="line">  <span class="string">生活</span> <span class="string">||</span> <span class="attr">fas fa-list:</span></span><br><span class="line">    <span class="string">相册:</span> <span class="string">/photos/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-camera-retro</span></span><br><span class="line">    <span class="string">音乐:</span> <span class="string">/music/</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-music</span></span><br></pre></td></tr></table></figure><p>则需要建：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">source/photos/index.md</span><br><span class="line">source/music/index.md</span><br></pre></td></tr></table></figure><hr><h2 id="5-部署博客"><a href="#5-部署博客" class="headerlink" title="5. 部署博客"></a>5. 部署博客</h2><h3 id="常用命令"><a href="#常用命令" class="headerlink" title="常用命令"></a>常用命令</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean    <span class="comment"># 清理缓存和 public/</span></span><br><span class="line">hexo g        <span class="comment"># 生成静态文件</span></span><br><span class="line">hexo s        <span class="comment"># 本地启动预览</span></span><br><span class="line">hexo d        <span class="comment"># 部署到远程</span></span><br></pre></td></tr></table></figure><h3 id="Git-部署"><a href="#Git-部署" class="headerlink" title="Git 部署"></a>Git 部署</h3><p>在 <code>_config.yml</code> 里配置：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line">  <span class="attr">type:</span> <span class="string">git</span></span><br><span class="line">  <span class="attr">repo:</span> <span class="string">git@github.com:用户名/用户名.github.io.git</span></span><br><span class="line">  <span class="attr">branch:</span> <span class="string">master</span></span><br></pre></td></tr></table></figure><p>安装部署插件：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save</span><br></pre></td></tr></table></figure><p>执行：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure><hr><h2 id="6-常见问题与技巧"><a href="#6-常见问题与技巧" class="headerlink" title="6. 常见问题与技巧"></a>6. 常见问题与技巧</h2><ul><li><strong>文章目录（TOC）</strong>：主题支持自动生成目录，需在 <code>_config.yml</code> 开启。</li><li><strong>置顶文章</strong>：在 Front-matter 加 <code>top: true</code>。</li><li><strong>加密文章</strong>：安装 <code>hexo-blog-encrypt</code>，Front-matter 写 <code>password: xxx</code>。</li><li><strong>多作者协作</strong>：推荐用 Git 管理 Hexo 源码（不是 public&#x2F;），每人写完文章 push，再统一部署。</li><li><strong>主题优化</strong>：可以修改主题的样式文件（如 Butterfly 的 <code>_layout/*.styl</code>），实现自定义公告栏、背景、特效等。</li></ul><hr><h2 id="7-推荐工作流"><a href="#7-推荐工作流" class="headerlink" title="7. 推荐工作流"></a>7. 推荐工作流</h2><ol><li><p>写文章：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo new post <span class="string">&quot;标题&quot;</span></span><br></pre></td></tr></table></figure></li><li><p>本地预览：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo s</span><br></pre></td></tr></table></figure></li><li><p>部署到 GitHub Pages：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo clean &amp;&amp; hexo g &amp;&amp; hexo d</span><br></pre></td></tr></table></figure></li></ol><hr><h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>Hexo 是一个非常灵活的博客框架，你可以从最基础的写文章开始，逐步扩展分类、标签、搜索、评论、统计等功能。</p><p>愿你在 Hexo 的世界里，记录自己的点滴，留下专属于你的「数字足迹」。✨</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>hexo+github 搭建个人主页</title>
      <link href="/2025/08/16/hexo+github%20%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%B8%BB%E9%A1%B5/"/>
      <url>/2025/08/16/hexo+github%20%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E4%B8%BB%E9%A1%B5/</url>
      
        <content type="html"><![CDATA[<h1 id="hexo-github-搭建个人主页"><a href="#hexo-github-搭建个人主页" class="headerlink" title="hexo+github 搭建个人主页"></a>hexo+github 搭建个人主页</h1><h2 id="1-配置git"><a href="#1-配置git" class="headerlink" title="1.配置git"></a>1.配置git</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">PS C:\Users\44660\Desktop&gt; git config --global user.name &quot;wenjie-astro&quot; # user_name 填入 GitHub 用户名</span><br><span class="line">PS C:\Users\44660\Desktop&gt; git config --global user.email &quot;446601097@qq.com&quot; # user_email 填入 GitHub 注册的邮箱</span><br></pre></td></tr></table></figure><h2 id="2-安装Node-js"><a href="#2-安装Node-js" class="headerlink" title="2.安装Node.js"></a>2.安装Node.js</h2><p>安装 Node.js 会包含环境变量以及 npm 的安装，安装后，可以在命令行输入如下命令检测 Node.js 是否安装成功：</p><p>第一个命令：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">node -v</span><br></pre></td></tr></table></figure><p>这个命令，在 nodejs 安装成功的情况下会显示 nodejs 的版本号。</p><p>第二个命令：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm -v</span><br></pre></td></tr></table></figure><p>这个命令，在 nodejs 安装成功的情况下会显示 npm 的版本号。</p><blockquote><p>注意：这里可能会有错误</p><blockquote><p>PS C:\Users\44660\Desktop&gt; npm -v<br>npm : 无法加载文件 C:\Program Files\nodejs\npm.ps1，因为在此系统上禁止运行脚本。有关详细信息，请参阅 https:&#x2F;go.microsof<br>t.com&#x2F;fwlink&#x2F;?LinkID&#x3D;135170 中的 about_Execution_Policies。<br>所在位置 行:1 字符: 1</p><ul><li><p>npm -v</p><ul><li>CategoryInfo          : SecurityError: (:) []，PSSecurityException</li><li>FullyQualifiedErrorId : UnauthorizedAccess</li></ul></li></ul></blockquote><p>解决方法：</p><p>这个错误是由于 PowerShell 的执行策略限制导致的。在某些系统上，默认情况下，PowerShell 禁止运行脚本。您可以尝试以下解决方案：</p><p>以管理员身份运行 PowerShell：右键单击 PowerShell 图标，并选择”以管理员身份运行”。</p><p>修改 PowerShell 执行策略：在管理员身份的 PowerShell 窗口中执行以下命令：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Set-ExecutionPolicy RemoteSigned -Scope CurrentUser</span><br></pre></td></tr></table></figure><p>我的这样就可以解决了</p><p><a href="https://blog.csdn.net/AIB_Kasic/article/details/130702121">修复：npm : 无法加载文件 C:\Program Files\nodejs\npm.ps1，因为在此系统上禁止运行脚本。有关详细信息-CSDN博客</a></p></blockquote><h2 id="3-配置github-ssh"><a href="#3-配置github-ssh" class="headerlink" title="3.配置github ssh"></a>3.配置github ssh</h2><p>打开 Git Bash，输入命令：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh-keygen -t rsa -b 4096 -C &quot;446601097@qq.com&quot;</span><br></pre></td></tr></table></figure><p>然后直接三个回车即可，默认不需要设置密码。查看是否已经有 ssh 密钥。打开用户主目录 <code>C:\Users\username\.ssh</code>，.ssh文件夹一定存放在C:，至于后面的路径lenovo这个不一定每台电脑都相同。找到.ssh文件夹，打开如下：</p><p>然后找到生成的 <code>.ssh</code> 的文件夹中的 <code>id_rsa.pub</code> 密钥，将内容全部复制。其中 <code>id_rsa</code> 是私钥不能泄露，<code>id_rsa.pub</code> 是公钥可以放心告诉他人。</p><p>打开 <a href="https://github.com/settings/ssh/new">GitHub SSH and GPG keys</a> 页面，新建一个 ssh key：</p><p><code>Title</code> 为标题，任意填即可，将刚刚复制的 <code>id_rsa.pub</code> 内容粘贴进去，最后点击 <code>Add SSH key</code>。在 <code>Git Bash</code> 中检测 <code>GitHub</code> 公钥设置是否成功，输入如下命令：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">ssh -T git@github.com</span><br></pre></td></tr></table></figure><p>验证是否连接成功，连接成功的话，显示如下：</p><h2 id="4-安装与初始化"><a href="#4-安装与初始化" class="headerlink" title="4.安装与初始化"></a>4.安装与初始化</h2><p>在 <code>Git Bash</code> 中输入以下命令：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install -g hexo-cli # 此命令完成对 hexo 的安装</span><br></pre></td></tr></table></figure><p>安装完成后，在电脑的某个地方新建一个文件夹（名字可以随便取）专门用于存放博客代码，比如我的是 <code>D:\Blogs</code>，由于这个文件夹将来存放博客的所有内容和素材，以及所有的博客操作都会在其中完成，所以最好不要随便放。</p><p>进入新建的博客目录，输入如下命令：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo init # 该命令完成 hexo 在本地博客目录的初始化</span><br></pre></td></tr></table></figure><h2 id="5-安装butterfly主题之后报错"><a href="#5-安装butterfly主题之后报错" class="headerlink" title="5.安装butterfly主题之后报错"></a>5.安装butterfly主题之后报错</h2><p>extends includes&#x2F;layout.pug block content include .&#x2F;includes&#x2F;mixins&#x2F;indexPostUI.pug +indexPostUI</p><blockquote><p>需要安装<br>再运行 <code>hexo server</code>启动服务，访问 <a href="http://localhost:4000/">http://localhost:4000/</a> ，页面显示 <code>extends includes/layout.pug block content include ./includes/mixins/indexPostUI.pug +indexPostUI</code> 。 需要安装运行 <code>npm install hexo-renderer-pug hexo-renderer-stylus --save</code> （这一个操作会很慢）。</p></blockquote><h2 id="6-hexo-操作指南"><a href="#6-hexo-操作指南" class="headerlink" title="6.hexo 操作指南"></a>6.hexo 操作指南</h2><h3 id="生成静态文件"><a href="#生成静态文件" class="headerlink" title="生成静态文件"></a>生成静态文件</h3><p>在 <code>Git Bash</code> 中输入以下命令：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo g # 生成静态文件</span><br></pre></td></tr></table></figure><p>执行以上命令后，Hexo 就会在 <code>public</code> 文件夹中生成相关的 <code>html</code> 文件，这些文件将来都是要提交到 <code>GitHub</code> 上的 <code>username.github.io</code> 的仓库中去的。</p><h3 id="本地预览"><a href="#本地预览" class="headerlink" title="本地预览"></a>本地预览</h3><p>在 <code>Git Bash</code> 输入以下命令：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo s # 开启本地预览</span><br></pre></td></tr></table></figure><p><code>hexo s</code> 是开启本地预览服务，打开浏览器访问 <code>http://localhost:4000</code> 即可看到内容，<code>Ctrl+C</code> 停止本地预览。本地预览可以实时查看博客的编辑情况，待博客写完后一起部署到 <code>GitHub</code> 上。</p><p>第一次初始化的时候 <code>hexo</code> 已经帮我们写了一篇名为 Hello World 的文章，<strong>默认的主题比较丑</strong></p><h3 id="推送到GitHub"><a href="#推送到GitHub" class="headerlink" title="推送到GitHub"></a>推送到GitHub</h3><h4 id="配置站点配置文件"><a href="#配置站点配置文件" class="headerlink" title="配置站点配置文件"></a>配置站点配置文件</h4><p><code>hexo</code> 有 2 种 <code>_config.yml</code> 文件，一个是根目录下的全局的 <code>_config.yml</code>，一个是各个主体 <code>theme</code> 下的 <code>_config.yml</code>。将前者称为站点配置文件， 后者称为主题配置文件。</p><p>打开根目录下站点配置文件 <code>_config.yml</code>，配置有关 <code>deploy</code> 的部分：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># Deployment</span><br><span class="line">## Docs: https://hexo.io/docs/one-command-deployment</span><br><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: git@github.com:fanlumaster/你的用户名.github.io.git</span><br><span class="line">  branch: main</span><br></pre></td></tr></table></figure><h4 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h4><p>在 <code>Git Bash</code> 中输入以下命令：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-deployer-git --save # 安装部署插件</span><br></pre></td></tr></table></figure><p>如果不进行上述操作，直接使用 <code>hexo d</code> 部署到 <code>GitHub</code>，将会报错。</p><h4 id="修改配置"><a href="#修改配置" class="headerlink" title="修改配置"></a>修改配置</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git config --global core.safecrlf false</span><br></pre></td></tr></table></figure><p>参考：<a href="https://stackoverflow.com/questions/5834014/lf-will-be-replaced-by-crlf-in-git-what-is-that-and-is-it-important">stackoverflow</a></p><p>这个必须执行 不然使用推送必报错</p><h4 id="部署到-GitHub"><a href="#部署到-GitHub" class="headerlink" title="部署到 GitHub"></a>部署到 GitHub</h4><p>在 <code>Git Bash</code> 中输入以下命令：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">hexo d</span><br></pre></td></tr></table></figure><p>部署成功后，打开对应的网址 <code>https://username.github.io</code>，如果出现了和本地预览一样的效果，那么，表明部署成功。</p><p>对了 并不需要自己手动开启 GitHub Pages</p><p>如果你推送成功 就可以直接打开啦</p><h2 id="hexo-需要下载的组件"><a href="#hexo-需要下载的组件" class="headerlink" title="## hexo 需要下载的组件"></a>## hexo 需要下载的组件</h2><p>搜索插件</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-search <span class="attr">--save</span></span><br></pre></td></tr></table></figure><p>字数统计组件</p><figure class="highlight css"><table><tr><td class="code"><pre><span class="line">npm install hexo-wordcount <span class="attr">--save</span> or yarn add hexo-wordcount</span><br></pre></td></tr></table></figure><p>评论区组件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-next-giscus --save</span><br></pre></td></tr></table></figure><p>搜索组件</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><h2 id="相关网页"><a href="#相关网页" class="headerlink" title="## 相关网页"></a>## 相关网页</h2><p><a href="https://butterfly.js.org/">Butterfly - A Simple and Card UI Design theme for Hexo</a></p><ul><li>官方教程</li></ul><p><a href="https://fontawesome.com/icons">Find Icons with the Perfect Look &amp; Feel | Font Awesome</a></p><ul><li>支持的图标网站</li></ul><p><a href="https://blog.csdn.net/mjh1667002013/article/details/129290903">【Hexo】Hexo搭建Butterfly主题并快速美化_hexo butterfly-CSDN博客</a></p><ul><li>美化教程</li></ul><p><a href="https://haowallpaper.com/">免费4K高清壁纸-电脑背景图片-Mac壁纸网站「哲风壁纸」</a></p><ul><li>一些好看的壁纸</li></ul><p><a href="https://hubiaonb.github.io/2024/04/16/hexo-github/">基于Hexo和GitHub搭建博客 - Master Blog</a></p><ul><li>最基础的搭建及使用</li></ul><p><a href="https://llunch4w.github.io/2021/06/15/hexo%E6%B7%BB%E5%8A%A0%E7%9C%8B%E6%9D%BF%E5%A8%98/">hexo添加看板娘 | 摸鱼的Llunch</a></p><p>[butterfly主题添加看板娘 | “永不言弃”](<a href="https://www.hastur45.cn/2025/03/08/hexo">https://www.hastur45.cn/2025/03/08/hexo</a> butterfly 博客添加看板娘&#x2F;)</p><ul><li>右下角的看板娘</li></ul><p><a href="https://blog.51cto.com/100Chocolate/2898583">【源码开放】Hexo+Github+Coding 博客butterfly 和 matery 主题 搭建完全教程【整理】_51CTO博客_github hexo 搭建博客</a></p><ul><li>访客地图</li><li><ul><li><a href="https://clustrmaps.com/">Clustrmaps - Free People Search Engine</a></li></ul></li><li>底部小红心</li></ul><p><a href="https://jachinzhang1.github.io/2025/02/04/hexo%E5%8D%9A%E5%AE%A2%E6%B7%BB%E5%8A%A0%E8%AF%84%E8%AE%BA%E7%B3%BB%E7%BB%9F/">hexo博客添加评论系统 | Jachin&#39;s Blog</a></p><p><a href="https://shirynl.github.io/2025/01/28/%E8%AF%84%E8%AE%BA%E6%B5%8B%E8%AF%95/">hexo-next &amp; giscus 评论测试 | 初来乍到，一无所知</a></p><ul><li>评论系统</li></ul><p><a href="https://fe32.top/articles/hexo1607/">基于 Hexo 键入搜索功能 | 唐志远</a></p><ul><li>搜索功能也没加进去，之后再说</li></ul><p><a href="https://bbling.cc/posts/3536/">hexo页脚添加鱼塘 | LinBlog</a></p><ul><li>想着要有一个🐟游动的效果，但是没有实现，之后再说吧</li></ul><p><a href="https://jzephyrsaber.github.io/2022/10/12/nightsky/">Hexo博客开启夜间模式时的星空效果 | JZephyrの小窝</a></p><ul><li>星空效果</li></ul><p><a href="https://blog.csdn.net/2201_75319686/article/details/140700493">【hexo】关于butterfly主题的文章标题及其相关信息布局的修改位置_hexo-theme-butterfly文章标题-CSDN博客</a></p><ul><li>标题居中</li></ul><p>[Butterfly主题美化-页面毛玻璃效果_毛玻璃搜索页-CSDN博客](<a href="https://blog.csdn.net/qq_38870718/article/details/122555421#:~:text=%E6%9C%AC%E6%96%87%E4%BB%8B%E7%BB%8D%E4%BA%86%E4%B8%80%E7%A7%8D%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89CSS%E6%96%87%E4%BB%B6%E6%9D%A5%E7%BE%8E%E5%8C%96Hexo%E5%8D%9A%E5%AE%A2%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%8C%E5%8C%85%E6%8B%AC%E5%AE%9E%E7%8E%B0%E6%AF%9B%E7%8E%BB%E7%92%83%E6%95%88%E6%9E%9C%E3%80%81%E6%90%9C%E7%B4%A2%E6%A1%86%E7%BE%8E%E5%8C%96%E3%80%81%E6%BB%9A%E5%8A%A8%E6%9D%A1%E5%8F%8A%E8%83%8C%E6%99%AF%E6%B8%90%E5%8F%98%E5%8A%A8%E7%94%BB%E7%AD%89%EF%BC%8C%E9%80%82%E7%94%A8%E4%BA%8E%E6%8F%90%E9%AB%98%E4%B8%AA%E4%BA%BA%E7%BD%91%E7%AB%99%E7%9A%84%E8%A7%86%E8%A7%89%E4%BD%93%E9%AA%8C%E3%80%82">https://blog.csdn.net/qq_38870718/article/details/122555421#:~:text=本文介绍了一种使用自定义CSS文件来美化Hexo博客的方法，包括实现毛玻璃效果、搜索框美化、滚动条及背景渐变动画等，适用于提高个人网站的视觉体验。</a> 摘要生成于 C知道 ，由 DeepSeek-R1 满血版支持，,前往体验 &gt; 创建一个 mycss.css文件 移动到 themes[%26but%26]terflysourcecss 目录下。)</p><ul><li>毛玻璃效果</li></ul>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Hexo </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Hexo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hello World</title>
      <link href="/2025/07/12/hello-world/"/>
      <url>/2025/07/12/hello-world/</url>
      
        <content type="html"><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure><p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
</search>
